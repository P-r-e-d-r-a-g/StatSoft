<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on February 22, 2017 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Untitled Document</title>

<meta name="description" content="Untitled Document">
<meta name="keywords" content="Untitled Document">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Basic-Concepts"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[ &lt; ]</td>
<td valign="middle" align="left">[<a href="#Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[ &lt;&lt; ]</td>
<td valign="middle" align="left">[ Up ]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Basic-Concepts-1"></a>
<h1 class="chapter">1. Basic Concepts</h1>

<p>This chapter introduces basic data structures and other concepts
needed for developing in PSPP.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Values">1.1 Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Input-and-Output-Formats">1.2 Input and Output Formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#User_002dMissing-Values">1.3 User-Missing Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels">1.4 Value Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variables">1.5 Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionaries">1.6 Dictionaries</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Coding-Conventions">1.7 Coding Conventions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Cases">1.8 Cases</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Data-Sets">1.9 Data Sets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Pools">1.10 Pools</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Basic-Concepts" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Numeric-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Values-1"></a>
<h2 class="section">1.1 Values</h2>

<a name="index-value"></a>
<p>The unit of data in PSPP is a <em>value</em>.
</p>
<a name="index-width"></a>
<a name="index-string-value"></a>
<a name="index-numeric-value"></a>
<a name="index-MAX_005fSTRING"></a>
<p>Values are classified by <em>type</em> and <em>width</em>.  The
type of a value is either <em>numeric</em> or <em>string</em> (sometimes
called alphanumeric).  The width of a string value ranges from 1 to
<code>MAX_STRING</code> bytes.  The width of a numeric value is artificially
defined to be 0; thus, the type of a value can be inferred from its
width.
</p>
<p>Some support is provided for working with value types and widths, in
&lsquo;<tt>data/val-type.h</tt>&rsquo;:
</p>
<dl>
<dt><a name="index-MAX_005fSTRING-1"></a><u>Macro:</u> int <b>MAX_STRING</b></dt>
<dd><p>Maximum width of a string value, in bytes, currently 32,767.
</p></dd></dl>

<dl>
<dt><a name="index-val_005ftype_005fis_005fvalid"></a><u>Function:</u> bool <b>val_type_is_valid</b><i> (enum val_type <var>val_type</var>)</i></dt>
<dd><p>Returns true if <var>val_type</var> is a valid value type, that is,
either <code>VAL_NUMERIC</code> or <code>VAL_STRING</code>.  Useful for
assertions.
</p></dd></dl>

<dl>
<dt><a name="index-val_005ftype_005ffrom_005fwidth"></a><u>Function:</u> enum val_type <b>val_type_from_width</b><i> (int <var>width</var>)</i></dt>
<dd><p>Returns <code>VAL_NUMERIC</code> if <var>width</var> is 0 and thus represents the
width of a numeric value, otherwise <code>VAL_STRING</code> to indicate that
<var>width</var> is the width of a string value.
</p></dd></dl>

<p>The following subsections describe how values of each type are
represented.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Numeric-Values">1.1.1 Numeric Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#String-Values">1.1.2 String Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Runtime-Typed-Values">1.1.3 Runtime Typed Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Numeric-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#String-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Numeric-Values-1"></a>
<h3 class="subsection">1.1.1 Numeric Values</h3>

<p>A value known to be numeric at compile time is represented as a
<code>double</code>.  PSPP provides three values of <code>double</code> for
special purposes, defined in &lsquo;<tt>data/val-type.h</tt>&rsquo;:
</p>
<dl>
<dt><a name="index-SYSMIS"></a><u>Macro:</u> double <b>SYSMIS</b></dt>
<dd><p>The <em>system-missing value</em>, used to represent a datum whose true
value is unknown, such as a survey question that was not answered by
the respondent, or undefined, such as the result of division by zero.
PSPP propagates the system-missing value through calculations and
compensates for missing values in statistical analyses.  See <a href="pspp.html#Missing-Observations">(pspp)Missing Observations</a> section &lsquo;Missing Observations&rsquo; in <cite>PSPP Users Guide</cite>, for a PSPP user&rsquo;s view of
missing values.
</p>
<p>PSPP currently defines <code>SYSMIS</code> as <code>-DBL_MAX</code>, that is, the
greatest finite negative value of <code>double</code>.  It is best not to
depend on this definition, because PSPP may transition to using an
IEEE NaN (not a number) instead at some point in the future.
</p></dd></dl>

<dl>
<dt><a name="index-LOWEST"></a><u>Macro:</u> double <b>LOWEST</b></dt>
<dt><a name="index-HIGHEST"></a><u>Macro:</u> double <b>HIGHEST</b></dt>
<dd><p>The greatest finite negative (except for <code>SYSMIS</code>) and positive
values of <code>double</code>, respectively.  These values do not ordinarily
appear in user data files.  Instead, they are used to implement
endpoints of open-ended ranges that are occasionally permitted in PSPP
syntax, e.g. <code>5 THRU HI</code> as a range of missing values
(see <a href="pspp.html#MISSING-VALUES">(pspp)MISSING VALUES</a> section &lsquo;MISSING VALUES&rsquo; in <cite>PSPP Users Guide</cite>).
</p></dd></dl>

<hr size="6">
<a name="String-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Numeric-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Runtime-Typed-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="String-Values-1"></a>
<h3 class="subsection">1.1.2 String Values</h3>

<p>A value known at compile time to have string type is represented as an
array of <code>char</code>.  String values do not necessarily represent
readable text strings and may contain arbitrary 8-bit data, including
null bytes, control codes, and bytes with the high bit set.  Thus,
string values are not null-terminated strings, but rather opaque
arrays of bytes.
</p>
<p><code>SYSMIS</code>, <code>LOWEST</code>, and <code>HIGHEST</code> have no equivalents
as string values.  Usually, PSPP fills an unknown or undefined string
values with spaces, but PSPP does not treat such a string as a special
case when it processes it later.
</p>
<a name="index-MAX_005fSTRING-2"></a>
<p><code>MAX_STRING</code>, the maximum length of a string value, is defined in
&lsquo;<tt>data/val-type.h</tt>&rsquo;.
</p>
<hr size="6">
<a name="Runtime-Typed-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#String-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Runtime-Typed-Values-1"></a>
<h3 class="subsection">1.1.3 Runtime Typed Values</h3>

<p>When a value&rsquo;s type is only known at runtime, it is often represented
as a @union{value}, defined in &lsquo;<tt>data/value.h</tt>&rsquo;.  A @union{value}
does not identify the type or width of the data it contains.  Code
that works with @union{values}s must therefore have external knowledge
of its content, often through the type and width of a
@struct{variable} (see section <a href="#Variables">Variables</a>).
</p>
<p>@union{value} has one member that clients are permitted to access
directly, a <code>double</code> named &lsquo;<samp>f</samp>&rsquo; that stores the content of a
numeric @union{value}.  It has other members that store the content of
string @union{value}, but client code should use accessor functions
instead of referring to these directly.
</p>
<p>PSPP provides some functions for working with @union{value}s.  The
most useful are described below.  To use these functions, recall that
a numeric value has a width of 0.
</p>
<dl>
<dt><a name="index-value_005finit"></a><u>Function:</u> void <b>value_init</b><i> (union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p>Initializes <var>value</var> as a value of the given <var>width</var>.  After
initialization, the data in <var>value</var> are indeterminate; the caller
is responsible for storing initial data in it.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fdestroy"></a><u>Function:</u> void <b>value_destroy</b><i> (union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p>Frees auxiliary storage associated with <var>value</var>, which must have
the given <var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fneeds_005finit"></a><u>Function:</u> bool <b>value_needs_init</b><i> (int <var>width</var>)</i></dt>
<dd><p>For some widths, @func{value_init} and @func{value_destroy} do not
actually do anything, because no additional storage is needed beyond
the size of @union{value}.  This function returns true if <var>width</var>
is such a width, which case there is no actual need to call those
functions.  This can be a useful optimization if a large number of
@union{value}s of such a width are to be initialized or destroyed.
</p>
<p>This function returns false if @func{value_init} and
@func{value_destroy} are actually required for the given <var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fnum"></a><u>Function:</u> double <b>value_num</b><i> (const union value *<var>value</var>)</i></dt>
<dd><p>Returns the numeric value in <var>value</var>, which must have been
initialized as a numeric value.  Equivalent to <code><var>value</var>-&gt;f</code>.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fstr"></a><u>Function:</u> const char * <b>value_str</b><i> (const union value *<var>value</var>, int <var>width</var>)</i></dt>
<dt><a name="index-value_005fstr_005frw"></a><u>Function:</u> char * <b>value_str_rw</b><i> (union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p>Returns the string value in <var>value</var>, which must have been
initialized with positive width <var>width</var>.  The string returned is
not null-terminated.  Only <var>width</var> bytes of returned data may be
accessed.
</p>
<p>The two different functions exist only for <code>const</code>-correctness.
Otherwise they are identical.
</p>
<p>It is important that <var>width</var> be the correct value that was passed
to @func{value_init}.  Passing a smaller or larger value (e.g.
because that number of bytes will be accessed) will not always work
and should be avoided.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fcopy"></a><u>Function:</u> void <b>value_copy</b><i> (union value *<var>dst</var>,                              const union value *<var>src</var>,                              int <var>width</var>)</i></dt>
<dd><p>Copies the contents of @union{value} <var>src</var> to <var>dst</var>.  Both
<var>dst</var> and <var>src</var> must have been initialized with the specified
<var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fset_005fmissing"></a><u>Function:</u> void <b>value_set_missing</b><i> (union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p>Sets <var>value</var> to <code>SYSMIS</code> if it is numeric or to all spaces if
it is alphanumeric, according to <var>width</var>.  <var>value</var> must have
been initialized with the specified <var>width</var>.
</p></dd></dl>

<p><a name="value_005fis_005fresizable"></a>
</p><dl>
<dt><a name="index-value_005fis_005fresizable"></a><u>Function:</u> bool <b>value_is_resizable</b><i> (const union value *<var>value</var>, int <var>old_width</var>, int <var>new_width</var>)</i></dt>
<dd><p>Determines whether <var>value</var>, which must have been initialized with
the specified <var>old_width</var>, may be resized to <var>new_width</var>.
Resizing is possible if the following criteria are met.  First,
<var>old_width</var> and <var>new_width</var> must be both numeric or both
string widths.  Second, if <var>new_width</var> is a short string width and
less than <var>old_width</var>, resizing is allowed only if bytes
<var>new_width</var> through <var>old_width</var> in <var>value</var> contain only
spaces.
</p>
<p>These rules are part of those used by @func{mv_is_resizable} and
@func{val_labs_can_set_width}.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fresize"></a><u>Function:</u> void <b>value_resize</b><i> (union value *<var>value</var>, int <var>old_width</var>, int <var>new_width</var>)</i></dt>
<dd><p>Resizes <var>value</var> from <var>old_width</var> to <var>new_width</var>, which
must be allowed by the rules stated above.  <var>value</var> must have been
initialized with the specified <var>old_width</var> before calling this
function.  After resizing, <var>value</var> has width <var>new_width</var>.
</p>
<p>If <var>new_width</var> is greater than <var>old_width</var>, <var>value</var> will
be padded on the right with spaces to the new width.  If
<var>new_width</var> is less than <var>old_width</var>, the rightmost bytes of
<var>value</var> are truncated.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fequal"></a><u>Function:</u> bool <b>value_equal</b><i> (const union value *<var>a</var>, const union value *<var>b</var>, int <var>width</var>)</i></dt>
<dd><p>Compares of <var>a</var> and <var>b</var>, which must both have width
<var>width</var>.  Returns true if their contents are the same, false if
they differ.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fcompare_005f3way"></a><u>Function:</u> int <b>value_compare_3way</b><i> (const union value *<var>a</var>, const union value *<var>b</var>, int <var>width</var>)</i></dt>
<dd><p>Compares of <var>a</var> and <var>b</var>, which must both have width
<var>width</var>.  Returns -1 if <var>a</var> is less than <var>b</var>, 0 if they
are equal, or 1 if <var>a</var> is greater than <var>b</var>.
</p>
<p>Numeric values are compared numerically, with <code>SYSMIS</code> comparing
less than any real number.  String values are compared
lexicographically byte-by-byte.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fhash"></a><u>Function:</u> size_t <b>value_hash</b><i> (const union value *<var>value</var>, int <var>width</var>, unsigned int <var>basis</var>)</i></dt>
<dd><p>Computes and returns a hash of <var>value</var>, which must have the
specified <var>width</var>.  The value in <var>basis</var> is folded into the
hash.
</p></dd></dl>

<hr size="6">
<a name="Input-and-Output-Formats"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Runtime-Typed-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Constructing-and-Verifying-Formats" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Input-and-Output-Formats-1"></a>
<h2 class="section">1.2 Input and Output Formats</h2>

<p>Input and output formats specify how to convert data fields to and
from data values (see <a href="pspp.html#Input-and-Output-Formats">(pspp)Input and Output Formats</a> section &lsquo;Input and Output Formats&rsquo; in <cite>PSPP Users Guide</cite>).  PSPP uses @struct{fmt_spec} to represent input and output
formats.
</p>
<p>Function prototypes and other declarations related to formats are in
the &lsquo;<tt>&lt;data/format.h&gt;</tt>&rsquo; header.
</p>
<dl>
<dt><a name="index-struct-fmt_005fspec"></a><u>Structure:</u> <b>struct fmt_spec</b></dt>
<dd><p>An input or output format, with the following members:
</p>
<dl compact="compact">
<dt> <code>enum fmt_type type</code></dt>
<dd><p>The format type (see below).
</p>
</dd>
<dt> <code>int w</code></dt>
<dd><p>Field width, in bytes.  The width of numeric fields is always between
1 and 40 bytes, and the width of string fields is always between 1 and
65534 bytes.  However, many individual types of formats place stricter
limits on field width (see <a href="#fmt_005fmax_005finput_005fwidth">fmt_max_input_width</a>,
<a href="#fmt_005fmax_005foutput_005fwidth">fmt_max_output_width</a>).
</p>
</dd>
<dt> <code>int d</code></dt>
<dd><p>Number of decimal places, in character positions.  For format types
that do not allow decimal places to be specified, this value must be
0.  Format types that do allow decimal places have type-specific and
often width-specific restrictions on <code>d</code> (see
<a href="#fmt_005fmax_005finput_005fdecimals">fmt_max_input_decimals</a>, <a href="#fmt_005fmax_005foutput_005fdecimals">fmt_max_output_decimals</a>).
</p></dd>
</dl>
</dd></dl>

<dl>
<dt><a name="index-enum-fmt_005ftype"></a><u>Enumeration:</u> <b>enum fmt_type</b></dt>
<dd><p>An enumerated type representing an input or output format type.  Each
PSPP input and output format has a corresponding enumeration constant
prefixed by &lsquo;<samp>FMT</samp>&rsquo;: <code>FMT_F</code>, <code>FMT_COMMA</code>,
<code>FMT_DOT</code>, and so on.
</p></dd></dl>

<p>The following sections describe functions for manipulating formats and
the data in fields represented by formats.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Constructing-and-Verifying-Formats">1.2.1 Constructing and Verifying Formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Format-Utility-Functions">1.2.2 Format Utility Functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Obtaining-Properties-of-Format-Types">1.2.3 Obtaining Properties of Format Types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Numeric-Formatting-Styles">1.2.4 Numeric Formatting Styles</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Formatted-Data-Input-and-Output">1.2.5 Formatted Data Input and Output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Constructing-and-Verifying-Formats"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Format-Utility-Functions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Constructing-and-Verifying-Formats-1"></a>
<h3 class="subsection">1.2.1 Constructing and Verifying Formats</h3>

<p>These functions construct @struct{fmt_spec}s and verify that they are
valid.
</p>


<dl>
<dt><a name="index-fmt_005ffor_005finput"></a><u>Function:</u> struct fmt_spec <b>fmt_for_input</b><i> (enum fmt_type <var>type</var>, int <var>w</var>, int <var>d</var>)</i></dt>
<dt><a name="index-fmt_005ffor_005foutput"></a><u>Function:</u> struct fmt_spec <b>fmt_for_output</b><i> (enum fmt_type <var>type</var>, int <var>w</var>, int <var>d</var>)</i></dt>
<dd><p>Constructs a @struct{fmt_spec} with the given <var>type</var>, <var>w</var>, and
<var>d</var>, asserts that the result is a valid input (or output) format,
and returns it.
</p></dd></dl>

<p><a name="fmt_005ffor_005foutput_005ffrom_005finput"></a>
</p><dl>
<dt><a name="index-fmt_005ffor_005foutput_005ffrom_005finput"></a><u>Function:</u> struct fmt_spec <b>fmt_for_output_from_input</b><i> (const struct fmt_spec *<var>input</var>)</i></dt>
<dd><p>Given <var>input</var>, which must be a valid input format, returns the
equivalent output format.  See <a href="pspp.html#Input-and-Output-Formats">(pspp)Input and Output Formats</a> section &lsquo;Input and Output Formats&rsquo; in <cite>PSPP Users Guide</cite>, for the rules for converting input formats into output
formats.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fdefault_005ffor_005fwidth"></a><u>Function:</u> struct fmt_spec <b>fmt_default_for_width</b><i> (int <var>width</var>)</i></dt>
<dd><p>Returns the default output format for a variable of the given
<var>width</var>.  For a numeric variable, this is F8.2 format; for a
string variable, it is the A format of the given <var>width</var>.
</p></dd></dl>

<p>The following functions check whether a @struct{fmt_spec} is valid for
various uses and return true if so, false otherwise.  When any of them
returns false, it also outputs an explanatory error message using
@func{msg}.  To suppress error output, enclose a call to one of these
functions by a @func{msg_disable}/@func{msg_enable} pair.
</p>
<dl>
<dt><a name="index-fmt_005fcheck"></a><u>Function:</u> bool <b>fmt_check</b><i> (const struct fmt_spec *<var>format</var>, bool <var>for_input</var>)</i></dt>
<dt><a name="index-fmt_005fcheck_005finput"></a><u>Function:</u> bool <b>fmt_check_input</b><i> (const struct fmt_spec *<var>format</var>)</i></dt>
<dt><a name="index-fmt_005fcheck_005foutput"></a><u>Function:</u> bool <b>fmt_check_output</b><i> (const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Checks whether <var>format</var> is a valid input format (for
@func{fmt_check_input}, or @func{fmt_check} if <var>for_input</var>) or
output format (for @func{fmt_check_output}, or @func{fmt_check} if not
<var>for_input</var>).
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fcheck_005ftype_005fcompat"></a><u>Function:</u> bool <b>fmt_check_type_compat</b><i> (const struct fmt_spec *<var>format</var>, enum val_type <var>type</var>)</i></dt>
<dd><p>Checks whether <var>format</var> matches the value type <var>type</var>, that
is, if <var>type</var> is <code>VAL_NUMERIC</code> and <var>format</var> is a numeric
format or <var>type</var> is <code>VAL_STRING</code> and <var>format</var> is a string
format.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fcheck_005fwidth_005fcompat"></a><u>Function:</u> bool <b>fmt_check_width_compat</b><i> (const struct fmt_spec *<var>format</var>, int <var>width</var>)</i></dt>
<dd><p>Checks whether <var>format</var> may be used as an output format for a
value of the given <var>width</var>.
</p>
<p>@func{fmt_var_width}, described in
the following section, can be also be used to determine the value
width needed by a format.
</p></dd></dl>

<hr size="6">
<a name="Format-Utility-Functions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Constructing-and-Verifying-Formats" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Obtaining-Properties-of-Format-Types" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Format-Utility-Functions-1"></a>
<h3 class="subsection">1.2.2 Format Utility Functions</h3>

<p>These functions work with @struct{fmt_spec}s.
</p>
<dl>
<dt><a name="index-fmt_005fvar_005fwidth"></a><u>Function:</u> int <b>fmt_var_width</b><i> (const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Returns the width for values associated with <var>format</var>.  If
<var>format</var> is a numeric format, the width is 0; if <var>format</var> is
an A format, then the width <code><var>format</var>-&gt;w</code>; otherwise,
<var>format</var> is an AHEX format and its width is <code><var>format</var>-&gt;w
/ 2</code>.
</p></dd></dl>

<dl>
<dt><a name="index-_002afmt_005fto_005fstring"></a><u>Function:</u> char <b>*fmt_to_string</b><i> (const struct fmt_spec *<var>format</var>, char <var>s</var>[FMT_STRING_LEN_MAX + 1])</i></dt>
<dd><p>Converts <var>format</var> to a human-readable format specifier in <var>s</var>
and returns <var>s</var>.  <var>format</var> need not be a valid input or output
format specifier, e.g. it is allowed to have an excess width or
decimal places.  In particular, if <var>format</var> has decimals, they are
included in the output string, even if <var>format</var>&rsquo;s type does not
allow decimals, to allow accurately presenting incorrect formats to
the user.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fequal"></a><u>Function:</u> bool <b>fmt_equal</b><i> (const struct fmt_spec *<var>a</var>, const struct fmt_spec *<var>b</var>)</i></dt>
<dd><p>Compares <var>a</var> and <var>b</var> memberwise and returns true if they are
identical, false otherwise.  <var>format</var> need not be a valid input or
output format specifier.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fresize"></a><u>Function:</u> void <b>fmt_resize</b><i> (struct fmt_spec *<var>fmt</var>, int <var>width</var>)</i></dt>
<dd><p>Sets the width of <var>fmt</var> to a valid format for a  @union{value} of size <var>width</var>.
</p></dd></dl>

<hr size="6">
<a name="Obtaining-Properties-of-Format-Types"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Format-Utility-Functions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Numeric-Formatting-Styles" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Obtaining-Properties-of-Format-Types-1"></a>
<h3 class="subsection">1.2.3 Obtaining Properties of Format Types</h3>

<p>These functions work with @enum{fmt_type}s instead of the higher-level
@struct{fmt_spec}s.  Their primary purpose is to report properties of
each possible format type, which in turn allows clients to abstract
away many of the details of the very heterogeneous requirements of
each format type.
</p>
<p>The first group of functions works with format type names.
</p>
<dl>
<dt><a name="index-char"></a><u>Function:</u> const <b>char</b><i> *fmt_name (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the name for the given <var>type</var>, e.g. <code>&quot;COMMA&quot;</code> for
<code>FMT_COMMA</code>.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005ffrom_005fname"></a><u>Function:</u> bool <b>fmt_from_name</b><i> (const char *<var>name</var>, enum fmt_type *<var>type</var>)</i></dt>
<dd><p>Tries to find the @enum{fmt_type} associated with <var>name</var>.  If
successful, sets <code>*<var>type</var></code> to the type and returns true;
otherwise, returns false without modifying <code>*<var>type</var></code>.
</p></dd></dl>

<p>The functions below query basic limits on width and decimal places for
each kind of format.
</p>
<dl>
<dt><a name="index-fmt_005ftakes_005fdecimals"></a><u>Function:</u> bool <b>fmt_takes_decimals</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns true if a format of the given <var>type</var> is allowed to have a
nonzero number of decimal places (the <code>d</code> member of
@struct{fmt_spec}), false if not.
</p></dd></dl>

<p><a name="fmt_005fmin_005finput_005fwidth"></a>
<a name="fmt_005fmax_005finput_005fwidth"></a>
<a name="fmt_005fmin_005foutput_005fwidth"></a>
<a name="fmt_005fmax_005foutput_005fwidth"></a>
</p><dl>
<dt><a name="index-fmt_005fmin_005finput_005fwidth"></a><u>Function:</u> int <b>fmt_min_input_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dt><a name="index-fmt_005fmax_005finput_005fwidth"></a><u>Function:</u> int <b>fmt_max_input_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dt><a name="index-fmt_005fmin_005foutput_005fwidth"></a><u>Function:</u> int <b>fmt_min_output_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dt><a name="index-fmt_005fmax_005foutput_005fwidth"></a><u>Function:</u> int <b>fmt_max_output_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the minimum or maximum width (the <code>w</code> member of
@struct{fmt_spec}) allowed for an input or output format of the
specified <var>type</var>.
</p></dd></dl>

<p><a name="fmt_005fmax_005finput_005fdecimals"></a>
<a name="fmt_005fmax_005foutput_005fdecimals"></a>
</p><dl>
<dt><a name="index-fmt_005fmax_005finput_005fdecimals"></a><u>Function:</u> int <b>fmt_max_input_decimals</b><i> (enum fmt_type <var>type</var>, int <var>width</var>)</i></dt>
<dt><a name="index-fmt_005fmax_005foutput_005fdecimals"></a><u>Function:</u> int <b>fmt_max_output_decimals</b><i> (enum fmt_type <var>type</var>, int <var>width</var>)</i></dt>
<dd><p>Returns the maximum number of decimal places allowed for an input or
output format, respectively, of the given <var>type</var> and <var>width</var>.
Returns 0 if the specified <var>type</var> does not allow any decimal
places or if <var>width</var> is too narrow to allow decimal places.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fstep_005fwidth"></a><u>Function:</u> int <b>fmt_step_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the &ldquo;width step&rdquo; for a @struct{fmt_spec} of the given
<var>type</var>.  A @struct{fmt_spec}&rsquo;s width must be a multiple of its
type&rsquo;s width step.  Most format types have a width step of 1, so that
their formats&rsquo; widths may be any integer within the valid range, but
hexadecimal numeric formats and AHEX string formats have a width step
of 2.
</p></dd></dl>

<p>These functions allow clients to broadly determine how each kind of
input or output format behaves.
</p>
<dl>
<dt><a name="index-fmt_005fis_005fstring"></a><u>Function:</u> bool <b>fmt_is_string</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dt><a name="index-fmt_005fis_005fnumeric"></a><u>Function:</u> bool <b>fmt_is_numeric</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns true if <var>type</var> is a format for numeric or string values,
respectively, false otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fcategory"></a><u>Function:</u> enum <b>fmt_category</b><i> fmt_get_category (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the category within which <var>type</var> falls.
</p>
<dl>
<dt><a name="index-enum-fmt_005fcategory"></a><u>Enumeration:</u> <b>enum fmt_category</b></dt>
<dd><p>A group of format types.  Format type categories correspond to the
input and output categories described in the PSPP user documentation
(see <a href="pspp.html#Input-and-Output-Formats">(pspp)Input and Output Formats</a> section &lsquo;Input and Output Formats&rsquo; in <cite>PSPP Users Guide</cite>).
</p>
<p>Each format is in exactly one category.  The categories have bitwise
disjoint values to make it easy to test whether a format type is in
one of multiple categories, e.g.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">if (fmt_get_category (type) &amp; (FMT_CAT_DATE | FMT_CAT_TIME))
  {
    /* &hellip;<span class="roman"><code>type</code> is a date or time format</span>&hellip; */
  }
</pre></td></tr></table>

<p>The format categories are:
</p><dl compact="compact">
<dt> <code>FMT_CAT_BASIC</code></dt>
<dd><p>Basic numeric formats.
</p>
</dd>
<dt> <code>FMT_CAT_CUSTOM</code></dt>
<dd><p>Custom currency formats.
</p>
</dd>
<dt> <code>FMT_CAT_LEGACY</code></dt>
<dd><p>Legacy numeric formats.
</p>
</dd>
<dt> <code>FMT_CAT_BINARY</code></dt>
<dd><p>Binary formats.
</p>
</dd>
<dt> <code>FMT_CAT_HEXADECIMAL</code></dt>
<dd><p>Hexadecimal formats.
</p>
</dd>
<dt> <code>FMT_CAT_DATE</code></dt>
<dd><p>Date formats.
</p>
</dd>
<dt> <code>FMT_CAT_TIME</code></dt>
<dd><p>Time formats.
</p>
</dd>
<dt> <code>FMT_CAT_DATE_COMPONENT</code></dt>
<dd><p>Date component formats.
</p>
</dd>
<dt> <code>FMT_CAT_STRING</code></dt>
<dd><p>String formats.
</p></dd>
</dl>
</dd></dl>
</dd></dl>

<p>The PSPP input and output routines use the following pair of functions
to convert @enum{fmt_type}s to and from the separate set of codes used
in system and portable files:
</p>
<dl>
<dt><a name="index-fmt_005fto_005fio"></a><u>Function:</u> int <b>fmt_to_io</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the format code used in system and portable files that
corresponds to <var>type</var>.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005ffrom_005fio"></a><u>Function:</u> bool <b>fmt_from_io</b><i> (int <var>io</var>, enum fmt_type *<var>type</var>)</i></dt>
<dd><p>Converts <var>io</var>, a format code used in system and portable files,
into a @enum{fmt_type} in <code>*<var>type</var></code>.  Returns true if
successful, false if <var>io</var> is not valid.
</p></dd></dl>

<p>These functions reflect the relationship between input and output
formats.
</p>
<dl>
<dt><a name="index-fmt_005ftype"></a><u>Function:</u> enum <b>fmt_type</b><i> fmt_input_to_output (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the output format type that is used by default by DATA LIST
and other input procedures when <var>type</var> is specified as an input
format.  The conversion from input format to output format is more
complicated than simply changing the format.
See <a href="#fmt_005ffor_005foutput_005ffrom_005finput">fmt_for_output_from_input</a>, for a function that performs the
entire conversion.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fusable_005ffor_005finput"></a><u>Function:</u> bool <b>fmt_usable_for_input</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns true if <var>type</var> may be used as an input format type, false
otherwise.  The custom currency formats, in particular, may be used
for output but not for input.
</p>
<p>All format types are valid for output.
</p></dd></dl>

<p>The final group of format type property functions obtain
human-readable templates that illustrate the formats graphically.
</p>
<dl>
<dt><a name="index-char-1"></a><u>Function:</u> const <b>char</b><i> *fmt_date_template (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns a formatting template for <var>type</var>, which must be a date or
time format type.  These formats are used by @func{data_in} and
@func{data_out} to guide parsing and formatting date and time data.
</p></dd></dl>

<dl>
<dt><a name="index-_002afmt_005fdollar_005ftemplate"></a><u>Function:</u> char <b>*fmt_dollar_template</b><i> (const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Returns a string of the form <code>$#,###.##</code> according to
<var>format</var>, which must be of type <code>FMT_DOLLAR</code>.  The caller
must free the string with <code>free</code>.
</p></dd></dl>

<hr size="6">
<a name="Numeric-Formatting-Styles"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Obtaining-Properties-of-Format-Types" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Formatted-Data-Input-and-Output" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Numeric-Formatting-Styles-1"></a>
<h3 class="subsection">1.2.4 Numeric Formatting Styles</h3>

<p>Each of the basic numeric formats (F, E, COMMA, DOT, DOLLAR, PCT) and
custom currency formats (CCA, CCB, CCC, CCD, CCE) has an associated
numeric formatting style, represented by @struct{fmt_number_style}.
Input and output conversion of formats that have numeric styles is
determined mainly by the style, although the formatting rules have
special cases that are not represented within the style.
</p>
<dl>
<dt><a name="index-struct-fmt_005fnumber_005fstyle"></a><u>Structure:</u> <b>struct fmt_number_style</b></dt>
<dd><p>A structure type with the following members:
</p>
<dl compact="compact">
<dt> <code>struct substring neg_prefix</code></dt>
<dt> <code>struct substring prefix</code></dt>
<dt> <code>struct substring suffix</code></dt>
<dt> <code>struct substring neg_suffix</code></dt>
<dd><p>A set of strings used a prefix to negative numbers, a prefix to every
number, a suffix to every number, and a suffix to negative numbers,
respectively.  Each of these strings is no more than
<code>FMT_STYLE_AFFIX_MAX</code> bytes (currently 16) bytes in length.
These strings must be freed with @func{ss_dealloc} when no longer
needed.
</p>
</dd>
<dt> <code>decimal</code></dt>
<dd><p>The character used as a decimal point.  It must be either &lsquo;<samp>.</samp>&rsquo; or
&lsquo;<samp>,</samp>&rsquo;.
</p>
</dd>
<dt> <code>grouping</code></dt>
<dd><p>The character used for grouping digits to the left of the decimal
point.  It may be &lsquo;<samp>.</samp>&rsquo; or &lsquo;<samp>,</samp>&rsquo;, in which case it must not be
equal to <code>decimal</code>, or it may be set to 0 to disable grouping.
</p></dd>
</dl>
</dd></dl>

<p>The following functions are provided for working with numeric
formatting styles.
</p>
<dl>
<dt><a name="index-fmt_005fnumber_005fstyle_005finit"></a><u>Function:</u> void <b>fmt_number_style_init</b><i> (struct fmt_number_style *<var>style</var>)</i></dt>
<dd><p>Initialises a @struct{fmt_number_style} with all of the
prefixes and suffixes set to the empty string, &lsquo;<samp>.</samp>&rsquo; as the decimal
point character, and grouping disables.
</p></dd></dl>


<dl>
<dt><a name="index-fmt_005fnumber_005fstyle_005fdestroy"></a><u>Function:</u> void <b>fmt_number_style_destroy</b><i> (struct fmt_number_style *<var>style</var>)</i></dt>
<dd><p>Destroys <var>style</var>, freeing its storage.
</p></dd></dl>

<dl>
<dt><a name="index-_002afmt_005fcreate"></a><u>Function:</u> struct fmt_number_style <b>*fmt_create</b><i> (void)</i></dt>
<dd><p>A function which creates an array of all the styles used by pspp, and 
calls fmt_number_style_init on each of them.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fdone"></a><u>Function:</u> void <b>fmt_done</b><i> (struct fmt_number_style *<var>styles</var>)</i></dt>
<dd><p>A wrapper function which takes an array of @struct{fmt_number_style}, calls
fmt_number_style_destroy on each of them, and then frees the array.
</p></dd></dl>



<dl>
<dt><a name="index-fmt_005faffix_005fwidth"></a><u>Function:</u> int <b>fmt_affix_width</b><i> (const struct fmt_number_style *<var>style</var>)</i></dt>
<dd><p>Returns the total length of <var>style</var>&rsquo;s <code>prefix</code> and <code>suffix</code>.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fneg_005faffix_005fwidth"></a><u>Function:</u> int <b>fmt_neg_affix_width</b><i> (const struct fmt_number_style *<var>style</var>)</i></dt>
<dd><p>Returns the total length of <var>style</var>&rsquo;s <code>neg_prefix</code> and
<code>neg_suffix</code>.
</p></dd></dl>

<p>PSPP maintains a global set of number styles for each of the basic
numeric formats and custom currency formats.  The following functions
work with these global styles:
</p>
<dl>
<dt><a name="index-fmt_005fget_005fstyle"></a><u>Function:</u> const struct fmt_number_style * <b>fmt_get_style</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the numeric style for the given format <var>type</var>.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fname"></a><u>Function:</u> const char * <b>fmt_name</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the name of the given format <var>type</var>.
</p></dd></dl>



<hr size="6">
<a name="Formatted-Data-Input-and-Output"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Numeric-Formatting-Styles" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Formatted-Data-Input-and-Output-1"></a>
<h3 class="subsection">1.2.5 Formatted Data Input and Output</h3>

<p>These functions provide the ability to convert data fields into
@union{value}s and vice versa.
</p>
<dl>
<dt><a name="index-data_005fin"></a><u>Function:</u> bool <b>data_in</b><i> (struct substring <var>input</var>, const char *<var>encoding</var>, enum fmt_type <var>type</var>, int <var>implied_decimals</var>, int <var>first_column</var>, const struct dictionary *<var>dict</var>, union value *<var>output</var>, int <var>width</var>)</i></dt>
<dd><p>Parses <var>input</var> as a field containing data in the given format
<var>type</var>.  The resulting value is stored in <var>output</var>, which the
caller must have initialized with the given <var>width</var>.  For
consistency, <var>width</var> must be 0 if
<var>type</var> is a numeric format type and greater than 0 if <var>type</var>
is a string format type.
<var>encoding</var> should be set to indicate the character
encoding of <var>input</var>.
<var>dict</var> must be a pointer to the dictionary with which <var>output</var>
is associated.
</p>
<p>If <var>input</var> is the empty string (with length 0), <var>output</var> is
set to the value set on SET BLANKS (see <a href="pspp.html#SET-BLANKS">(pspp)SET BLANKS</a> section &lsquo;SET BLANKS&rsquo; in <cite>PSPP Users Guide</cite>) for a numeric value, or to all spaces for a string
value.  This applies regardless of the usual parsing requirements for
<var>type</var>.
</p>
<p>If <var>implied_decimals</var> is greater than zero, then the numeric
result is shifted right by <var>implied_decimals</var> decimal places if
<var>input</var> does not contain a decimal point character or an exponent.
Only certain numeric format types support implied decimal places; for
string formats and other numeric formats, <var>implied_decimals</var> has
no effect.  DATA LIST FIXED is the primary user of this feature
(see <a href="pspp.html#DATA-LIST-FIXED">(pspp)DATA LIST FIXED</a> section &lsquo;DATA LIST FIXED&rsquo; in <cite>PSPP Users Guide</cite>).  Other callers
should generally specify 0 for <var>implied_decimals</var>, to disable this
feature.
</p>
<p>When <var>input</var> contains invalid input data, @func{data_in} outputs a
message using @func{msg}.
If <var>first_column</var> is
nonzero, it is included in any such error message as the 1-based
column number of the start of the field.  The last column in the field
is calculated as <em><var>first_column</var> + <var>input</var> - 1</em>.  To
suppress error output, enclose the call to @func{data_in} by calls to
@func{msg_disable} and @func{msg_enable}.
</p>
<p>This function returns true on success, false if a message was output
(even if suppressed).  Overflow and underflow provoke warnings but are
not propagated to the caller as errors.
</p>
<p>This function is declared in &lsquo;<tt>data/data-in.h</tt>&rsquo;.
</p></dd></dl>

<dl>
<dt><a name="index-_002a"></a><u>Function:</u> char <b>*</b><i> data_out (const union value *<var>input</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dt><a name="index-_002a-1"></a><u>Function:</u> char <b>*</b><i> data_out_legacy (const union value *<var>input</var>, const char *<var>encoding</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Converts the data pointed to by <var>input</var> into a string value, which
will be encoded in UTF-8,  according to output format specifier <var>format</var>.
Format 
must be a valid output format.   The width of <var>input</var> is
inferred from <var>format</var> using an algorithm equivalent to
@func{fmt_var_width}.
</p>
<p>When <var>input</var> contains data that cannot be represented in the given
<var>format</var>, @func{data_out} may output a message using @func{msg},
although the current implementation does not
consistently do so.  To suppress error output, enclose the call to
@func{data_out} by calls to @func{msg_disable} and @func{msg_enable}.
</p>
<p>This function is declared in &lsquo;<tt>data/data-out.h</tt>&rsquo;.
</p></dd></dl>

<hr size="6">
<a name="User_002dMissing-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Formatted-Data-Input-and-Output" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Testing-for-Missing-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="User_002dMissing-Values-1"></a>
<h2 class="section">1.3 User-Missing Values</h2>

<p>In addition to the system-missing value for numeric values, each
variable has a set of user-missing values (see <a href="pspp.html#MISSING-VALUES">(pspp)MISSING VALUES</a> section &lsquo;MISSING VALUES&rsquo; in <cite>PSPP Users Guide</cite>).  A set of user-missing values is
represented by @struct{missing_values}.
</p>
<p>It is rarely necessary to interact directly with a
@struct{missing_values} object.  Instead, the most common operation,
querying whether a particular value is a missing value for a given
variable, is most conveniently executed through functions on
@struct{variable}.  See section <a href="#Variable-Missing-Values">Variable Missing Values</a>, for details.
</p>
<p>A @struct{missing_values} is essentially a set of @union{value}s that
have a common value width (see section <a href="#Values">Values</a>).  For a set of
missing values associated with a variable (the common case), the set&rsquo;s
width is the same as the variable&rsquo;s width.
</p>
<p>Function prototypes and other declarations related to missing values
are declared in &lsquo;<tt>data/missing-values.h</tt>&rsquo;.
</p>
<dl>
<dt><a name="index-struct-missing_005fvalues"></a><u>Structure:</u> <b>struct missing_values</b></dt>
<dd><p>Opaque type that represents a set of missing values.
</p></dd></dl>

<p>The contents of a set of missing values is subject to some
restrictions.  Regardless of width, a set of missing values is allowed
to be empty.  A set of numeric missing values may contain up to three
discrete numeric values, or a range of numeric values (which includes
both ends of the range), or a range plus one discrete numeric value.
A set of string missing values may contain up to three discrete string
values (with the same width as the set), but ranges are not supported.
</p>
<p>In addition, values in string missing values wider than
<code>MV_MAX_STRING</code> bytes may contain non-space characters only in
their first <code>MV_MAX_STRING</code> bytes; all the bytes after the first
<code>MV_MAX_STRING</code> must be spaces.  See <a href="#mv_005fis_005facceptable">mv_is_acceptable</a>, for a
function that tests a value against these constraints.
</p>
<dl>
<dt><a name="index-MV_005fMAX_005fSTRING"></a><u>Macro:</u> int <b>MV_MAX_STRING</b></dt>
<dd><p>Number of bytes in a string missing value that are not required to be
spaces.  The current value is 8, a value which is fixed by the system
file format.  In PSPP we could easily eliminate this restriction, but
doing so would also require us to extend the system file format in an
incompatible way, which we consider a bad tradeoff.
</p></dd></dl>

<p>The most often useful functions for missing values are those for
testing whether a given value is missing, described in the following
section.  Several other functions for creating, inspecting, and
modifying @struct{missing_values} objects are described afterward, but
these functions are much more rarely useful.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Testing-for-Missing-Values">1.3.1 Testing for Missing Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Creating-and-Destroying-User_002dMissing-Values">1.3.2 Creation and Destruction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Changing-User_002dMissing-Value-Set-Width">1.3.3 Changing User-Missing Value Set Width</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Inspecting-User_002dMissing-Value-Sets">1.3.4 Inspecting User-Missing Value Sets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">1.3.5 Modifying User-Missing Value Sets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Testing-for-Missing-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Creating-and-Destroying-User_002dMissing-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Testing-for-Missing-Values-1"></a>
<h3 class="subsection">1.3.1 Testing for Missing Values</h3>

<p>The most often useful functions for missing values are those for
testing whether a given value is missing, described here.  However,
using one of the corresponding missing value testing functions for
variables can be even easier (see section <a href="#Variable-Missing-Values">Variable Missing Values</a>).
</p>
<dl>
<dt><a name="index-mv_005fis_005fvalue_005fmissing"></a><u>Function:</u> bool <b>mv_is_value_missing</b><i> (const struct missing_values *<var>mv</var>, const union value *<var>value</var>, enum mv_class <var>class</var>)</i></dt>
<dt><a name="index-mv_005fis_005fnum_005fmissing"></a><u>Function:</u> bool <b>mv_is_num_missing</b><i> (const struct missing_values *<var>mv</var>, double <var>value</var>, enum mv_class <var>class</var>)</i></dt>
<dt><a name="index-mv_005fis_005fstr_005fmissing"></a><u>Function:</u> bool <b>mv_is_str_missing</b><i> (const struct missing_values *<var>mv</var>, const char <var>value</var>[], enum mv_class <var>class</var>)</i></dt>
<dd><p>Tests whether <var>value</var> is in one of the categories of missing
values given by <var>class</var>.  Returns true if so, false otherwise.
</p>
<p><var>mv</var> determines the width of <var>value</var> and provides the set of
user-missing values to test.
</p>
<p>The only difference among these functions in the form in which
<var>value</var> is provided, so you may use whichever function is most
convenient.
</p>
<p>The <var>class</var> argument determines the exact kinds of missing values
that the functions test for:
</p>
<dl>
<dt><a name="index-enum-mv_005fclass"></a><u>Enumeration:</u> <b>enum mv_class</b></dt>
<dd><dl compact="compact">
<dt> <tt>MV_USER</tt></dt>
<dd><p>Returns true if <var>value</var> is in the set of user-missing values given
by <var>mv</var>.
</p>
</dd>
<dt> <tt>MV_SYSTEM</tt></dt>
<dd><p>Returns true if <var>value</var> is system-missing.  (If <var>mv</var>
represents a set of string values, then <var>value</var> is never
system-missing.)
</p>
</dd>
<dt> <tt>MV_ANY</tt></dt>
<dt> <tt>MV_USER | MV_SYSTEM</tt></dt>
<dd><p>Returns true if <var>value</var> is user-missing or system-missing.
</p>
</dd>
<dt> <tt>MV_NONE</tt></dt>
<dd><p>Always returns false, that is, <var>value</var> is never considered
missing.
</p></dd>
</dl>
</dd></dl>
</dd></dl>

<hr size="6">
<a name="Creating-and-Destroying-User_002dMissing-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Testing-for-Missing-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Changing-User_002dMissing-Value-Set-Width" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Creation-and-Destruction-1"></a>
<h3 class="subsection">1.3.2 Creation and Destruction</h3>

<p>These functions create and destroy @struct{missing_values} objects.
</p>
<dl>
<dt><a name="index-mv_005finit"></a><u>Function:</u> void <b>mv_init</b><i> (struct missing_values *<var>mv</var>, int <var>width</var>)</i></dt>
<dd><p>Initializes <var>mv</var> as a set of user-missing values.  The set is
initially empty.  Any values added to it must have the specified
<var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fdestroy"></a><u>Function:</u> void <b>mv_destroy</b><i> (struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Destroys <var>mv</var>, which must not be referred to again.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fcopy"></a><u>Function:</u> void <b>mv_copy</b><i> (struct missing_values *<var>mv</var>, const struct missing_values *<var>old</var>)</i></dt>
<dd><p>Initializes <var>mv</var> as a copy of the existing set of user-missing
values <var>old</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fclear"></a><u>Function:</u> void <b>mv_clear</b><i> (struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Empties the user-missing value set <var>mv</var>, retaining its existing
width.
</p></dd></dl>

<hr size="6">
<a name="Changing-User_002dMissing-Value-Set-Width"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Creating-and-Destroying-User_002dMissing-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Inspecting-User_002dMissing-Value-Sets" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Changing-User_002dMissing-Value-Set-Width-1"></a>
<h3 class="subsection">1.3.3 Changing User-Missing Value Set Width</h3>

<p>A few PSPP language constructs copy sets of user-missing values from
one variable to another.  When the source and target variables have
the same width, this is simple.  But when the target variable&rsquo;s width
might be different from the source variable&rsquo;s, it takes a little more
work.  The functions described here can help.
</p>
<p>In fact, it is usually unnecessary to call these functions directly.
Most of the time @func{var_set_missing_values}, which uses
@func{mv_resize} internally to resize the new set of missing values to
the required width, may be used instead.
See <a href="#var_005fset_005fmissing_005fvalues">var_set_missing_values</a>, for more information.
</p>
<dl>
<dt><a name="index-mv_005fis_005fresizable"></a><u>Function:</u> bool <b>mv_is_resizable</b><i> (const struct missing_values *<var>mv</var>, int <var>new_width</var>)</i></dt>
<dd><p>Tests whether <var>mv</var>&rsquo;s width may be changed to <var>new_width</var> using
@func{mv_resize}.  Returns true if it is allowed, false otherwise.
</p>
<p>If <var>mv</var> contains any missing values, then it may be resized only
if each missing value may be resized, as determined by
@func{value_is_resizable} (see <a href="#value_005fis_005fresizable">value_is_resizable</a>).
</p></dd></dl>

<p><a name="mv_005fresize"></a>
</p><dl>
<dt><a name="index-mv_005fresize"></a><u>Function:</u> void <b>mv_resize</b><i> (struct missing_values *<var>mv</var>, int <var>width</var>)</i></dt>
<dd><p>Changes <var>mv</var>&rsquo;s width to <var>width</var>.  <var>mv</var> and <var>width</var>
must satisfy the constraints explained above.
</p>
<p>When a string missing value set&rsquo;s width is increased, each
user-missing value is padded on the right with spaces to the new
width.
</p></dd></dl>

<hr size="6">
<a name="Inspecting-User_002dMissing-Value-Sets"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Changing-User_002dMissing-Value-Set-Width" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Modifying-User_002dMissing-Value-Sets" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Inspecting-User_002dMissing-Value-Sets-1"></a>
<h3 class="subsection">1.3.4 Inspecting User-Missing Value Sets</h3>

<p>These functions inspect the properties and contents of
@struct{missing_values} objects.
</p>
<p>The first set of functions inspects the discrete values that sets of
user-missing values may contain:
</p>
<dl>
<dt><a name="index-mv_005fis_005fempty"></a><u>Function:</u> bool <b>mv_is_empty</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns true if <var>mv</var> contains no user-missing values, false if it
contains at least one user-missing value (either a discrete value or a
numeric range).
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fget_005fwidth"></a><u>Function:</u> int <b>mv_get_width</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns the width of the user-missing values that <var>mv</var> represents.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fn_005fvalues"></a><u>Function:</u> int <b>mv_n_values</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns the number of discrete user-missing values included in
<var>mv</var>.  The return value will be between 0 and 3.  For sets of
numeric user-missing values that include a range, the return value
will be 0 or 1.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fhas_005fvalue"></a><u>Function:</u> bool <b>mv_has_value</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns true if <var>mv</var> has at least one discrete user-missing
values, that is, if @func{mv_n_values} would return nonzero for
<var>mv</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fget_005fvalue"></a><u>Function:</u> const union value * <b>mv_get_value</b><i> (const struct missing_values *<var>mv</var>, int <var>index</var>)</i></dt>
<dd><p>Returns the discrete user-missing value in <var>mv</var> with the given
<var>index</var>.  The caller must not modify or free the returned value or
refer to it after modifying or freeing <var>mv</var>.  The index must be
less than the number of discrete user-missing values in <var>mv</var>, as
reported by @func{mv_n_values}.
</p></dd></dl>

<p>The second set of functions inspects the single range of values that
numeric sets of user-missing values may contain:
</p>
<dl>
<dt><a name="index-mv_005fhas_005frange"></a><u>Function:</u> bool <b>mv_has_range</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns true if <var>mv</var> includes a range, false otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fget_005frange"></a><u>Function:</u> void <b>mv_get_range</b><i> (const struct missing_values *<var>mv</var>, double *<var>low</var>, double *<var>high</var>)</i></dt>
<dd><p>Stores the low endpoint of <var>mv</var>&rsquo;s range in <code>*<var>low</var></code> and
the high endpoint of the range in <code>*<var>high</var></code>.  <var>mv</var> must
include a range.
</p></dd></dl>

<hr size="6">
<a name="Modifying-User_002dMissing-Value-Sets"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Inspecting-User_002dMissing-Value-Sets" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Modifying-User_002dMissing-Value-Sets-1"></a>
<h3 class="subsection">1.3.5 Modifying User-Missing Value Sets</h3>

<p>These functions modify the contents of @struct{missing_values}
objects.
</p>
<p>The next set of functions applies to all sets of user-missing values:
</p>
<dl>
<dt><a name="index-mv_005fadd_005fvalue"></a><u>Function:</u> bool <b>mv_add_value</b><i> (struct missing_values *<var>mv</var>, const union value *<var>value</var>)</i></dt>
<dt><a name="index-mv_005fadd_005fstr"></a><u>Function:</u> bool <b>mv_add_str</b><i> (struct missing_values *<var>mv</var>, const char <var>value</var>[])</i></dt>
<dt><a name="index-mv_005fadd_005fnum"></a><u>Function:</u> bool <b>mv_add_num</b><i> (struct missing_values *<var>mv</var>, double <var>value</var>)</i></dt>
<dd><p>Attempts to add the given discrete <var>value</var> to set of user-missing
values <var>mv</var>.  <var>value</var> must have the same width as <var>mv</var>.
Returns true if <var>value</var> was successfully added, false if the set
could not accept any more discrete values or if <var>value</var> is not an
acceptable user-missing value (see @func{mv_is_acceptable} below).
</p>
<p>These functions are equivalent, except for the form in which
<var>value</var> is provided, so you may use whichever function is most
convenient.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fpop_005fvalue"></a><u>Function:</u> void <b>mv_pop_value</b><i> (struct missing_values *<var>mv</var>, union value *<var>value</var>)</i></dt>
<dd><p>Removes a discrete value from <var>mv</var> (which must contain at least
one discrete value) and stores it in <var>value</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005freplace_005fvalue"></a><u>Function:</u> bool <b>mv_replace_value</b><i> (struct missing_values *<var>mv</var>, const union value *<var>value</var>, int <var>index</var>)</i></dt>
<dd><p>Attempts to replace the discrete value with the given <var>index</var> in
<var>mv</var> (which must contain at least <var>index</var> + 1 discrete values)
by <var>value</var>.  Returns true if successful, false if <var>value</var> is
not an acceptable user-missing value (see @func{mv_is_acceptable}
below).
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fis_005facceptable"></a><u>Function:</u> bool <b>mv_is_acceptable</b><i> (const union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p><a name="mv_005fis_005facceptable"></a>
Returns true if <var>value</var>, which must have the specified
<var>width</var>, may be added to a missing value set of the same
<var>width</var>, false if it cannot.  As described above, all numeric
values and string values of width <code>MV_MAX_STRING</code> or less may be
added, but string value of greater width may be added only if bytes
beyond the first <code>MV_MAX_STRING</code> are all spaces.
</p></dd></dl>

<p>The second set of functions applies only to numeric sets of
user-missing values:
</p>
<dl>
<dt><a name="index-mv_005fadd_005frange"></a><u>Function:</u> bool <b>mv_add_range</b><i> (struct missing_values *<var>mv</var>, double <var>low</var>, double <var>high</var>)</i></dt>
<dd><p>Attempts to add a numeric range covering <var>low</var>&hellip;<var>high</var>
(inclusive on both ends) to <var>mv</var>, which must be a numeric set of
user-missing values.  Returns true if the range is successful added,
false on failure.  Fails if <var>mv</var> already contains a range, or if
<var>mv</var> contains more than one discrete value, or if <var>low</var> &gt;
<var>high</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fpop_005frange"></a><u>Function:</u> void <b>mv_pop_range</b><i> (struct missing_values *<var>mv</var>, double *<var>low</var>, double *<var>high</var>)</i></dt>
<dd><p>Given <var>mv</var>, which must be a numeric set of user-missing values
that contains a range, removes that range from <var>mv</var> and stores its
low endpoint in <code>*<var>low</var></code> and its high endpoint in
<code>*<var>high</var></code>.
</p></dd></dl>

<hr size="6">
<a name="Value-Labels"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Modifying-User_002dMissing-Value-Sets" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Creation-and-Destruction" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Value-Labels-1"></a>
<h2 class="section">1.4 Value Labels</h2>

<p>Each variable has a set of value labels (see <a href="pspp.html#VALUE-LABELS">(pspp)VALUE LABELS</a> section &lsquo;VALUE LABELS&rsquo; in <cite>PSPP Users Guide</cite>), represented as @struct{val_labs}.  A
@struct{val_labs} is essentially a map from @union{value}s to strings.
All of the values in a set of value labels have the same width, which
for a set of value labels owned by a variable (the common case) is the
same as its variable.
</p>
<p>Sets of value labels may contain any number of entries.
</p>
<p>It is rarely necessary to interact directly with a @struct{val_labs}
object.  Instead, the most common operation, looking up the label for
a value of a given variable, can be conveniently executed through
functions on @struct{variable}.  See section <a href="#Variable-Value-Labels">Variable Value Labels</a>, for
details.
</p>
<p>Function prototypes and other declarations related to missing values
are declared in &lsquo;<tt>data/value-labels.h</tt>&rsquo;.
</p>
<dl>
<dt><a name="index-struct-val_005flabs"></a><u>Structure:</u> <b>struct val_labs</b></dt>
<dd><p>Opaque type that represents a set of value labels.
</p></dd></dl>

<p>The most often useful function for value labels is
@func{val_labs_find}, for looking up the label associated with a
value.
</p>
<dl>
<dt><a name="index-val_005flabs_005ffind"></a><u>Function:</u> char * <b>val_labs_find</b><i> (const struct val_labs *<var>val_labs</var>, union value <var>value</var>)</i></dt>
<dd><p>Looks in <var>val_labs</var> for a label for the given <var>value</var>.
Returns the label, if one is found, or a null pointer otherwise.
</p></dd></dl>

<p>Several other functions for working with value labels are described in
the following section, but these are more rarely useful.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Value-Labels-Creation-and-Destruction">1.4.1 Creation and Destruction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels-Properties">1.4.2 Value Labels Properties</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels-Adding-and-Removing-Labels">1.4.3 Adding and Removing Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels-Iteration">1.4.4 Iterating through Value Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Value-Labels-Creation-and-Destruction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Properties" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Creation-and-Destruction"></a>
<h3 class="subsection">1.4.1 Creation and Destruction</h3>

<p>These functions create and destroy @struct{val_labs} objects.
</p>
<dl>
<dt><a name="index-val_005flabs_005fcreate"></a><u>Function:</u> struct val_labs * <b>val_labs_create</b><i> (int <var>width</var>)</i></dt>
<dd><p>Creates and returns an initially empty set of value labels with the
given <var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fclone"></a><u>Function:</u> struct val_labs * <b>val_labs_clone</b><i> (const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Creates and returns a set of value labels whose width and contents are
the same as those of <var>var_labs</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fclear"></a><u>Function:</u> void <b>val_labs_clear</b><i> (struct val_labs *<var>var_labs</var>)</i></dt>
<dd><p>Deletes all value labels from <var>var_labs</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fdestroy"></a><u>Function:</u> void <b>val_labs_destroy</b><i> (struct val_labs *<var>var_labs</var>)</i></dt>
<dd><p>Destroys <var>var_labs</var>, which must not be referenced again.
</p></dd></dl>

<hr size="6">
<a name="Value-Labels-Properties"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Creation-and-Destruction" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Adding-and-Removing-Labels" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Value-Labels-Properties-1"></a>
<h3 class="subsection">1.4.2 Value Labels Properties</h3>

<p>These functions inspect and manipulate basic properties of
@struct{val_labs} objects.
</p>
<dl>
<dt><a name="index-val_005flabs_005fcount"></a><u>Function:</u> size_t <b>val_labs_count</b><i> (const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Returns the number of value labels in <var>val_labs</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fcan_005fset_005fwidth"></a><u>Function:</u> bool <b>val_labs_can_set_width</b><i> (const struct val_labs *<var>val_labs</var>, int <var>new_width</var>)</i></dt>
<dd><p>Tests whether <var>val_labs</var>&rsquo;s width may be changed to <var>new_width</var>
using @func{val_labs_set_width}.  Returns true if it is allowed, false
otherwise.
</p>
<p>A set of value labels may be resized to a given width only if each
value in it may be resized to that width, as determined by
@func{value_is_resizable} (see <a href="#value_005fis_005fresizable">value_is_resizable</a>).
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fset_005fwidth"></a><u>Function:</u> void <b>val_labs_set_width</b><i> (struct val_labs *<var>val_labs</var>, int <var>new_width</var>)</i></dt>
<dd><p>Changes the width of <var>val_labs</var>&rsquo;s values to <var>new_width</var>, which
must be a valid new width as determined by
@func{val_labs_can_set_width}.
</p></dd></dl>

<hr size="6">
<a name="Value-Labels-Adding-and-Removing-Labels"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Properties" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Iteration" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Adding-and-Removing-Labels"></a>
<h3 class="subsection">1.4.3 Adding and Removing Labels</h3>

<p>These functions add and remove value labels from a @struct{val_labs}
object.
</p>
<dl>
<dt><a name="index-val_005flabs_005fadd"></a><u>Function:</u> bool <b>val_labs_add</b><i> (struct val_labs *<var>val_labs</var>, union value <var>value</var>, const char *<var>label</var>)</i></dt>
<dd><p>Adds <var>label</var> to in <var>var_labs</var> as a label for <var>value</var>,
which must have the same width as the set of value labels.  Returns
true if successful, false if <var>value</var> already has a label.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005freplace"></a><u>Function:</u> void <b>val_labs_replace</b><i> (struct val_labs *<var>val_labs</var>, union value <var>value</var>, const char *<var>label</var>)</i></dt>
<dd><p>Adds <var>label</var> to in <var>var_labs</var> as a label for <var>value</var>,
which must have the same width as the set of value labels.  If
<var>value</var> already has a label in <var>var_labs</var>, it is replaced.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fremove"></a><u>Function:</u> bool <b>val_labs_remove</b><i> (struct val_labs *<var>val_labs</var>, union value <var>value</var>)</i></dt>
<dd><p>Removes from <var>val_labs</var> any label for <var>value</var>, which must have
the same width as the set of value labels.  Returns true if a label
was removed, false otherwise.
</p></dd></dl>

<hr size="6">
<a name="Value-Labels-Iteration"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Adding-and-Removing-Labels" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Iterating-through-Value-Labels"></a>
<h3 class="subsection">1.4.4 Iterating through Value Labels</h3>

<p>These functions allow iteration through the set of value labels
represented by a @struct{val_labs} object.  They may be used in the
context of a <code>for</code> loop:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">struct val_labs val_labs;
const struct val_lab *vl;

&hellip;

for (vl = val_labs_first (val_labs); vl != NULL;
     vl = val_labs_next (val_labs, vl))
  {
    &hellip;<span class="roman">do something with <code>vl</code></span>&hellip;
  }
</pre></td></tr></table>

<p>Value labels should not be added or deleted from a @struct{val_labs}
as it is undergoing iteration.
</p>
<dl>
<dt><a name="index-val_005flabs_005ffirst"></a><u>Function:</u> const struct val_lab * <b>val_labs_first</b><i> (const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Returns the first value label in <var>var_labs</var>, if it contains at
least one value label, or a null pointer if it does not contain any
value labels.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fnext"></a><u>Function:</u> const struct val_lab * <b>val_labs_next</b><i> (const struct val_labs *<var>val_labs</var>, const struct val_labs_iterator **<var>vl</var>)</i></dt>
<dd><p>Returns the value label in <var>var_labs</var> following <var>vl</var>, if
<var>vl</var> is not the last value label in <var>val_labs</var>, or a null
pointer if there are no value labels following <var>vl</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fsorted"></a><u>Function:</u> const struct val_lab ** <b>val_labs_sorted</b><i> (const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Allocates and returns an array of pointers to value labels, which are
sorted in increasing order by value.  The array has
<code>val_labs_count (<var>val_labs</var>)</code> elements.  The caller is
responsible for freeing the array with @func{free} (but must not free
any of the @struct{val_lab} elements that the array points to).
</p></dd></dl>

<p>The iteration functions above work with pointers to @struct{val_lab}
which is an opaque data structure that users of @struct{val_labs} must
not modify or free directly.  The following functions work with
objects of this type:
</p>
<dl>
<dt><a name="index-val_005flab_005fget_005fvalue"></a><u>Function:</u> const union value * <b>val_lab_get_value</b><i> (const struct val_lab *<var>vl</var>)</i></dt>
<dd><p>Returns the value of value label <var>vl</var>.  The caller must not modify
or free the returned value.  (To achieve a similar result, remove the
value label with @func{val_labs_remove}, then add the new value with
@func{val_labs_add}.)
</p>
<p>The width of the returned value cannot be determined directly from
<var>vl</var>.  It may be obtained by calling @func{val_labs_get_width} on
the @struct{val_labs} that <var>vl</var> is in.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flab_005fget_005flabel"></a><u>Function:</u> const char * <b>val_lab_get_label</b><i> (const struct val_lab *<var>vl</var>)</i></dt>
<dd><p>Returns the label in <var>vl</var> as a null-terminated string.  The caller
must not modify or free the returned string.  (Use
@func{val_labs_replace} to change a value label.)
</p></dd></dl>

<hr size="6">
<a name="Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Iteration" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Name" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variables-1"></a>
<h2 class="section">1.5 Variables</h2>

<p>A PSPP variable is represented by @struct{variable}, an opaque type
declared in &lsquo;<tt>data/variable.h</tt>&rsquo; along with related declarations.
See <a href="pspp.html#Variables">(pspp)Variables</a> section &lsquo;Variables&rsquo; in <cite>PSPP Users Guide</cite>, for a description of PSPP
variables from a user perspective.
</p>
<p>PSPP is unusual among computer languages in that, by itself, a PSPP
variable does not have a value.  Instead, a variable in PSPP takes on
a value only in the context of a case, which supplies one value for
each variable in a set of variables (see section <a href="#Cases">Cases</a>).  The set of
variables in a case, in turn, are ordinarily part of a dictionary
(see section <a href="#Dictionaries">Dictionaries</a>).
</p>
<p>Every variable has several attributes, most of which correspond
directly to one of the variable attributes visible to PSPP users
(see <a href="pspp.html#Attributes">(pspp)Attributes</a> section &lsquo;Attributes&rsquo; in <cite>PSPP Users Guide</cite>).
</p>
<p>The following sections describe variable-related functions and macros.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Variable-Name">1.5.1 Variable Name</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Type-and-Width">1.5.2 Variable Type and Width</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Missing-Values">1.5.3 Variable Missing Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Value-Labels">1.5.4 Variable Value Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Print-and-Write-Formats">1.5.5 Variable Print and Write Formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Labels">1.5.6 Variable Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-GUI-Attributes">1.5.7 GUI Attributes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Leave-Status">1.5.8 Variable Leave Status</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Class">1.5.9 Dictionary Class</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Creation-and-Destruction">1.5.10 Variable Creation and Destruction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Short-Names">1.5.11 Variable Short Names</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Relationships">1.5.12 Variable Relationships</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Auxiliary-Data">1.5.13 Variable Auxiliary Data</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Categorical-Values">1.5.14 Variable Categorical Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Variable-Name"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Type-and-Width" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Name-1"></a>
<h3 class="subsection">1.5.1 Variable Name</h3>

<p>A variable name is a string between 1 and <code>ID_MAX_LEN</code> bytes
long that satisfies the rules for PSPP identifiers
(see <a href="pspp.html#Tokens">(pspp)Tokens</a> section &lsquo;Tokens&rsquo; in <cite>PSPP Users Guide</cite>).  Variable names are
mixed-case and treated case-insensitively.
</p>
<dl>
<dt><a name="index-ID_005fMAX_005fLEN"></a><u>Macro:</u> int <b>ID_MAX_LEN</b></dt>
<dd><p>Maximum length of a variable name, in bytes, currently 64.
</p></dd></dl>

<p>Only one commonly useful function relates to variable names:
</p>
<dl>
<dt><a name="index-var_005fget_005fname"></a><u>Function:</u> const char * <b>var_get_name</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s variable name as a C string.
</p></dd></dl>

<p>A few other functions are much more rarely used.  Some of these
functions are used internally by the dictionary implementation:
</p>
<p><a name="var_005fset_005fname"></a>
</p><dl>
<dt><a name="index-var_005fset_005fname"></a><u>Function:</u> void <b>var_set_name</b><i> (struct variable *<var>var</var>, const char *<var>new_name</var>)</i></dt>
<dd><p>Changes the name of <var>var</var> to <var>new_name</var>, which must be a
&ldquo;plausible&rdquo; name as defined below.
</p>
<p>This function cannot be applied to a variable that is part of a
dictionary.  Use @func{dict_rename_var} instead (see section <a href="#Dictionary-Renaming-Variables">Renaming Variables</a>).
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fdict_005fclass"></a><u>Function:</u> enum dict_class <b>var_get_dict_class</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the dictionary class of <var>var</var>&rsquo;s name (see section <a href="#Dictionary-Class">Dictionary Class</a>).
</p></dd></dl>

<hr size="6">
<a name="Variable-Type-and-Width"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Name" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Missing-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Type-and-Width-1"></a>
<h3 class="subsection">1.5.2 Variable Type and Width</h3>

<p>A variable&rsquo;s type and width are the type and width of its values
(see section <a href="#Values">Values</a>).
</p>
<dl>
<dt><a name="index-var_005fget_005ftype"></a><u>Function:</u> enum val_type <b>var_get_type</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the type of variable <var>var</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fwidth"></a><u>Function:</u> int <b>var_get_width</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the width of variable <var>var</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fwidth"></a><u>Function:</u> void <b>var_set_width</b><i> (struct variable *<var>var</var>, int <var>width</var>)</i></dt>
<dd><p>Sets the width of variable <var>var</var> to <var>width</var>.  The width of a
variable should not normally be changed after the variable is created,
so this function is rarely used.  This function cannot be applied to a
variable that is part of a dictionary.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fis_005fnumeric"></a><u>Function:</u> bool <b>var_is_numeric</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> is a numeric variable, false otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fis_005falpha"></a><u>Function:</u> bool <b>var_is_alpha</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> is an alphanumeric (string) variable, false
otherwise.
</p></dd></dl>

<hr size="6">
<a name="Variable-Missing-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Type-and-Width" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Value-Labels" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Missing-Values-1"></a>
<h3 class="subsection">1.5.3 Variable Missing Values</h3>

<p>A numeric or short string variable may have a set of user-missing
values (see <a href="pspp.html#MISSING-VALUES">(pspp)MISSING VALUES</a> section &lsquo;MISSING VALUES&rsquo; in <cite>PSPP Users Guide</cite>), represented
as a @struct{missing_values} (see section <a href="#User_002dMissing-Values">User-Missing Values</a>).
</p>
<p>The most frequent operation on a variable&rsquo;s missing values is to query
whether a value is user- or system-missing:
</p>
<dl>
<dt><a name="index-var_005fis_005fvalue_005fmissing"></a><u>Function:</u> bool <b>var_is_value_missing</b><i> (const struct variable *<var>var</var>, const union value *<var>value</var>, enum mv_class <var>class</var>)</i></dt>
<dt><a name="index-var_005fis_005fnum_005fmissing"></a><u>Function:</u> bool <b>var_is_num_missing</b><i> (const struct variable *<var>var</var>, double <var>value</var>, enum mv_class <var>class</var>)</i></dt>
<dt><a name="index-var_005fis_005fstr_005fmissing"></a><u>Function:</u> bool <b>var_is_str_missing</b><i> (const struct variable *<var>var</var>, const char <var>value</var>[], enum mv_class <var>class</var>)</i></dt>
<dd><p>Tests whether <var>value</var> is a missing value of the given <var>class</var>
for variable <var>var</var> and returns true if so, false otherwise.
@func{var_is_num_missing} may only be applied to numeric variables;
@func{var_is_str_missing} may only be applied to string variables.
<var>value</var> must have been initialized with the same width as
<var>var</var>.
</p>
<p><code>var_is_<var>type</var>_missing (<var>var</var>, <var>value</var>, <var>class</var>)</code>
is equivalent to <code>mv_is_<var>type</var>_missing
(var_get_missing_values (<var>var</var>), <var>value</var>, <var>class</var>)</code>.
</p></dd></dl>

<p>In addition, a few functions are provided to work more directly with a
variable&rsquo;s @struct{missing_values}:
</p>
<dl>
<dt><a name="index-var_005fget_005fmissing_005fvalues"></a><u>Function:</u> const struct missing_values * <b>var_get_missing_values</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the @struct{missing_values} associated with <var>var</var>.  The
caller must not modify the returned structure.  The return value is
always non-null.
</p></dd></dl>

<p><a name="var_005fset_005fmissing_005fvalues"></a>
</p><dl>
<dt><a name="index-var_005fset_005fmissing_005fvalues"></a><u>Function:</u> void <b>var_set_missing_values</b><i> (struct variable *<var>var</var>, const struct missing_values *<var>miss</var>)</i></dt>
<dd><p>Changes <var>var</var>&rsquo;s missing values to a copy of <var>miss</var>, or if
<var>miss</var> is a null pointer, clears <var>var</var>&rsquo;s missing values.  If
<var>miss</var> is non-null, it must have the same width as <var>var</var> or be
resizable to <var>var</var>&rsquo;s width (see <a href="#mv_005fresize">mv_resize</a>).  The caller
retains ownership of <var>miss</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fclear_005fmissing_005fvalues"></a><u>Function:</u> void <b>var_clear_missing_values</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Clears <var>var</var>&rsquo;s missing values.  Equivalent to
<code>var_set_missing_values (<var>var</var>, NULL)</code>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fhas_005fmissing_005fvalues"></a><u>Function:</u> bool <b>var_has_missing_values</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> has any missing values, false if it has
none.  Equivalent to <code>mv_is_empty (var_get_missing_values (<var>var</var>))</code>.
</p></dd></dl>

<hr size="6">
<a name="Variable-Value-Labels"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Missing-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Print-and-Write-Formats" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Value-Labels-1"></a>
<h3 class="subsection">1.5.4 Variable Value Labels</h3>

<p>A numeric or short string variable may have a set of value labels
(see <a href="pspp.html#VALUE-LABELS">(pspp)VALUE LABELS</a> section &lsquo;VALUE LABELS&rsquo; in <cite>PSPP Users Guide</cite>), represented as a
@struct{val_labs} (see section <a href="#Value-Labels">Value Labels</a>).  The most commonly useful
functions for value labels return the value label associated with a
value:
</p>
<dl>
<dt><a name="index-var_005flookup_005fvalue_005flabel"></a><u>Function:</u> const char * <b>var_lookup_value_label</b><i> (const struct variable *<var>var</var>, const union value *<var>value</var>)</i></dt>
<dd><p>Looks for a label for <var>value</var> in <var>var</var>&rsquo;s set of value labels.
<var>value</var> must have the same width as <var>var</var>.  Returns the label
if one exists, otherwise a null pointer.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fappend_005fvalue_005fname"></a><u>Function:</u> void <b>var_append_value_name</b><i> (const struct variable *<var>var</var>, const union value *<var>value</var>, struct string *<var>str</var>)</i></dt>
<dd><p>Looks for a label for <var>value</var> in <var>var</var>&rsquo;s set of value labels.
<var>value</var> must have the same width as <var>var</var>.
If a label exists, it will be appended to the string pointed to by <var>str</var>.
Otherwise, it formats <var>value</var>
using <var>var</var>&rsquo;s print format (see section <a href="#Input-and-Output-Formats">Input and Output Formats</a>) 
and appends the formatted string.
</p></dd></dl>

<p>The underlying @struct{val_labs} structure may also be accessed
directly using the functions described below.
</p>
<dl>
<dt><a name="index-var_005fhas_005fvalue_005flabels"></a><u>Function:</u> bool <b>var_has_value_labels</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> has at least one value label, false
otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fvalue_005flabels"></a><u>Function:</u> const struct val_labs * <b>var_get_value_labels</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the @struct{val_labs} associated with <var>var</var>.  If <var>var</var>
has no value labels, then the return value may or may not be a null
pointer.
</p>
<p>The variable retains ownership of the returned @struct{val_labs},
which the caller must not attempt to modify.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fvalue_005flabels"></a><u>Function:</u> void <b>var_set_value_labels</b><i> (struct variable *<var>var</var>, const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Replaces <var>var</var>&rsquo;s value labels by a copy of <var>val_labs</var>.  The
caller retains ownership of <var>val_labs</var>.  If <var>val_labs</var> is a
null pointer, then <var>var</var>&rsquo;s value labels, if any, are deleted.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fclear_005fvalue_005flabels"></a><u>Function:</u> void <b>var_clear_value_labels</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Deletes <var>var</var>&rsquo;s value labels.  Equivalent to
<code>var_set_value_labels (<var>var</var>, NULL)</code>.
</p></dd></dl>

<p>A final group of functions offers shorthands for operations that would
otherwise require getting the value labels from a variable, copying
them, modifying them, and then setting the modified value labels into
the variable (making a second copy):
</p>
<dl>
<dt><a name="index-var_005fadd_005fvalue_005flabel"></a><u>Function:</u> bool <b>var_add_value_label</b><i> (struct variable *<var>var</var>, const union value *<var>value</var>, const char *<var>label</var>)</i></dt>
<dd><p>Attempts to add a copy of <var>label</var> as a label for <var>value</var> for
the given <var>var</var>.  <var>value</var> must have the same width as
<var>var</var>.  If <var>value</var> already has a label, then the old label is
retained.  Returns true if a label is added, false if there was an
existing label for <var>value</var>.  Either way, the caller retains
ownership of <var>value</var> and <var>label</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005freplace_005fvalue_005flabel"></a><u>Function:</u> void <b>var_replace_value_label</b><i> (struct variable *<var>var</var>, const union value *<var>value</var>, const char *<var>label</var>)</i></dt>
<dd><p>Attempts to add a copy of <var>label</var> as a label for <var>value</var> for
the given <var>var</var>.  <var>value</var> must have the same width as
<var>var</var>.  If <var>value</var> already has a label, then
<var>label</var> replaces the old label.  Either way, the caller retains
ownership of <var>value</var> and <var>label</var>.
</p></dd></dl>

<hr size="6">
<a name="Variable-Print-and-Write-Formats"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Value-Labels" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Labels" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Print-and-Write-Formats-1"></a>
<h3 class="subsection">1.5.5 Variable Print and Write Formats</h3>

<p>Each variable has an associated pair of output formats, called its
<em>print format</em> and <em>write format</em>.  See <a href="pspp.html#Input-and-Output-Formats">(pspp)Input and Output Formats</a> section &lsquo;Input and Output Formats&rsquo; in <cite>PSPP Users Guide</cite>, for an introduction to formats.
See section <a href="#Input-and-Output-Formats">Input and Output Formats</a>, for a developer&rsquo;s description of
format representation.
</p>
<p>The print format is used to convert a variable&rsquo;s data values to
strings for human-readable output.  The write format is used similarly
for machine-readable output, primarily by the WRITE transformation
(see <a href="pspp.html#WRITE">(pspp)WRITE</a> section &lsquo;WRITE&rsquo; in <cite>PSPP Users Guide</cite>).  Most often a variable&rsquo;s
print and write formats are the same.
</p>
<p>A newly created variable by default has format F8.2 if it is numeric
or an A format with the same width as the variable if it is string.
Many creators of variables override these defaults.
</p>
<p>Both the print format and write format are output formats.  Input
formats are not part of @struct{variable}.  Instead, input programs
and transformations keep track of variable input formats themselves.
</p>
<p>The following functions work with variable print and write formats.
</p>
<dl>
<dt><a name="index-var_005fget_005fprint_005fformat"></a><u>Function:</u> const struct fmt_spec * <b>var_get_print_format</b><i> (const struct variable *<var>var</var>)</i></dt>
<dt><a name="index-var_005fget_005fwrite_005fformat"></a><u>Function:</u> const struct fmt_spec * <b>var_get_write_format</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s print or write format, respectively.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fprint_005fformat"></a><u>Function:</u> void <b>var_set_print_format</b><i> (struct variable *<var>var</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dt><a name="index-var_005fset_005fwrite_005fformat"></a><u>Function:</u> void <b>var_set_write_format</b><i> (struct variable *<var>var</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dt><a name="index-var_005fset_005fboth_005fformats"></a><u>Function:</u> void <b>var_set_both_formats</b><i> (struct variable *<var>var</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Sets <var>var</var>&rsquo;s print format, write format, or both formats,
respectively, to a copy of <var>format</var>.
</p></dd></dl>

<hr size="6">
<a name="Variable-Labels"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Print-and-Write-Formats" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-GUI-Attributes" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Labels-1"></a>
<h3 class="subsection">1.5.6 Variable Labels</h3>

<p>A variable label is a string that describes a variable.  Variable
labels may contain spaces and punctuation not allowed in variable
names.  See <a href="pspp.html#VARIABLE-LABELS">(pspp)VARIABLE LABELS</a> section &lsquo;VARIABLE LABELS&rsquo; in <cite>PSPP Users Guide</cite>, for a
user-level description of variable labels.
</p>
<p>The most commonly useful functions for variable labels are those to
retrieve a variable&rsquo;s label:
</p>
<dl>
<dt><a name="index-var_005fto_005fstring"></a><u>Function:</u> const char * <b>var_to_string</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s variable label, if it has one, otherwise
<var>var</var>&rsquo;s name.  In either case the caller must not attempt to
modify or free the returned string.
</p>
<p>This function is useful for user output.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005flabel"></a><u>Function:</u> const char * <b>var_get_label</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s variable label, if it has one, or a null pointer
otherwise.
</p></dd></dl>

<p>A few other variable label functions are also provided:
</p>
<dl>
<dt><a name="index-var_005fset_005flabel"></a><u>Function:</u> void <b>var_set_label</b><i> (struct variable *<var>var</var>, const char *<var>label</var>)</i></dt>
<dd><p>Sets <var>var</var>&rsquo;s variable label to a copy of <var>label</var>, or removes
any label from <var>var</var> if <var>label</var> is a null pointer or contains
only spaces.  Leading and trailing spaces are removed from the
variable label and its remaining content is truncated at 255 bytes.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fclear_005flabel"></a><u>Function:</u> void <b>var_clear_label</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Removes any variable label from <var>var</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fhas_005flabel"></a><u>Function:</u> bool <b>var_has_label</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> has a variable label, false otherwise.
</p></dd></dl>

<hr size="6">
<a name="Variable-GUI-Attributes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Labels" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Leave-Status" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="GUI-Attributes"></a>
<h3 class="subsection">1.5.7 GUI Attributes</h3>

<p>These functions and types access and set attributes that are mainly
used by graphical user interfaces.  Their values are also stored in
and retrieved from system files (but not portable files).
</p>
<p>The first group of functions relate to the measurement level of
numeric data.  New variables are assigned a nominal level of
measurement by default.
</p>
<dl>
<dt><a name="index-enum-measure"></a><u>Enumeration:</u> <b>enum measure</b></dt>
<dd><p>Measurement level.  Available values are:
</p>
<dl compact="compact">
<dt> <code>MEASURE_NOMINAL</code></dt>
<dd><p>Numeric data values are arbitrary.  Arithmetic operations and
numerical comparisons of such data are not meaningful.
</p>
</dd>
<dt> <code>MEASURE_ORDINAL</code></dt>
<dd><p>Numeric data values indicate progression along a rank order.
Arbitrary arithmetic operations such as addition are not meaningful on
such data, but inequality comparisons (less, greater, etc.) have
straightforward interpretations.
</p>
</dd>
<dt> <code>MEASURE_SCALE</code></dt>
<dd><p>Ratios, sums, etc. of numeric data values have meaningful
interpretations.
</p></dd>
</dl>

<p>PSPP does not have a separate category for interval data, which would
naturally fall between the ordinal and scale measurement levels.
</p></dd></dl>

<dl>
<dt><a name="index-measure_005fis_005fvalid"></a><u>Function:</u> bool <b>measure_is_valid</b><i> (enum measure <var>measure</var>)</i></dt>
<dd><p>Returns true if <var>measure</var> is a valid level of measurement, that
is, if it is one of the <code>enum measure</code> constants listed above,
and false otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-measure"></a><u>Function:</u> enum <b>measure</b><i> var_get_measure (const struct variable *<var>var</var>)</i></dt>
<dt><a name="index-var_005fset_005fmeasure"></a><u>Function:</u> void <b>var_set_measure</b><i> (struct variable *<var>var</var>, enum measure <var>measure</var>)</i></dt>
<dd><p>Gets or sets <var>var</var>&rsquo;s measurement level.
</p></dd></dl>

<p>The following set of functions relates to the width of on-screen
columns used for displaying variable data in a graphical user
interface environment.  The unit of measurement is the width of a
character.  For proportionally spaced fonts, this is based on the
average width of a character.
</p>
<dl>
<dt><a name="index-var_005fget_005fdisplay_005fwidth"></a><u>Function:</u> int <b>var_get_display_width</b><i> (const struct variable *<var>var</var>)</i></dt>
<dt><a name="index-var_005fset_005fdisplay_005fwidth"></a><u>Function:</u> void <b>var_set_display_width</b><i> (struct variable *<var>var</var>, int <var>display_width</var>)</i></dt>
<dd><p>Gets or sets <var>var</var>&rsquo;s display width.
</p></dd></dl>

<p><a name="var_005fdefault_005fdisplay_005fwidth"></a>
</p><dl>
<dt><a name="index-var_005fdefault_005fdisplay_005fwidth"></a><u>Function:</u> int <b>var_default_display_width</b><i> (int <var>width</var>)</i></dt>
<dd><p>Returns the default display width for a variable with the given
<var>width</var>.  The default width of a numeric variable is 8.  The
default width of a string variable is <var>width</var> or 32, whichever is
less.
</p></dd></dl>

<p>The final group of functions work with the justification of data when
it is displayed in on-screen columns.  New variables are by default
right-justified.
</p>
<dl>
<dt><a name="index-enum-alignment"></a><u>Enumeration:</u> <b>enum alignment</b></dt>
<dd><p>Text justification.  Possible values are <code>ALIGN_LEFT</code>,
<code>ALIGN_RIGHT</code>, and <code>ALIGN_CENTRE</code>.
</p></dd></dl>

<dl>
<dt><a name="index-alignment_005fis_005fvalid"></a><u>Function:</u> bool <b>alignment_is_valid</b><i> (enum alignment <var>alignment</var>)</i></dt>
<dd><p>Returns true if <var>alignment</var> is a valid alignment, that is, if it
is one of the <code>enum alignment</code> constants listed above, and false
otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-alignment"></a><u>Function:</u> enum <b>alignment</b><i> var_get_alignment (const struct variable *<var>var</var>)</i></dt>
<dt><a name="index-var_005fset_005falignment"></a><u>Function:</u> void <b>var_set_alignment</b><i> (struct variable *<var>var</var>, enum alignment <var>alignment</var>)</i></dt>
<dd><p>Gets or sets <var>var</var>&rsquo;s alignment.
</p></dd></dl>

<hr size="6">
<a name="Variable-Leave-Status"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-GUI-Attributes" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Class" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Leave-Status-1"></a>
<h3 class="subsection">1.5.8 Variable Leave Status</h3>

<p>Commonly, most or all data in a case come from an input file, read
with a command such as DATA LIST or GET, but data can also be
generated with transformations such as COMPUTE.  In the latter case
the question of a datum&rsquo;s &ldquo;initial value&rdquo; can arise.  For example,
the value of a piece of generated data can recursively depend on its
own value:
</p><table><tr><td>&nbsp;</td><td><pre class="example">COMPUTE X = X + 1.
</pre></td></tr></table>
<p>Another situation where the initial value of a variable arises is when
its value is not set at all for some cases, e.g. below, <code>Y</code> is
set only for the first 10 cases:
</p><table><tr><td>&nbsp;</td><td><pre class="example">DO IF #CASENUM &lt;= 10.
+ COMPUTE Y = 1.
END IF.
</pre></td></tr></table>

<p>By default, the initial value of a datum in either of these situations
is the system-missing value for numeric values and spaces for string
values.  This means that, above, X would be system-missing and that Y
would be 1 for the first 10 cases and system-missing for the
remainder.
</p>
<p>PSPP also supports retaining the value of a variable from one case to
another, using the LEAVE command (see <a href="pspp.html#LEAVE">(pspp)LEAVE</a> section &lsquo;LEAVE&rsquo; in <cite>PSPP Users Guide</cite>).  The initial value of such a variable is 0 if it is numeric
and spaces if it is a string.  If the command &lsquo;<samp>LEAVE X Y</samp>&rsquo; is
appended to the above example, then X would have value 1 in the first
case and increase by 1 in every succeeding case, and Y would have
value 1 for the first 10 cases and 0 for later cases.
</p>
<p>The LEAVE command has no effect on data that comes from an input file
or whose values do not depend on a variable&rsquo;s initial value.
</p>
<p>The value of scratch variables (see <a href="pspp.html#Scratch-Variables">(pspp)Scratch Variables</a> section &lsquo;Scratch Variables&rsquo; in <cite>PSPP Users Guide</cite>) are always left from one case to another.
</p>
<p>The following functions work with a variable&rsquo;s leave status.
</p>
<dl>
<dt><a name="index-var_005fget_005fleave"></a><u>Function:</u> bool <b>var_get_leave</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var>&rsquo;s value is to be retained from case to case,
false if it is reinitialized to system-missing or spaces.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fleave"></a><u>Function:</u> void <b>var_set_leave</b><i> (struct variable *<var>var</var>, bool <var>leave</var>)</i></dt>
<dd><p>If <var>leave</var> is true, marks <var>var</var> to be left from case to case;
if <var>leave</var> is false, marks <var>var</var> to be reinitialized for each
case.
</p>
<p>If <var>var</var> is a scratch variable, <var>leave</var> must be true.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fmust_005fleave"></a><u>Function:</u> bool <b>var_must_leave</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> must be left from case to case, that is, if
<var>var</var> is a scratch variable.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Class"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Leave-Status" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Creation-and-Destruction" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Dictionary-Class-1"></a>
<h3 class="subsection">1.5.9 Dictionary Class</h3>

<p>Occasionally it is useful to classify variables into <em>dictionary
classes</em> based on their names.  Dictionary classes are represented by
@enum{dict_class}.  This type and other declarations for dictionary
classes are in the &lsquo;<tt>&lt;data/dict-class.h&gt;</tt>&rsquo; header.
</p>
<dl>
<dt><a name="index-enum-dict_005fclass"></a><u>Enumeration:</u> <b>enum dict_class</b></dt>
<dd><p>The dictionary classes are:
</p>
<dl compact="compact">
<dt> <code>DC_ORDINARY</code></dt>
<dd><p>An ordinary variable, one whose name does not begin with &lsquo;<samp>$</samp>&rsquo; or
&lsquo;<samp>#</samp>&rsquo;.
</p>
</dd>
<dt> <code>DC_SYSTEM</code></dt>
<dd><p>A system variable, one whose name begins with &lsquo;<samp>$</samp>&rsquo;.  See <a href="pspp.html#System-Variables">(pspp)System Variables</a> section &lsquo;System Variables&rsquo; in <cite>PSPP Users Guide</cite>.
</p>
</dd>
<dt> <code>DC_SCRATCH</code></dt>
<dd><p>A scratch variable, one whose name begins with &lsquo;<samp>#</samp>&rsquo;.
See <a href="pspp.html#Scratch-Variables">(pspp)Scratch Variables</a> section &lsquo;Scratch Variables&rsquo; in <cite>PSPP Users Guide</cite>.
</p></dd>
</dl>

<p>The values for dictionary classes are bitwise disjoint, which allows
them to be used in bit-masks.  An extra enumeration constant
<code>DC_ALL</code>, whose value is the bitwise-<i>or</i> of all of the above
constants, is provided to aid in this purpose.
</p></dd></dl>

<p>One example use of dictionary classes arises in connection with PSPP
syntax that uses <code><var>a</var> TO <var>b</var></code> to name the variables in a
dictionary from <var>a</var> to <var>b</var> (see <a href="pspp.html#Sets-of-Variables">(pspp)Sets of Variables</a> section &lsquo;Sets of Variables&rsquo; in <cite>PSPP Users Guide</cite>).  This syntax requires <var>a</var> and <var>b</var> to be in
the same dictionary class.  It limits the variables that it includes
to those in that dictionary class.
</p>
<p>The following functions relate to dictionary classes.
</p>
<dl>
<dt><a name="index-dict_005fclass_005ffrom_005fid"></a><u>Function:</u> enum dict_class <b>dict_class_from_id</b><i> (const char *<var>name</var>)</i></dt>
<dd><p>Returns the &ldquo;dictionary class&rdquo; for the given variable <var>name</var>, by
looking at its first letter.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fclass_005fto_005fname"></a><u>Function:</u> const char * <b>dict_class_to_name</b><i> (enum dict_class <var>dict_class</var>)</i></dt>
<dd><p>Returns a name for the given <var>dict_class</var> as an adjective, e.g.
<code>&quot;scratch&quot;</code>.
</p>
<p>This function should probably not be used in new code as it can lead
to difficulties for internationalization.
</p></dd></dl>

<hr size="6">
<a name="Variable-Creation-and-Destruction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Class" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Short-Names" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Creation-and-Destruction-1"></a>
<h3 class="subsection">1.5.10 Variable Creation and Destruction</h3>

<p>Only rarely should PSPP code create or destroy variables directly.
Ordinarily, variables are created within a dictionary and destroying
by individual deletion from the dictionary or by destroying the entire
dictionary at once.  The functions here enable the exceptional case,
of creation and destruction of variables that are not associated with
any dictionary.  These functions are used internally in the dictionary
implementation.
</p>
<p><a name="var_005fcreate"></a>
</p><dl>
<dt><a name="index-var_005fcreate"></a><u>Function:</u> struct variable * <b>var_create</b><i> (const char *<var>name</var>, int <var>width</var>)</i></dt>
<dd><p>Creates and returns a new variable with the given <var>name</var> and
<var>width</var>.  The new variable is not part of any dictionary.  Use
@func{dict_create_var}, instead, to create a variable in a dictionary
(see section <a href="#Dictionary-Creating-Variables">Creating Variables</a>).
</p>
<p><var>name</var> should be a valid variable name and must be a &ldquo;plausible&rdquo;
variable name (see section <a href="#Variable-Name">Variable Name</a>).  <var>width</var> must be between 0
and <code>MAX_STRING</code>, inclusive (see section <a href="#Values">Values</a>).
</p>
<p>The new variable has no user-missing values, value labels, or variable
label.  Numeric variables initially have F8.2 print and write formats,
right-justified display alignment, and scale level of measurement.
String variables are created with A print and write formats,
left-justified display alignment, and nominal level of measurement.
The initial display width is determined by
@func{var_default_display_width} (see <a href="#var_005fdefault_005fdisplay_005fwidth">var_default_display_width</a>).
</p>
<p>The new variable initially has no short name (see section <a href="#Variable-Short-Names">Variable Short Names</a>) and no auxiliary data (see section <a href="#Variable-Auxiliary-Data">Variable Auxiliary Data</a>).
</p></dd></dl>

<p><a name="var_005fclone"></a>
</p><dl>
<dt><a name="index-var_005fclone"></a><u>Function:</u> struct variable * <b>var_clone</b><i> (const struct variable *<var>old_var</var>)</i></dt>
<dd><p>Creates and returns a new variable with the same attributes as
<var>old_var</var>, with a few exceptions.  First, the new variable is not
part of any dictionary, regardless of whether <var>old_var</var> was in a
dictionary.  Use @func{dict_clone_var}, instead, to add a clone of a
variable to a dictionary.
</p>
<p>Second, the new variable is not given any short name, even if
<var>old_var</var> had a short name.  This is because the new variable is
likely to be immediately renamed, in which case the short name would
be incorrect (see section <a href="#Variable-Short-Names">Variable Short Names</a>).
</p>
<p>Finally, <var>old_var</var>&rsquo;s auxiliary data, if any, is not copied to the
new variable (see section <a href="#Variable-Auxiliary-Data">Variable Auxiliary Data</a>).
</p></dd></dl>

<dl>
<dt><a name="index-var_005fdestroy"></a><u>Function:</u> void <b>var_destroy</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Destroys <var>var</var> and frees all associated storage, including its
auxiliary data, if any.  <var>var</var> must not be part of a dictionary.
To delete a variable from a dictionary and destroy it, use
@func{dict_delete_var} (see section <a href="#Dictionary-Deleting-Variables">Deleting Variables</a>).
</p></dd></dl>

<hr size="6">
<a name="Variable-Short-Names"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Creation-and-Destruction" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Relationships" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Short-Names-1"></a>
<h3 class="subsection">1.5.11 Variable Short Names</h3>

<p>PSPP variable names may be up to 64 (<code>ID_MAX_LEN</code>) bytes long.
The system and portable file formats, however, were designed when
variable names were limited to 8 bytes in length.  Since then, the
system file format has been augmented with an extension record that
explains how the 8-byte short names map to full-length names
(@pxref{Long Variable Names Record}), but the short names are still
present.  Thus, the continued presence of the short names is more or
less invisible to PSPP users, but every variable in a system file
still has a short name that must be unique.
</p>
<p>PSPP can generate unique short names for variables based on their full
names at the time it creates the data file.  If all variables&rsquo; full
names are unique in their first 8 bytes, then the short names are
simply prefixes of the full names; otherwise, PSPP changes them so
that they are unique.
</p>
<p>By itself this algorithm interoperates well with other software that
can read system files, as long as that software understands the
extension record that maps short names to long names.  When the other
software does not understand the extension record, it can produce
surprising results.  Consider a situation where PSPP reads a system
file that contains two variables named RANKINGSCORE, then the user
adds a new variable named RANKINGSTATUS, then saves the modified data
as a new system file.  A program that does not understand long names
would then see one of these variables under the name RANKINGS&mdash;either
one, depending on the algorithm&rsquo;s details&mdash;and the other under a
different name.  The effect could be very confusing: by adding a new
and apparently unrelated variable in PSPP, the user effectively
renamed the existing variable.
</p>
<p>To counteract this potential problem, every @struct{variable} may have
a short name.  A variable created by the system or portable file
reader receives the short name from that data file.  When a variable
with a short name is written to a system or portable file, that
variable receives priority over other long names whose names begin
with the same 8 bytes but which were not read from a data file under
that short name.
</p>
<p>Variables not created by the system or portable file reader have no
short name by default.
</p>
<p>A variable with a full name of 8 bytes or less in length has absolute
priority for that name when the variable is written to a system file,
even over a second variable with that assigned short name.
</p>
<p>PSPP does not enforce uniqueness of short names, although the short
names read from any given data file will always be unique.  If two
variables with the same short name are written to a single data file,
neither one receives priority.
</p>
<p>The following macros and functions relate to short names.
</p>
<dl>
<dt><a name="index-SHORT_005fNAME_005fLEN"></a><u>Macro:</u> <b>SHORT_NAME_LEN</b></dt>
<dd><p>Maximum length of a short name, in bytes.  Its value is 8.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fshort_005fname"></a><u>Function:</u> const char * <b>var_get_short_name</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s short name, or a null pointer if <var>var</var> has not
been assigned a short name.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fshort_005fname"></a><u>Function:</u> void <b>var_set_short_name</b><i> (struct variable *<var>var</var>, const char *<var>short_name</var>)</i></dt>
<dd><p>Sets <var>var</var>&rsquo;s short name to <var>short_name</var>, or removes
<var>var</var>&rsquo;s short name if <var>short_name</var> is a null pointer.  If it
is non-null, then <var>short_name</var> must be a plausible name for a
variable.  The name will be truncated
to 8 bytes in length and converted to all-uppercase.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fclear_005fshort_005fname"></a><u>Function:</u> void <b>var_clear_short_name</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Removes <var>var</var>&rsquo;s short name.
</p></dd></dl>

<hr size="6">
<a name="Variable-Relationships"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Short-Names" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Auxiliary-Data" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Relationships-1"></a>
<h3 class="subsection">1.5.12 Variable Relationships</h3>

<p>Variables have close relationships with dictionaries
(see section <a href="#Dictionaries">Dictionaries</a>) and cases (see section <a href="#Cases">Cases</a>).  A variable is
usually a member of some dictionary, and a case is often used to store
data for the set of variables in a dictionary.
</p>
<p>These functions report on these relationships.  They may be applied
only to variables that are in a dictionary.
</p>
<dl>
<dt><a name="index-var_005fget_005fdict_005findex"></a><u>Function:</u> size_t <b>var_get_dict_index</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s index within its dictionary.  The first variable
in a dictionary has index 0, the next variable index 1, and so on.
</p>
<p>The dictionary index can be influenced using dictionary functions such
as dict_reorder_var (see <a href="#dict_005freorder_005fvar">dict_reorder_var</a>).
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fcase_005findex"></a><u>Function:</u> size_t <b>var_get_case_index</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s index within a case.  The case index is an index
into an array of @union{value} large enough to contain all the data in
the dictionary.
</p>
<p>The returned case index can be used to access the value of <var>var</var>
within a case for its dictionary, as in e.g. <code>case_data_idx
(case, var_get_case_index (<var>var</var>))</code>, but ordinarily it is more
convenient to use the data access functions that do variable-to-index
translation internally, as in e.g. <code>case_data (case,
<var>var</var>)</code>.
</p></dd></dl>

<hr size="6">
<a name="Variable-Auxiliary-Data"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Relationships" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Categorical-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Auxiliary-Data-1"></a>
<h3 class="subsection">1.5.13 Variable Auxiliary Data</h3>

<p>Each @struct{variable} can have a single pointer to auxiliary data of
type <code>void *</code>.  These functions manipulate a variable&rsquo;s auxiliary
data.
</p>
<p>Use of auxiliary data is discouraged because of its lack of
flexibility.  Only one client can make use of auxiliary data on a
given variable at any time, even though many clients could usefully
associate data with a variable.
</p>
<p>To prevent multiple clients from attempting to use a variable&rsquo;s single
auxiliary data field at the same time, we adopt the convention that
use of auxiliary data in the active dataset dictionary is restricted to
the currently executing command.  In particular, transformations must
not attach auxiliary data to a variable in the active dataset in the
expectation that it can be used later when the active dataset is read and
the transformation is executed.  To help enforce this restriction,
auxiliary data is deleted from all variables in the active dataset
dictionary after the execution of each PSPP command.
</p>
<p>This convention for safe use of auxiliary data applies only to the
active dataset dictionary.  Rules for other dictionaries may be
established separately.
</p>
<p>Auxiliary data should be replaced by a more flexible mechanism at some
point, but no replacement mechanism has been designed or implemented
so far.
</p>
<p>The following functions work with variable auxiliary data.
</p>
<dl>
<dt><a name="index-var_005fget_005faux"></a><u>Function:</u> void * <b>var_get_aux</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s auxiliary data, or a null pointer if none has been
assigned.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fattach_005faux"></a><u>Function:</u> void * <b>var_attach_aux</b><i> (const struct variable *<var>var</var>, void *<var>aux</var>, void (*<var>aux_dtor</var>) (struct variable *))</i></dt>
<dd><p>Sets <var>var</var>&rsquo;s auxiliary data to <var>aux</var>, which must not be null.
<var>var</var> must not already have auxiliary data.
</p>
<p>Before <var>var</var>&rsquo;s auxiliary data is cleared by <code>var_clear_aux</code>,
<var>aux_dtor</var>, if non-null, will be called with <var>var</var> as its
argument.  It should free any storage associated with <var>aux</var>, if
necessary.  <code>var_dtor_free</code> may be appropriate for use as
<var>aux_dtor</var>:
</p>
<dl>
<dt><a name="index-void"></a><u>Function:</u> <b>void</b><i> var_dtor_free (struct variable *<var>var</var>)</i></dt>
<dd><p>Frees <var>var</var>&rsquo;s auxiliary data by calling <code>free</code>.
</p></dd></dl>
</dd></dl>

<dl>
<dt><a name="index-var_005fclear_005faux"></a><u>Function:</u> void <b>var_clear_aux</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Removes auxiliary data, if any, from <var>var</var>, first calling the
destructor passed to <code>var_attach_aux</code>, if one was provided.
</p>
<p>Use <code>dict_clear_aux</code> to remove auxiliary data from every variable
in a dictionary. </p></dd></dl>

<dl>
<dt><a name="index-var_005fdetach_005faux"></a><u>Function:</u> void * <b>var_detach_aux</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Removes auxiliary data, if any, from <var>var</var>, and returns it.
Returns a null pointer if <var>var</var> had no auxiliary data.
</p>
<p>Any destructor passed to <code>var_attach_aux</code> is not called, so the
caller is responsible for freeing storage associated with the returned
auxiliary data.
</p></dd></dl>

<hr size="6">
<a name="Variable-Categorical-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Auxiliary-Data" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Categorical-Values-1"></a>
<h3 class="subsection">1.5.14 Variable Categorical Values</h3>

<p>Some statistical procedures require a list of all the values that a
categorical variable takes on.  Arranging such a list requires making
a pass through the data, so PSPP caches categorical values in
@struct{variable}.
</p>
<p>When variable auxiliary data is revamped to support multiple clients
as described in the previous section, categorical values are an
obvious candidate.  The form in which they are currently supported is
inelegant.
</p>
<p>Categorical values are not robust against changes in the data.  That
is, there is currently no way to detect that a transformation has
changed data values, meaning that categorical values lists for the
changed variables must be recomputed.  PSPP is in fact in need of a
general-purpose caching and cache-invalidation mechanism, but none
has yet been designed and built.
</p>
<p>The following functions work with cached categorical values.
</p>
<dl>
<dt><a name="index-var_005fget_005fobs_005fvals"></a><u>Function:</u> struct cat_vals * <b>var_get_obs_vals</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s set of categorical values.  Yields undefined
behavior if <var>var</var> does not have any categorical values.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fobs_005fvals"></a><u>Function:</u> void <b>var_set_obs_vals</b><i> (const struct variable *<var>var</var>, struct cat_vals *<var>cat_vals</var>)</i></dt>
<dd><p>Destroys <var>var</var>&rsquo;s categorical values, if any, and replaces them by
<var>cat_vals</var>, ownership of which is transferred to <var>var</var>.  If
<var>cat_vals</var> is a null pointer, then <var>var</var>&rsquo;s categorical values
are cleared.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fhas_005fobs_005fvals"></a><u>Function:</u> bool <b>var_has_obs_vals</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> has a set of categorical values, false
otherwise.
</p></dd></dl>

<hr size="6">
<a name="Dictionaries"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Categorical-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Variable-Access" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Dictionaries-1"></a>
<h2 class="section">1.6 Dictionaries</h2>

<p>Each data file in memory or on disk has an associated dictionary,
whose primary purpose is to describe the data in the file.
See <a href="pspp.html#Variables">(pspp)Variables</a> section &lsquo;Variables&rsquo; in <cite>PSPP Users Guide</cite>, for a PSPP user&rsquo;s view of a
dictionary.
</p>
<p>A data file stored in a PSPP format, either as a system or portable
file, has a representation of its dictionary embedded in it.  Other
kinds of data files are usually not self-describing enough to
construct a dictionary unassisted, so the dictionaries for these files
must be specified explicitly with PSPP commands such as @cmd{DATA
LIST}.
</p>
<p>The most important content of a dictionary is an array of variables,
which must have unique names.  A dictionary also conceptually contains
a mapping from each of its variables to a location within a case
(see section <a href="#Cases">Cases</a>), although in fact these mappings are stored within
individual variables.
</p>
<p>System variables are not members of any dictionary (see <a href="pspp.html#System-Variables">(pspp)System Variables</a> section &lsquo;System Variables&rsquo; in <cite>PSPP Users Guide</cite>).
</p>
<p>Dictionaries are represented by @struct{dictionary}.  Declarations
related to dictionaries are in the &lsquo;<tt>&lt;data/dictionary.h&gt;</tt>&rsquo; header.
</p>
<p>The following sections describe functions for use with dictionaries.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Dictionary-Variable-Access">1.6.1 Accessing Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Creating-Variables">1.6.2 Creating Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Deleting-Variables">1.6.3 Deleting Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Reordering-Variables">1.6.4 Changing Variable Order</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Renaming-Variables">1.6.5 Renaming Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Weight-Variable">1.6.6 Weight Variable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Filter-Variable">1.6.7 Filter Variable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Case-Limit">1.6.8 Case Limit</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Split-Variables">1.6.9 Split Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-File-Label">1.6.10 File Label</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Documents">1.6.11 Documents</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Dictionary-Variable-Access"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionaries" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Creating-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Accessing-Variables"></a>
<h3 class="subsection">1.6.1 Accessing Variables</h3>

<p>The most common operations on a dictionary simply retrieve a
<code>struct variable *</code> of an individual variable based on its name
or position.
</p>
<dl>
<dt><a name="index-dict_005flookup_005fvar"></a><u>Function:</u> struct variable * <b>dict_lookup_var</b><i> (const struct dictionary *<var>dict</var>, const char *<var>name</var>)</i></dt>
<dt><a name="index-dict_005flookup_005fvar_005fassert"></a><u>Function:</u> struct variable * <b>dict_lookup_var_assert</b><i> (const struct dictionary *<var>dict</var>, const char *<var>name</var>)</i></dt>
<dd><p>Looks up and returns the variable with the given <var>name</var> within
<var>dict</var>.  Name lookup is not case-sensitive.
</p>
<p><code>dict_lookup_var</code> returns a null pointer if <var>dict</var> does not
contain a variable named <var>name</var>.  <code>dict_lookup_var_assert</code>
asserts that such a variable exists.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fvar"></a><u>Function:</u> struct variable * <b>dict_get_var</b><i> (const struct dictionary *<var>dict</var>, size_t <var>position</var>)</i></dt>
<dd><p>Returns the variable at the given <var>position</var> in <var>dict</var>.
<var>position</var> must be less than the number of variables in <var>dict</var>
(see below).
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fvar_005fcnt"></a><u>Function:</u> size_t <b>dict_get_var_cnt</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the number of variables in <var>dict</var>.
</p></dd></dl>

<p>Another pair of functions allows retrieving a number of variables at
once.  These functions are more rarely useful.
</p>
<dl>
<dt><a name="index-dict_005fget_005fvars"></a><u>Function:</u> void <b>dict_get_vars</b><i> (const struct dictionary *<var>dict</var>, const struct variable ***<var>vars</var>, size_t *<var>cnt</var>, enum dict_class <var>exclude</var>)</i></dt>
<dt><a name="index-dict_005fget_005fvars_005fmutable"></a><u>Function:</u> void <b>dict_get_vars_mutable</b><i> (const struct dictionary *<var>dict</var>, struct variable ***<var>vars</var>, size_t *<var>cnt</var>, enum dict_class <var>exclude</var>)</i></dt>
<dd><p>Retrieves all of the variables in <var>dict</var>, in their original order,
except that any variables in the dictionary classes specified
<var>exclude</var>, if any, are excluded (see section <a href="#Dictionary-Class">Dictionary Class</a>).
Pointers to the variables are stored in an array allocated with
<code>malloc</code>, and a pointer to the first element of this array is
stored in <code>*<var>vars</var></code>.  The caller is responsible for freeing
this memory when it is no longer needed.  The number of variables
retrieved is stored in <code>*<var>cnt</var></code>.
</p>
<p>The presence or absence of <code>DC_SYSTEM</code> in <var>exclude</var> has no
effect, because dictionaries never include system variables.
</p></dd></dl>

<p>One additional function is available.  This function is most often
used in assertions, but it is not restricted to such use.
</p>
<dl>
<dt><a name="index-dict_005fcontains_005fvar"></a><u>Function:</u> bool <b>dict_contains_var</b><i> (const struct dictionary *<var>dict</var>, const struct variable *<var>var</var>)</i></dt>
<dd><p>Tests whether <var>var</var> is one of the variables in <var>dict</var>.
Returns true if so, false otherwise.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Creating-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Variable-Access" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Deleting-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Creating-Variables"></a>
<h3 class="subsection">1.6.2 Creating Variables</h3>

<p>These functions create a new variable and insert it into a dictionary
in a single step.
</p>
<p>There is no provision for inserting an already created variable into a
dictionary.  There is no reason that such a function could not be
written, but so far there has been no need for one.
</p>
<p>The names provided to one of these functions should be valid variable
names and must be plausible variable names. </p>
<p>If a variable with the same name already exists in the dictionary, the
non-<code>assert</code> variants of these functions return a null pointer,
without modifying the dictionary.  The <code>assert</code> variants, on the
other hand, assert that no duplicate name exists.
</p>
<p>A variable may be in only one dictionary at any given time.
</p>
<dl>
<dt><a name="index-dict_005fcreate_005fvar"></a><u>Function:</u> struct variable * <b>dict_create_var</b><i> (struct dictionary *<var>dict</var>, const char *<var>name</var>, int <var>width</var>)</i></dt>
<dt><a name="index-dict_005fcreate_005fvar_005fassert"></a><u>Function:</u> struct variable * <b>dict_create_var_assert</b><i> (struct dictionary *<var>dict</var>, const char *<var>name</var>, int <var>width</var>)</i></dt>
<dd><p>Creates a new variable with the given <var>name</var> and <var>width</var>, as
if through a call to <code>var_create</code> with those arguments
(see <a href="#var_005fcreate">var_create</a>), appends the new variable to <var>dict</var>&rsquo;s array
of variables, and returns the new variable.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fclone_005fvar"></a><u>Function:</u> struct variable * <b>dict_clone_var</b><i> (struct dictionary *<var>dict</var>, const struct variable *<var>old_var</var>)</i></dt>
<dt><a name="index-dict_005fclone_005fvar_005fassert"></a><u>Function:</u> struct variable * <b>dict_clone_var_assert</b><i> (struct dictionary *<var>dict</var>, const struct variable *<var>old_var</var>)</i></dt>
<dd><p>Creates a new variable as a clone of <var>var</var>, inserts the new
variable into <var>dict</var>, and returns the new variable.  Other
properties of the new variable are copied from <var>old_var</var>, except
for those not copied by <code>var_clone</code> (see <a href="#var_005fclone">var_clone</a>).
</p>
<p><var>var</var> does not need to be a member of any dictionary.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fclone_005fvar_005fas"></a><u>Function:</u> struct variable * <b>dict_clone_var_as</b><i> (struct dictionary *<var>dict</var>, const struct variable *<var>old_var</var>, const char *<var>name</var>)</i></dt>
<dt><a name="index-dict_005fclone_005fvar_005fas_005fassert"></a><u>Function:</u> struct variable * <b>dict_clone_var_as_assert</b><i> (struct dictionary *<var>dict</var>, const struct variable *<var>old_var</var>, const char *<var>name</var>)</i></dt>
<dd><p>These functions are similar to <code>dict_clone_var</code> and
<code>dict_clone_var_assert</code>, respectively, except that the new
variable is named <var>name</var> instead of keeping <var>old_var</var>&rsquo;s name.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Deleting-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Creating-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Reordering-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Deleting-Variables"></a>
<h3 class="subsection">1.6.3 Deleting Variables</h3>

<p>These functions remove variables from a dictionary&rsquo;s array of
variables.  They also destroy the removed variables and free their
associated storage.
</p>
<p>Deleting a variable to which there might be external pointers is a bad
idea.  In particular, deleting variables from the active dataset
dictionary is a risky proposition, because transformations can retain
references to arbitrary variables.  Therefore, no variable should be
deleted from the active dataset dictionary when any transformations are
active, because those transformations might reference the variable to
be deleted.  The safest time to delete a variable is just after a
procedure has been executed, as done by @cmd{DELETE VARIABLES}.
</p>
<p>Deleting a variable automatically removes references to that variable
from elsewhere in the dictionary as a weighting variable, filter
variable, @cmd{SPLIT FILE} variable, or member of a vector.
</p>
<p>No functions are provided for removing a variable from a dictionary
without destroying that variable.  As with insertion of an existing
variable, there is no reason that this could not be implemented, but
so far there has been no need.
</p>
<dl>
<dt><a name="index-dict_005fdelete_005fvar"></a><u>Function:</u> void <b>dict_delete_var</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>)</i></dt>
<dd><p>Deletes <var>var</var> from <var>dict</var>, of which it must be a member.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fdelete_005fvars"></a><u>Function:</u> void <b>dict_delete_vars</b><i> (struct dictionary *<var>dict</var>, struct variable *const *<var>vars</var>, size_t <var>count</var>)</i></dt>
<dd><p>Deletes the <var>count</var> variables in array <var>vars</var> from <var>dict</var>.
All of the variables in <var>vars</var> must be members of <var>dict</var>.  No
variable may be included in <var>vars</var> more than once.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fdelete_005fconsecutive_005fvars"></a><u>Function:</u> void <b>dict_delete_consecutive_vars</b><i> (struct dictionary *<var>dict</var>, size_t <var>idx</var>, size_t <var>count</var>)</i></dt>
<dd><p>Deletes the variables in sequential positions
<var>idx</var>&hellip;<var>idx</var> + <var>count</var> (exclusive) from <var>dict</var>,
which must contain at least <var>idx</var> + <var>count</var> variables.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fdelete_005fscratch_005fvars"></a><u>Function:</u> void <b>dict_delete_scratch_vars</b><i> (struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Deletes all scratch variables from <var>dict</var>.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Reordering-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Deleting-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Renaming-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Changing-Variable-Order"></a>
<h3 class="subsection">1.6.4 Changing Variable Order</h3>

<p>The variables in a dictionary are stored in an array.  These functions
change the order of a dictionary&rsquo;s array of variables without changing
which variables are in the dictionary.
</p>
<p><a name="dict_005freorder_005fvar"></a>
</p><dl>
<dt><a name="index-dict_005freorder_005fvar"></a><u>Function:</u> void <b>dict_reorder_var</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>, size_t <var>new_index</var>)</i></dt>
<dd><p>Moves <var>var</var>, which must be in <var>dict</var>, so that it is at
position <var>new_index</var> in <var>dict</var>&rsquo;s array of variables.  Other
variables in <var>dict</var>, if any, retain their relative positions.
<var>new_index</var> must be less than the number of variables in
<var>dict</var>.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005freorder_005fvars"></a><u>Function:</u> void <b>dict_reorder_vars</b><i> (struct dictionary *<var>dict</var>, struct variable *const *<var>new_order</var>, size_t <var>count</var>)</i></dt>
<dd><p>Moves the <var>count</var> variables in <var>new_order</var> to the beginning of
<var>dict</var>&rsquo;s array of variables in the specified order.  Other
variables in <var>dict</var>, if any, retain their relative positions.
</p>
<p>All of the variables in <var>new_order</var> must be in <var>dict</var>.  No
duplicates are allowed within <var>new_order</var>, which means that
<var>count</var> must be no greater than the number of variables in
<var>dict</var>.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Renaming-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Reordering-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Weight-Variable" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Renaming-Variables"></a>
<h3 class="subsection">1.6.5 Renaming Variables</h3>

<p>These functions change the names of variables within a dictionary.
The @func{var_set_name} function (see <a href="#var_005fset_005fname">var_set_name</a>) cannot be
applied directly to a variable that is in a dictionary, because
@struct{dictionary} contains an index by name that @func{var_set_name}
would not update.  The following functions take care to update the
index as well.  They also ensure that variable renaming does not cause
a dictionary to contain a duplicate variable name.
</p>
<dl>
<dt><a name="index-dict_005frename_005fvar"></a><u>Function:</u> void <b>dict_rename_var</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>, const char *<var>new_name</var>)</i></dt>
<dd><p>Changes the name of <var>var</var>, which must be in <var>dict</var>, to
<var>new_name</var>.  A variable named <var>new_name</var> must not already be
in <var>dict</var>, unless <var>new_name</var> is the same as <var>var</var>&rsquo;s
current name.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005frename_005fvars"></a><u>Function:</u> bool <b>dict_rename_vars</b><i> (struct dictionary *<var>dicT</var>, struct variable **<var>vars</var>, char **<var>new_names</var>, size_t <var>count</var>, char **<var>err_name</var>)</i></dt>
<dd><p>Renames each of the <var>count</var> variables in <var>vars</var> to the name in
the corresponding position of <var>new_names</var>.  If the renaming would
result in a duplicate variable name, returns false and stores one of
the names that would be be duplicated into <code>*<var>err_name</var></code>, if
<var>err_name</var> is non-null.  Otherwise, the renaming is successful,
and true is returned.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Weight-Variable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Renaming-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Filter-Variable" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Weight-Variable"></a>
<h3 class="subsection">1.6.6 Weight Variable</h3>

<p>A data set&rsquo;s cases may optionally be weighted by the value of a
numeric variable.  See <a href="pspp.html#WEIGHT">(pspp)WEIGHT</a> section &lsquo;WEIGHT&rsquo; in <cite>PSPP Users Guide</cite>, for a user
view of weight variables.
</p>
<p>The weight variable is written to and read from system and portable
files.
</p>
<p>The most commonly useful function related to weighting is a
convenience function to retrieve a weighting value from a case.
</p>
<dl>
<dt><a name="index-dict_005fget_005fcase_005fweight"></a><u>Function:</u> double <b>dict_get_case_weight</b><i> (const struct dictionary *<var>dict</var>, const struct ccase *<var>case</var>, bool *<var>warn_on_invalid</var>)</i></dt>
<dd><p>Retrieves and returns the value of the weighting variable specified by
<var>dict</var> from <var>case</var>.  Returns 1.0 if <var>dict</var> has no
weighting variable.
</p>
<p>Returns 0.0 if <var>c</var>&rsquo;s weight value is user- or system-missing,
zero, or negative.  In such a case, if <var>warn_on_invalid</var> is
non-null and <code>*<var>warn_on_invalid</var></code> is true,
@func{dict_get_case_weight} also issues an error message and sets
<code>*<var>warn_on_invalid</var></code> to false.  To disable error reporting,
pass a null pointer or a pointer to false as <var>warn_on_invalid</var> or
use a @func{msg_disable}/@func{msg_enable} pair.
</p></dd></dl>

<p>The dictionary also has a pair of functions for getting and setting
the weight variable.
</p>
<dl>
<dt><a name="index-dict_005fget_005fweight"></a><u>Function:</u> struct variable * <b>dict_get_weight</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns <var>dict</var>&rsquo;s current weighting variable, or a null pointer if
the dictionary does not have a weighting variable.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005fweight"></a><u>Function:</u> void <b>dict_set_weight</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s weighting variable to <var>var</var>.  If <var>var</var> is
non-null, it must be a numeric variable in <var>dict</var>.  If <var>var</var>
is null, then <var>dict</var>&rsquo;s weighting variable, if any, is cleared.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Filter-Variable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Weight-Variable" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Case-Limit" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Filter-Variable"></a>
<h3 class="subsection">1.6.7 Filter Variable</h3>

<p>When the active dataset is read by a procedure, cases can be excluded
from analysis based on the values of a <em>filter variable</em>.
See <a href="pspp.html#FILTER">(pspp)FILTER</a> section &lsquo;FILTER&rsquo; in <cite>PSPP Users Guide</cite>, for a user view of filtering.
</p>
<p>These functions store and retrieve the filter variable.  They are
rarely useful, because the data analysis framework automatically
excludes from analysis the cases that should be filtered.
</p>
<dl>
<dt><a name="index-dict_005fget_005ffilter"></a><u>Function:</u> struct variable * <b>dict_get_filter</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns <var>dict</var>&rsquo;s current filter variable, or a null pointer if the
dictionary does not have a filter variable.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005ffilter"></a><u>Function:</u> void <b>dict_set_filter</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s filter variable to <var>var</var>.  If <var>var</var> is
non-null, it must be a numeric variable in <var>dict</var>.  If <var>var</var>
is null, then <var>dict</var>&rsquo;s filter variable, if any, is cleared.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Case-Limit"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Filter-Variable" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Split-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Case-Limit"></a>
<h3 class="subsection">1.6.8 Case Limit</h3>

<p>The limit on cases analyzed by a procedure, set by the @cmd{N OF
CASES} command (see <a href="pspp.html#N-OF-CASES">(pspp)N OF CASES</a> section &lsquo;N OF CASES&rsquo; in <cite>PSPP Users Guide</cite>), is
stored as part of the dictionary.  The dictionary does not, on the
other hand, play any role in enforcing the case limit (a job done by
data analysis framework code).
</p>
<p>A case limit of 0 means that the number of cases is not limited.
</p>
<p>These functions are rarely useful, because the data analysis framework
automatically excludes from analysis any cases beyond the limit.
</p>
<dl>
<dt><a name="index-dict_005fget_005fcase_005flimit"></a><u>Function:</u> casenumber <b>dict_get_case_limit</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the current case limit for <var>dict</var>.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005fcase_005flimit"></a><u>Function:</u> void <b>dict_set_case_limit</b><i> (struct dictionary *<var>dict</var>, casenumber <var>limit</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s case limit to <var>limit</var>.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Split-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Case-Limit" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-File-Label" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Split-Variables"></a>
<h3 class="subsection">1.6.9 Split Variables</h3>

<p>The user may use the @cmd{SPLIT FILE} command (see <a href="pspp.html#SPLIT-FILE">(pspp)SPLIT FILE</a> section &lsquo;SPLIT FILE&rsquo; in <cite>PSPP Users Guide</cite>) to select a set of variables on which
to split the active dataset into groups of cases to be analyzed
independently in each statistical procedure.  The set of split
variables is stored as part of the dictionary, although the effect on
data analysis is implemented by each individual statistical procedure.
</p>
<p>Split variables may be numeric or short or long string variables.
</p>
<p>The most useful functions for split variables are those to retrieve
them.  Even these functions are rarely useful directly: for the
purpose of breaking cases into groups based on the values of the split
variables, it is usually easier to use
@func{casegrouper_create_splits}.
</p>
<dl>
<dt><a name="index-dict_005fget_005fsplit_005fvars"></a><u>Function:</u> const struct variable *const * <b>dict_get_split_vars</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns a pointer to an array of pointers to split variables.  If and
only if there are no split variables, returns a null pointer.  The
caller must not modify or free the returned array.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fsplit_005fcnt"></a><u>Function:</u> size_t <b>dict_get_split_cnt</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the number of split variables.
</p></dd></dl>

<p>The following functions are also available for working with split
variables.
</p>
<dl>
<dt><a name="index-dict_005fset_005fsplit_005fvars"></a><u>Function:</u> void <b>dict_set_split_vars</b><i> (struct dictionary *<var>dict</var>, struct variable *const *<var>vars</var>, size_t <var>cnt</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s split variables to the <var>cnt</var> variables in
<var>vars</var>.  If <var>cnt</var> is 0, then <var>dict</var> will not have any
split variables.  The caller retains ownership of <var>vars</var>.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005funset_005fsplit_005fvar"></a><u>Function:</u> void <b>dict_unset_split_var</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>)</i></dt>
<dd><p>Removes <var>var</var>, which must be a variable in <var>dict</var>, from
<var>dict</var>&rsquo;s split of split variables.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-File-Label"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Split-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Documents" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="File-Label"></a>
<h3 class="subsection">1.6.10 File Label</h3>

<p>A dictionary may optionally have an associated string that describes
its contents, called its file label.  The user may set the file label
with the @cmd{FILE LABEL} command (see <a href="pspp.html#FILE-LABEL">(pspp)FILE LABEL</a> section &lsquo;FILE LABEL&rsquo; in <cite>PSPP Users Guide</cite>).
</p>
<p>These functions set and retrieve the file label.
</p>
<dl>
<dt><a name="index-dict_005fget_005flabel"></a><u>Function:</u> const char * <b>dict_get_label</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns <var>dict</var>&rsquo;s file label.  If <var>dict</var> does not have a label,
returns a null pointer.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005flabel"></a><u>Function:</u> void <b>dict_set_label</b><i> (struct dictionary *<var>dict</var>, const char *<var>label</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s label to <var>label</var>.  If <var>label</var> is non-null,
then its content, truncated to at most 60 bytes, becomes the new file
label.  If <var>label</var> is null, then <var>dict</var>&rsquo;s label is removed.
</p>
<p>The caller retains ownership of <var>label</var>.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Documents"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-File-Label" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Coding-Conventions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Documents"></a>
<h3 class="subsection">1.6.11 Documents</h3>

<p>A dictionary may include an arbitrary number of lines of explanatory
text, called the dictionary&rsquo;s documents.  For compatibility, document
lines have a fixed width, and lines that are not exactly this width
are truncated or padded with spaces as necessary to bring them to the
correct width.
</p>
<p>PSPP users can use the @cmd{DOCUMENT} (see <a href="pspp.html#DOCUMENT">(pspp)DOCUMENT</a> section &lsquo;DOCUMENT&rsquo; in <cite>PSPP Users Guide</cite>), @cmd{ADD DOCUMENT} (see <a href="pspp.html#ADD-DOCUMENT">(pspp)ADD DOCUMENT</a> section &lsquo;ADD DOCUMENT&rsquo; in <cite>PSPP Users Guide</cite>), and @cmd{DROP DOCUMENTS} (see <a href="pspp.html#DROP-DOCUMENTS">(pspp)DROP DOCUMENTS</a> section &lsquo;DROP DOCUMENTS&rsquo; in <cite>PSPP Users Guide</cite>) commands to manipulate documents.
</p>
<dl>
<dt><a name="index-DOC_005fLINE_005fLENGTH"></a><u>Macro:</u> int <b>DOC_LINE_LENGTH</b></dt>
<dd><p>The fixed length of a document line, in bytes, defined to 80.
</p></dd></dl>

<p>The following functions work with whole sets of documents.  They
accept or return sets of documents formatted as null-terminated
strings that are an exact multiple of <code>DOC_LINE_LENGTH</code>
bytes in length.
</p>
<dl>
<dt><a name="index-dict_005fget_005fdocuments"></a><u>Function:</u> const char * <b>dict_get_documents</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the documents in <var>dict</var>, or a null pointer if <var>dict</var>
has no documents.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005fdocuments"></a><u>Function:</u> void <b>dict_set_documents</b><i> (struct dictionary *<var>dict</var>, const char *<var>new_documents</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s documents to <var>new_documents</var>.  If
<var>new_documents</var> is a null pointer or an empty string, then
<var>dict</var>&rsquo;s documents are cleared.  The caller retains ownership of
<var>new_documents</var>.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fclear_005fdocuments"></a><u>Function:</u> void <b>dict_clear_documents</b><i> (struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Clears the documents from <var>dict</var>.
</p></dd></dl>

<p>The following functions work with individual lines in a dictionary&rsquo;s
set of documents.
</p>
<dl>
<dt><a name="index-dict_005fadd_005fdocument_005fline"></a><u>Function:</u> void <b>dict_add_document_line</b><i> (struct dictionary *<var>dict</var>, const char *<var>content</var>)</i></dt>
<dd><p>Appends <var>content</var> to the documents in <var>dict</var>.  The text in
<var>content</var> will be truncated or padded with spaces as necessary to
make it exactly <code>DOC_LINE_LENGTH</code> bytes long.  The caller retains
ownership of <var>content</var>.
</p>
<p>If <var>content</var> is over <code>DOC_LINE_LENGTH</code>, this function also
issues a warning using @func{msg}.  To suppress the warning, enclose a
call to one of this function in a @func{msg_disable}/@func{msg_enable}
pair.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fdocument_005fline_005fcnt"></a><u>Function:</u> size_t <b>dict_get_document_line_cnt</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the number of line of documents in <var>dict</var>.  If the
dictionary contains no documents, returns 0.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fdocument_005fline"></a><u>Function:</u> void <b>dict_get_document_line</b><i> (const struct dictionary *<var>dict</var>, size_t <var>idx</var>, struct string *<var>content</var>)</i></dt>
<dd><p>Replaces the text in <var>content</var> (which must already have been
initialized by the caller) by the document line in <var>dict</var> numbered
<var>idx</var>, which must be less than the number of lines of documents in
<var>dict</var>.  Any trailing white space in the document line is trimmed,
so that <var>content</var> will have a length between 0 and
<code>DOC_LINE_LENGTH</code>.
</p></dd></dl>

<hr size="6">
<a name="Coding-Conventions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Documents" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Cases" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Coding-Conventions-1"></a>
<h2 class="section">1.7 Coding Conventions</h2>

<p>Every &lsquo;<tt>.c</tt>&rsquo; file should have &lsquo;<samp>#include &lt;config.h&gt;</samp>&rsquo; as its
first non-comment line.  No &lsquo;<tt>.h</tt>&rsquo; file should include
&lsquo;<tt>config.h</tt>&rsquo;.
</p>
<p>This section needs to be finished.
</p>
<hr size="6">
<a name="Cases"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Coding-Conventions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Data-Sets" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Cases-1"></a>
<h2 class="section">1.8 Cases</h2>

<p>This section needs to be written.
</p>
<hr size="6">
<a name="Data-Sets"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Cases" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Pools" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Data-Sets-1"></a>
<h2 class="section">1.9 Data Sets</h2>

<p>This section needs to be written.
</p>
<hr size="6">
<a name="Pools"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Data-Sets" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[ &gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Pools-1"></a>
<h2 class="section">1.10 Pools</h2>

<p>This section needs to be written.
</p>
<hr size="6">
<a name="SEC_About"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Basic-Concepts" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[Contents]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>About This Document</h1>
<p>
  This document was generated by <em>StatSoft</em> on <em>February 22, 2017</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
</p>
<p>
  The buttons in the navigation panels have the following meaning:
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Go to </th>
    <th> From 1.2.3 go to</th>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Back</td>
    <td>Previous section in reading order</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Forward</td>
    <td>Next section in reading order</td>
    <td>1.2.4</td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>Beginning of this chapter or previous chapter</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [ Up ] </td>
    <td align="center">Up</td>
    <td>Up section</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>Next chapter</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [Top] </td>
    <td align="center">Top</td>
    <td>Cover (top) of document</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Contents] </td>
    <td align="center">Contents</td>
    <td>Table of contents</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>Index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">About</td>
    <td>About (help)</td>
    <td> &nbsp; </td>
  </tr>
</table>

<p>
  where the <strong> Example </strong> assumes that the current position is at <strong> Subsubsection One-Two-Three </strong> of a document of the following structure:
</p>

<ul>
  <li> 1. Section One
    <ul>
      <li>1.1 Subsection One-One
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Subsection One-Two
        <ul>
          <li>1.2.1 Subsubsection One-Two-One</li>
          <li>1.2.2 Subsubsection One-Two-Two</li>
          <li>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp;
            <strong>&lt;== Current Position </strong></li>
          <li>1.2.4 Subsubsection One-Two-Four</li>
        </ul>
      </li>
      <li>1.3 Subsection One-Three
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Subsection One-Four</li>
    </ul>
  </li>
</ul>

<hr size="1">
<p>
 <font size="-1">
  This document was generated by <em>StatSoft</em> on <em>February 22, 2017</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
 </font>
 <br>

</p>
</body>
</html>
