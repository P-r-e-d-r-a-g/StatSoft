<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- This manual is for GNU PSPP version 0.10.4,
software for statistical analysis.

Copyright C 1997, 1998, 2004, 2005, 2007, 2010, 2014, 2015, 2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on February 22, 2017 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>PSPP</title>

<meta name="description" content="PSPP">
<meta name="keywords" content="PSPP">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Top"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="GNU-PSPP-Developers-Guide"></a>
<h1 class="settitle">GNU PSPP Developers Guide</h1>

<p>This manual is for GNU PSPP version 0.10.4,
software for statistical analysis.
</p>
<p>Copyright &copy; 1997, 1998, 2004, 2005, 2007, 2010, 2014, 2015, 2016 Free Software Foundation, Inc.
</p>
<blockquote><p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled &quot;GNU
Free Documentation License&quot;.
</p></blockquote>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Introduction">1. Introduction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Introduction to PSPP development.
</td></tr>
<tr><td align="left" valign="top"><a href="#Basic-Concepts">2. Basic Concepts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Data structures and concepts.
</td></tr>
<tr><td align="left" valign="top"><a href="#Parsing-Command-Syntax">3. Parsing Command Syntax</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      How to parse command syntax.
</td></tr>
<tr><td align="left" valign="top"><a href="#Processing-Data">4. Processing Data</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Data input, output, and processing.
</td></tr>
<tr><td align="left" valign="top"><a href="#Presenting-Output">5. Presenting Output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Producing machine- and human-readable output.
</td></tr>
<tr><td align="left" valign="top"><a href="#Internationalisation">6. Internationalisation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Dealing with locale issues.
</td></tr>
<tr><td align="left" valign="top"><a href="#Function-Index">7. Function Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Index of PSPP functions.
</td></tr>
<tr><td align="left" valign="top"><a href="#Concept-Index">8. Concept Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Index of concepts.
</td></tr>
<tr><td align="left" valign="top"><a href="#Portable-File-Format">A. Portable File Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Format of PSPP portable files.
</td></tr>
<tr><td align="left" valign="top"><a href="#System-File-Format">B. System File Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Format of PSPP system files.
</td></tr>
<tr><td align="left" valign="top"><a href="#SPSS_002fPC_002b-System-File-Format">C. SPSS/PC+ System File Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Format of SPSS/PC+ system files.
</td></tr>
<tr><td align="left" valign="top"><a href="#SPSS-Viewer-File-Format">D. SPSS Viewer File Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Format of SPSS Viewer (SPV) files.
</td></tr>
<tr><td align="left" valign="top"><a href="#Encrypted-File-Wrappers">E. Encrypted File Wrappers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Common wrapper for encrypted SPSS files.
</td></tr>
<tr><td align="left" valign="top"><a href="#q2c-Input-Format">F. <code>q2c</code> Input Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Format of syntax accepted by q2c.
</td></tr>
<tr><td align="left" valign="top"><a href="#GNU-Free-Documentation-License">G. GNU Free Documentation License</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> License for copying this manual.
</td></tr>
</table>

<hr size="1">
<a name="Introduction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Introduction-1"></a>
<h1 class="chapter">1. Introduction</h1>

<p>This manual is a guide to PSPP internals.  Its intended audience is
developers who wish to modify or extend PSPP&rsquo;s capabilities.  The use
of PSPP is documented in a separate manual.  See <a href="pspp.html#Top">(pspp)Top</a> section &lsquo;Introduction&rsquo; in <cite>PSPP Users Guide</cite>.
</p>
<p>This manual is both a tutorial and a reference manual for PSPP
developers.  It is ultimately intended to cover everything that
developers who wish to implement new PSPP statistical procedures and
other commands should know.  It is currently incomplete, partly
because existing developers have not yet spent enough time on writing,
and partly because the interfaces not yet documented are not yet
mature enough to making documenting them worthwhile.
</p>
<p>PSPP developers should have some familiarity with the basics of PSPP
from a user&rsquo;s perspective.  This manual attempts to refer to the PSPP
user manual&rsquo;s descriptions of concepts that PSPP users should find
familiar at the time of their first reference.  However, it is
probably a good idea to at least skim the PSPP manual before reading
this one, if you are not already familiar with PSPP.
</p><hr size="6">
<a name="Basic-Concepts"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Introduction" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Basic-Concepts-1"></a>
<h1 class="chapter">2. Basic Concepts</h1>

<p>This chapter introduces basic data structures and other concepts
needed for developing in PSPP.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Values">2.1 Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Input-and-Output-Formats">2.2 Input and Output Formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#User_002dMissing-Values">2.3 User-Missing Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels">2.4 Value Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variables">2.5 Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionaries">2.6 Dictionaries</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Coding-Conventions">2.7 Coding Conventions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Cases">2.8 Cases</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Data-Sets">2.9 Data Sets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Pools">2.10 Pools</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Basic-Concepts" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Numeric-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Values-1"></a>
<h2 class="section">2.1 Values</h2>

<a name="index-value"></a>
<p>The unit of data in PSPP is a <em>value</em>.
</p>
<a name="index-width"></a>
<a name="index-string-value"></a>
<a name="index-numeric-value"></a>
<a name="index-MAX_005fSTRING"></a>
<p>Values are classified by <em>type</em> and <em>width</em>.  The
type of a value is either <em>numeric</em> or <em>string</em> (sometimes
called alphanumeric).  The width of a string value ranges from 1 to
<code>MAX_STRING</code> bytes.  The width of a numeric value is artificially
defined to be 0; thus, the type of a value can be inferred from its
width.
</p>
<p>Some support is provided for working with value types and widths, in
&lsquo;<tt>data/val-type.h</tt>&rsquo;:
</p>
<dl>
<dt><a name="index-MAX_005fSTRING-1"></a><u>Macro:</u> int <b>MAX_STRING</b></dt>
<dd><p>Maximum width of a string value, in bytes, currently 32,767.
</p></dd></dl>

<dl>
<dt><a name="index-val_005ftype_005fis_005fvalid"></a><u>Function:</u> bool <b>val_type_is_valid</b><i> (enum val_type <var>val_type</var>)</i></dt>
<dd><p>Returns true if <var>val_type</var> is a valid value type, that is,
either <code>VAL_NUMERIC</code> or <code>VAL_STRING</code>.  Useful for
assertions.
</p></dd></dl>

<dl>
<dt><a name="index-val_005ftype_005ffrom_005fwidth"></a><u>Function:</u> enum val_type <b>val_type_from_width</b><i> (int <var>width</var>)</i></dt>
<dd><p>Returns <code>VAL_NUMERIC</code> if <var>width</var> is 0 and thus represents the
width of a numeric value, otherwise <code>VAL_STRING</code> to indicate that
<var>width</var> is the width of a string value.
</p></dd></dl>

<p>The following subsections describe how values of each type are
represented.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Numeric-Values">2.1.1 Numeric Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#String-Values">2.1.2 String Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Numeric-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#String-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Numeric-Values-1"></a>
<h3 class="subsection">2.1.1 Numeric Values</h3>

<p>A value known to be numeric at compile time is represented as a
<code>double</code>.  PSPP provides three values of <code>double</code> for
special purposes, defined in &lsquo;<tt>data/val-type.h</tt>&rsquo;:
</p>
<dl>
<dt><a name="index-SYSMIS"></a><u>Macro:</u> double <b>SYSMIS</b></dt>
<dd><p>The <em>system-missing value</em>, used to represent a datum whose true
value is unknown, such as a survey question that was not answered by
the respondent, or undefined, such as the result of division by zero.
PSPP propagates the system-missing value through calculations and
compensates for missing values in statistical analyses.  See <a href="pspp.html#Missing-Observations">(pspp)Missing Observations</a> section &lsquo;Missing Observations&rsquo; in <cite>PSPP Users Guide</cite>, for a PSPP user&rsquo;s view of
missing values.
</p>
<p>PSPP currently defines <code>SYSMIS</code> as <code>-DBL_MAX</code>, that is, the
greatest finite negative value of <code>double</code>.  It is best not to
depend on this definition, because PSPP may transition to using an
IEEE NaN (not a number) instead at some point in the future.
</p></dd></dl>

<dl>
<dt><a name="index-LOWEST"></a><u>Macro:</u> double <b>LOWEST</b></dt>
<dt><a name="index-HIGHEST"></a><u>Macro:</u> double <b>HIGHEST</b></dt>
<dd><p>The greatest finite negative (except for <code>SYSMIS</code>) and positive
values of <code>double</code>, respectively.  These values do not ordinarily
appear in user data files.  Instead, they are used to implement
endpoints of open-ended ranges that are occasionally permitted in PSPP
syntax, e.g. <code>5 THRU HI</code> as a range of missing values
(see <a href="pspp.html#MISSING-VALUES">(pspp)MISSING VALUES</a> section &lsquo;MISSING VALUES&rsquo; in <cite>PSPP Users Guide</cite>).
</p></dd></dl>

<hr size="6">
<a name="String-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Numeric-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Runtime-Typed-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="String-Values-1"></a>
<h3 class="subsection">2.1.2 String Values</h3>

<p>A value known at compile time to have string type is represented as an
array of <code>char</code>.  String values do not necessarily represent
readable text strings and may contain arbitrary 8-bit data, including
null bytes, control codes, and bytes with the high bit set.  Thus,
string values are not null-terminated strings, but rather opaque
arrays of bytes.
</p>
<p><code>SYSMIS</code>, <code>LOWEST</code>, and <code>HIGHEST</code> have no equivalents
as string values.  Usually, PSPP fills an unknown or undefined string
values with spaces, but PSPP does not treat such a string as a special
case when it processes it later.
</p>
<a name="index-MAX_005fSTRING-2"></a>
<p><code>MAX_STRING</code>, the maximum length of a string value, is defined in
&lsquo;<tt>data/val-type.h</tt>&rsquo;.
</p>
<hr size="6">
<a name="Runtime-Typed-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#String-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Runtime-Typed-Values-1"></a>
<h3 class="subsection">2.1.3 Runtime Typed Values</h3>

<p>When a value&rsquo;s type is only known at runtime, it is often represented
as a <code>union value</code>, defined in &lsquo;<tt>data/value.h</tt>&rsquo;.  A <code>union value</code>
does not identify the type or width of the data it contains.  Code
that works with <code>union values</code>s must therefore have external knowledge
of its content, often through the type and width of a
<code>struct variable</code> (see section <a href="#Variables">Variables</a>).
</p>
<p><code>union value</code> has one member that clients are permitted to access
directly, a <code>double</code> named &lsquo;<samp>f</samp>&rsquo; that stores the content of a
numeric <code>union value</code>.  It has other members that store the content of
string <code>union value</code>, but client code should use accessor functions
instead of referring to these directly.
</p>
<p>PSPP provides some functions for working with <code>union value</code>s.  The
most useful are described below.  To use these functions, recall that
a numeric value has a width of 0.
</p>
<dl>
<dt><a name="index-value_005finit"></a><u>Function:</u> void <b>value_init</b><i> (union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p>Initializes <var>value</var> as a value of the given <var>width</var>.  After
initialization, the data in <var>value</var> are indeterminate; the caller
is responsible for storing initial data in it.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fdestroy"></a><u>Function:</u> void <b>value_destroy</b><i> (union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p>Frees auxiliary storage associated with <var>value</var>, which must have
the given <var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fneeds_005finit"></a><u>Function:</u> bool <b>value_needs_init</b><i> (int <var>width</var>)</i></dt>
<dd><p>For some widths, <code>value_init</code> and <code>value_destroy</code> do not
actually do anything, because no additional storage is needed beyond
the size of <code>union value</code>.  This function returns true if <var>width</var>
is such a width, which case there is no actual need to call those
functions.  This can be a useful optimization if a large number of
<code>union value</code>s of such a width are to be initialized or destroyed.
</p>
<p>This function returns false if <code>value_init</code> and
<code>value_destroy</code> are actually required for the given <var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fnum"></a><u>Function:</u> double <b>value_num</b><i> (const union value *<var>value</var>)</i></dt>
<dd><p>Returns the numeric value in <var>value</var>, which must have been
initialized as a numeric value.  Equivalent to <code><var>value</var>-&gt;f</code>.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fstr"></a><u>Function:</u> const char * <b>value_str</b><i> (const union value *<var>value</var>, int <var>width</var>)</i></dt>
<dt><a name="index-value_005fstr_005frw"></a><u>Function:</u> char * <b>value_str_rw</b><i> (union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p>Returns the string value in <var>value</var>, which must have been
initialized with positive width <var>width</var>.  The string returned is
not null-terminated.  Only <var>width</var> bytes of returned data may be
accessed.
</p>
<p>The two different functions exist only for <code>const</code>-correctness.
Otherwise they are identical.
</p>
<p>It is important that <var>width</var> be the correct value that was passed
to <code>value_init</code>.  Passing a smaller or larger value (e.g.
because that number of bytes will be accessed) will not always work
and should be avoided.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fcopy"></a><u>Function:</u> void <b>value_copy</b><i> (union value *<var>dst</var>,                              const union value *<var>src</var>,                              int <var>width</var>)</i></dt>
<dd><p>Copies the contents of <code>union value</code> <var>src</var> to <var>dst</var>.  Both
<var>dst</var> and <var>src</var> must have been initialized with the specified
<var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fset_005fmissing"></a><u>Function:</u> void <b>value_set_missing</b><i> (union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p>Sets <var>value</var> to <code>SYSMIS</code> if it is numeric or to all spaces if
it is alphanumeric, according to <var>width</var>.  <var>value</var> must have
been initialized with the specified <var>width</var>.
</p></dd></dl>

<p><a name="value_005fis_005fresizable"></a>
</p><dl>
<dt><a name="index-value_005fis_005fresizable"></a><u>Function:</u> bool <b>value_is_resizable</b><i> (const union value *<var>value</var>, int <var>old_width</var>, int <var>new_width</var>)</i></dt>
<dd><p>Determines whether <var>value</var>, which must have been initialized with
the specified <var>old_width</var>, may be resized to <var>new_width</var>.
Resizing is possible if the following criteria are met.  First,
<var>old_width</var> and <var>new_width</var> must be both numeric or both
string widths.  Second, if <var>new_width</var> is a short string width and
less than <var>old_width</var>, resizing is allowed only if bytes
<var>new_width</var> through <var>old_width</var> in <var>value</var> contain only
spaces.
</p>
<p>These rules are part of those used by <code>mv_is_resizable</code> and
<code>val_labs_can_set_width</code>.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fresize"></a><u>Function:</u> void <b>value_resize</b><i> (union value *<var>value</var>, int <var>old_width</var>, int <var>new_width</var>)</i></dt>
<dd><p>Resizes <var>value</var> from <var>old_width</var> to <var>new_width</var>, which
must be allowed by the rules stated above.  <var>value</var> must have been
initialized with the specified <var>old_width</var> before calling this
function.  After resizing, <var>value</var> has width <var>new_width</var>.
</p>
<p>If <var>new_width</var> is greater than <var>old_width</var>, <var>value</var> will
be padded on the right with spaces to the new width.  If
<var>new_width</var> is less than <var>old_width</var>, the rightmost bytes of
<var>value</var> are truncated.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fequal"></a><u>Function:</u> bool <b>value_equal</b><i> (const union value *<var>a</var>, const union value *<var>b</var>, int <var>width</var>)</i></dt>
<dd><p>Compares of <var>a</var> and <var>b</var>, which must both have width
<var>width</var>.  Returns true if their contents are the same, false if
they differ.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fcompare_005f3way"></a><u>Function:</u> int <b>value_compare_3way</b><i> (const union value *<var>a</var>, const union value *<var>b</var>, int <var>width</var>)</i></dt>
<dd><p>Compares of <var>a</var> and <var>b</var>, which must both have width
<var>width</var>.  Returns -1 if <var>a</var> is less than <var>b</var>, 0 if they
are equal, or 1 if <var>a</var> is greater than <var>b</var>.
</p>
<p>Numeric values are compared numerically, with <code>SYSMIS</code> comparing
less than any real number.  String values are compared
lexicographically byte-by-byte.
</p></dd></dl>

<dl>
<dt><a name="index-value_005fhash"></a><u>Function:</u> size_t <b>value_hash</b><i> (const union value *<var>value</var>, int <var>width</var>, unsigned int <var>basis</var>)</i></dt>
<dd><p>Computes and returns a hash of <var>value</var>, which must have the
specified <var>width</var>.  The value in <var>basis</var> is folded into the
hash.
</p></dd></dl>

<hr size="6">
<a name="Input-and-Output-Formats"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Runtime-Typed-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Constructing-and-Verifying-Formats" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Input-and-Output-Formats-1"></a>
<h2 class="section">2.2 Input and Output Formats</h2>

<p>Input and output formats specify how to convert data fields to and
from data values (see <a href="pspp.html#Input-and-Output-Formats">(pspp)Input and Output Formats</a> section &lsquo;Input and Output Formats&rsquo; in <cite>PSPP Users Guide</cite>).  PSPP uses <code>struct fmt_spec</code> to represent input and output
formats.
</p>
<p>Function prototypes and other declarations related to formats are in
the &lsquo;<tt>&lt;data/format.h&gt;</tt>&rsquo; header.
</p>
<dl>
<dt><a name="index-struct-fmt_005fspec"></a><u>Structure:</u> <b>struct fmt_spec</b></dt>
<dd><p>An input or output format, with the following members:
</p>
<dl compact="compact">
<dt> <code>enum fmt_type type</code></dt>
<dd><p>The format type (see below).
</p>
</dd>
<dt> <code>int w</code></dt>
<dd><p>Field width, in bytes.  The width of numeric fields is always between
1 and 40 bytes, and the width of string fields is always between 1 and
65534 bytes.  However, many individual types of formats place stricter
limits on field width (see <a href="#fmt_005fmax_005finput_005fwidth">fmt_max_input_width</a>,
<a href="#fmt_005fmax_005foutput_005fwidth">fmt_max_output_width</a>).
</p>
</dd>
<dt> <code>int d</code></dt>
<dd><p>Number of decimal places, in character positions.  For format types
that do not allow decimal places to be specified, this value must be
0.  Format types that do allow decimal places have type-specific and
often width-specific restrictions on <code>d</code> (see
<a href="#fmt_005fmax_005finput_005fdecimals">fmt_max_input_decimals</a>, <a href="#fmt_005fmax_005foutput_005fdecimals">fmt_max_output_decimals</a>).
</p></dd>
</dl>
</dd></dl>

<dl>
<dt><a name="index-enum-fmt_005ftype"></a><u>Enumeration:</u> <b>enum fmt_type</b></dt>
<dd><p>An enumerated type representing an input or output format type.  Each
PSPP input and output format has a corresponding enumeration constant
prefixed by &lsquo;<samp>FMT</samp>&rsquo;: <code>FMT_F</code>, <code>FMT_COMMA</code>,
<code>FMT_DOT</code>, and so on.
</p></dd></dl>

<p>The following sections describe functions for manipulating formats and
the data in fields represented by formats.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Format-Utility-Functions">2.2.2 Format Utility Functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Formatted-Data-Input-and-Output">2.2.5 Formatted Data Input and Output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Constructing-and-Verifying-Formats"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Format-Utility-Functions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Constructing-and-Verifying-Formats-1"></a>
<h3 class="subsection">2.2.1 Constructing and Verifying Formats</h3>

<p>These functions construct <code>struct fmt_spec</code>s and verify that they are
valid.
</p>


<dl>
<dt><a name="index-fmt_005ffor_005finput"></a><u>Function:</u> struct fmt_spec <b>fmt_for_input</b><i> (enum fmt_type <var>type</var>, int <var>w</var>, int <var>d</var>)</i></dt>
<dt><a name="index-fmt_005ffor_005foutput"></a><u>Function:</u> struct fmt_spec <b>fmt_for_output</b><i> (enum fmt_type <var>type</var>, int <var>w</var>, int <var>d</var>)</i></dt>
<dd><p>Constructs a <code>struct fmt_spec</code> with the given <var>type</var>, <var>w</var>, and
<var>d</var>, asserts that the result is a valid input (or output) format,
and returns it.
</p></dd></dl>

<p><a name="fmt_005ffor_005foutput_005ffrom_005finput"></a>
</p><dl>
<dt><a name="index-fmt_005ffor_005foutput_005ffrom_005finput"></a><u>Function:</u> struct fmt_spec <b>fmt_for_output_from_input</b><i> (const struct fmt_spec *<var>input</var>)</i></dt>
<dd><p>Given <var>input</var>, which must be a valid input format, returns the
equivalent output format.  See <a href="pspp.html#Input-and-Output-Formats">(pspp)Input and Output Formats</a> section &lsquo;Input and Output Formats&rsquo; in <cite>PSPP Users Guide</cite>, for the rules for converting input formats into output
formats.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fdefault_005ffor_005fwidth"></a><u>Function:</u> struct fmt_spec <b>fmt_default_for_width</b><i> (int <var>width</var>)</i></dt>
<dd><p>Returns the default output format for a variable of the given
<var>width</var>.  For a numeric variable, this is F8.2 format; for a
string variable, it is the A format of the given <var>width</var>.
</p></dd></dl>

<p>The following functions check whether a <code>struct fmt_spec</code> is valid for
various uses and return true if so, false otherwise.  When any of them
returns false, it also outputs an explanatory error message using
<code>msg</code>.  To suppress error output, enclose a call to one of these
functions by a <code>msg_disable</code>/<code>msg_enable</code> pair.
</p>
<dl>
<dt><a name="index-fmt_005fcheck"></a><u>Function:</u> bool <b>fmt_check</b><i> (const struct fmt_spec *<var>format</var>, bool <var>for_input</var>)</i></dt>
<dt><a name="index-fmt_005fcheck_005finput"></a><u>Function:</u> bool <b>fmt_check_input</b><i> (const struct fmt_spec *<var>format</var>)</i></dt>
<dt><a name="index-fmt_005fcheck_005foutput"></a><u>Function:</u> bool <b>fmt_check_output</b><i> (const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Checks whether <var>format</var> is a valid input format (for
<code>fmt_check_input</code>, or <code>fmt_check</code> if <var>for_input</var>) or
output format (for <code>fmt_check_output</code>, or <code>fmt_check</code> if not
<var>for_input</var>).
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fcheck_005ftype_005fcompat"></a><u>Function:</u> bool <b>fmt_check_type_compat</b><i> (const struct fmt_spec *<var>format</var>, enum val_type <var>type</var>)</i></dt>
<dd><p>Checks whether <var>format</var> matches the value type <var>type</var>, that
is, if <var>type</var> is <code>VAL_NUMERIC</code> and <var>format</var> is a numeric
format or <var>type</var> is <code>VAL_STRING</code> and <var>format</var> is a string
format.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fcheck_005fwidth_005fcompat"></a><u>Function:</u> bool <b>fmt_check_width_compat</b><i> (const struct fmt_spec *<var>format</var>, int <var>width</var>)</i></dt>
<dd><p>Checks whether <var>format</var> may be used as an output format for a
value of the given <var>width</var>.
</p>
<p><code>fmt_var_width</code>, described in
the following section, can be also be used to determine the value
width needed by a format.
</p></dd></dl>

<hr size="6">
<a name="Format-Utility-Functions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Constructing-and-Verifying-Formats" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Obtaining-Properties-of-Format-Types" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Format-Utility-Functions-1"></a>
<h3 class="subsection">2.2.2 Format Utility Functions</h3>

<p>These functions work with <code>struct fmt_spec</code>s.
</p>
<dl>
<dt><a name="index-fmt_005fvar_005fwidth"></a><u>Function:</u> int <b>fmt_var_width</b><i> (const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Returns the width for values associated with <var>format</var>.  If
<var>format</var> is a numeric format, the width is 0; if <var>format</var> is
an A format, then the width <code><var>format</var>-&gt;w</code>; otherwise,
<var>format</var> is an AHEX format and its width is <code><var>format</var>-&gt;w
/ 2</code>.
</p></dd></dl>

<dl>
<dt><a name="index-_002afmt_005fto_005fstring"></a><u>Function:</u> char <b>*fmt_to_string</b><i> (const struct fmt_spec *<var>format</var>, char <var>s</var>[FMT_STRING_LEN_MAX + 1])</i></dt>
<dd><p>Converts <var>format</var> to a human-readable format specifier in <var>s</var>
and returns <var>s</var>.  <var>format</var> need not be a valid input or output
format specifier, e.g. it is allowed to have an excess width or
decimal places.  In particular, if <var>format</var> has decimals, they are
included in the output string, even if <var>format</var>&rsquo;s type does not
allow decimals, to allow accurately presenting incorrect formats to
the user.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fequal"></a><u>Function:</u> bool <b>fmt_equal</b><i> (const struct fmt_spec *<var>a</var>, const struct fmt_spec *<var>b</var>)</i></dt>
<dd><p>Compares <var>a</var> and <var>b</var> memberwise and returns true if they are
identical, false otherwise.  <var>format</var> need not be a valid input or
output format specifier.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fresize"></a><u>Function:</u> void <b>fmt_resize</b><i> (struct fmt_spec *<var>fmt</var>, int <var>width</var>)</i></dt>
<dd><p>Sets the width of <var>fmt</var> to a valid format for a  <code>union value</code> of size <var>width</var>.
</p></dd></dl>

<hr size="6">
<a name="Obtaining-Properties-of-Format-Types"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Format-Utility-Functions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Numeric-Formatting-Styles" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Obtaining-Properties-of-Format-Types-1"></a>
<h3 class="subsection">2.2.3 Obtaining Properties of Format Types</h3>

<p>These functions work with <code>enum fmt_type</code>s instead of the higher-level
<code>struct fmt_spec</code>s.  Their primary purpose is to report properties of
each possible format type, which in turn allows clients to abstract
away many of the details of the very heterogeneous requirements of
each format type.
</p>
<p>The first group of functions works with format type names.
</p>
<dl>
<dt><a name="index-char"></a><u>Function:</u> const <b>char</b><i> *fmt_name (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the name for the given <var>type</var>, e.g. <code>&quot;COMMA&quot;</code> for
<code>FMT_COMMA</code>.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005ffrom_005fname"></a><u>Function:</u> bool <b>fmt_from_name</b><i> (const char *<var>name</var>, enum fmt_type *<var>type</var>)</i></dt>
<dd><p>Tries to find the <code>enum fmt_type</code> associated with <var>name</var>.  If
successful, sets <code>*<var>type</var></code> to the type and returns true;
otherwise, returns false without modifying <code>*<var>type</var></code>.
</p></dd></dl>

<p>The functions below query basic limits on width and decimal places for
each kind of format.
</p>
<dl>
<dt><a name="index-fmt_005ftakes_005fdecimals"></a><u>Function:</u> bool <b>fmt_takes_decimals</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns true if a format of the given <var>type</var> is allowed to have a
nonzero number of decimal places (the <code>d</code> member of
<code>struct fmt_spec</code>), false if not.
</p></dd></dl>

<p><a name="fmt_005fmin_005finput_005fwidth"></a>
<a name="fmt_005fmax_005finput_005fwidth"></a>
<a name="fmt_005fmin_005foutput_005fwidth"></a>
<a name="fmt_005fmax_005foutput_005fwidth"></a>
</p><dl>
<dt><a name="index-fmt_005fmin_005finput_005fwidth"></a><u>Function:</u> int <b>fmt_min_input_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dt><a name="index-fmt_005fmax_005finput_005fwidth"></a><u>Function:</u> int <b>fmt_max_input_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dt><a name="index-fmt_005fmin_005foutput_005fwidth"></a><u>Function:</u> int <b>fmt_min_output_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dt><a name="index-fmt_005fmax_005foutput_005fwidth"></a><u>Function:</u> int <b>fmt_max_output_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the minimum or maximum width (the <code>w</code> member of
<code>struct fmt_spec</code>) allowed for an input or output format of the
specified <var>type</var>.
</p></dd></dl>

<p><a name="fmt_005fmax_005finput_005fdecimals"></a>
<a name="fmt_005fmax_005foutput_005fdecimals"></a>
</p><dl>
<dt><a name="index-fmt_005fmax_005finput_005fdecimals"></a><u>Function:</u> int <b>fmt_max_input_decimals</b><i> (enum fmt_type <var>type</var>, int <var>width</var>)</i></dt>
<dt><a name="index-fmt_005fmax_005foutput_005fdecimals"></a><u>Function:</u> int <b>fmt_max_output_decimals</b><i> (enum fmt_type <var>type</var>, int <var>width</var>)</i></dt>
<dd><p>Returns the maximum number of decimal places allowed for an input or
output format, respectively, of the given <var>type</var> and <var>width</var>.
Returns 0 if the specified <var>type</var> does not allow any decimal
places or if <var>width</var> is too narrow to allow decimal places.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fstep_005fwidth"></a><u>Function:</u> int <b>fmt_step_width</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the &ldquo;width step&rdquo; for a <code>struct fmt_spec</code> of the given
<var>type</var>.  A <code>struct fmt_spec</code>&rsquo;s width must be a multiple of its
type&rsquo;s width step.  Most format types have a width step of 1, so that
their formats&rsquo; widths may be any integer within the valid range, but
hexadecimal numeric formats and AHEX string formats have a width step
of 2.
</p></dd></dl>

<p>These functions allow clients to broadly determine how each kind of
input or output format behaves.
</p>
<dl>
<dt><a name="index-fmt_005fis_005fstring"></a><u>Function:</u> bool <b>fmt_is_string</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dt><a name="index-fmt_005fis_005fnumeric"></a><u>Function:</u> bool <b>fmt_is_numeric</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns true if <var>type</var> is a format for numeric or string values,
respectively, false otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fcategory"></a><u>Function:</u> enum <b>fmt_category</b><i> fmt_get_category (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the category within which <var>type</var> falls.
</p>
<dl>
<dt><a name="index-enum-fmt_005fcategory"></a><u>Enumeration:</u> <b>enum fmt_category</b></dt>
<dd><p>A group of format types.  Format type categories correspond to the
input and output categories described in the PSPP user documentation
(see <a href="pspp.html#Input-and-Output-Formats">(pspp)Input and Output Formats</a> section &lsquo;Input and Output Formats&rsquo; in <cite>PSPP Users Guide</cite>).
</p>
<p>Each format is in exactly one category.  The categories have bitwise
disjoint values to make it easy to test whether a format type is in
one of multiple categories, e.g.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">if (fmt_get_category (type) &amp; (FMT_CAT_DATE | FMT_CAT_TIME))
  {
    /* &hellip;<span class="roman"><code>type</code> is a date or time format</span>&hellip; */
  }
</pre></td></tr></table>

<p>The format categories are:
</p><dl compact="compact">
<dt> <code>FMT_CAT_BASIC</code></dt>
<dd><p>Basic numeric formats.
</p>
</dd>
<dt> <code>FMT_CAT_CUSTOM</code></dt>
<dd><p>Custom currency formats.
</p>
</dd>
<dt> <code>FMT_CAT_LEGACY</code></dt>
<dd><p>Legacy numeric formats.
</p>
</dd>
<dt> <code>FMT_CAT_BINARY</code></dt>
<dd><p>Binary formats.
</p>
</dd>
<dt> <code>FMT_CAT_HEXADECIMAL</code></dt>
<dd><p>Hexadecimal formats.
</p>
</dd>
<dt> <code>FMT_CAT_DATE</code></dt>
<dd><p>Date formats.
</p>
</dd>
<dt> <code>FMT_CAT_TIME</code></dt>
<dd><p>Time formats.
</p>
</dd>
<dt> <code>FMT_CAT_DATE_COMPONENT</code></dt>
<dd><p>Date component formats.
</p>
</dd>
<dt> <code>FMT_CAT_STRING</code></dt>
<dd><p>String formats.
</p></dd>
</dl>
</dd></dl>
</dd></dl>

<p>The PSPP input and output routines use the following pair of functions
to convert <code>enum fmt_type</code>s to and from the separate set of codes used
in system and portable files:
</p>
<dl>
<dt><a name="index-fmt_005fto_005fio"></a><u>Function:</u> int <b>fmt_to_io</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the format code used in system and portable files that
corresponds to <var>type</var>.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005ffrom_005fio"></a><u>Function:</u> bool <b>fmt_from_io</b><i> (int <var>io</var>, enum fmt_type *<var>type</var>)</i></dt>
<dd><p>Converts <var>io</var>, a format code used in system and portable files,
into a <code>enum fmt_type</code> in <code>*<var>type</var></code>.  Returns true if
successful, false if <var>io</var> is not valid.
</p></dd></dl>

<p>These functions reflect the relationship between input and output
formats.
</p>
<dl>
<dt><a name="index-fmt_005ftype"></a><u>Function:</u> enum <b>fmt_type</b><i> fmt_input_to_output (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the output format type that is used by default by DATA LIST
and other input procedures when <var>type</var> is specified as an input
format.  The conversion from input format to output format is more
complicated than simply changing the format.
See <a href="#fmt_005ffor_005foutput_005ffrom_005finput">fmt_for_output_from_input</a>, for a function that performs the
entire conversion.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fusable_005ffor_005finput"></a><u>Function:</u> bool <b>fmt_usable_for_input</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns true if <var>type</var> may be used as an input format type, false
otherwise.  The custom currency formats, in particular, may be used
for output but not for input.
</p>
<p>All format types are valid for output.
</p></dd></dl>

<p>The final group of format type property functions obtain
human-readable templates that illustrate the formats graphically.
</p>
<dl>
<dt><a name="index-char-1"></a><u>Function:</u> const <b>char</b><i> *fmt_date_template (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns a formatting template for <var>type</var>, which must be a date or
time format type.  These formats are used by <code>data_in</code> and
<code>data_out</code> to guide parsing and formatting date and time data.
</p></dd></dl>

<dl>
<dt><a name="index-_002afmt_005fdollar_005ftemplate"></a><u>Function:</u> char <b>*fmt_dollar_template</b><i> (const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Returns a string of the form <code>$#,###.##</code> according to
<var>format</var>, which must be of type <code>FMT_DOLLAR</code>.  The caller
must free the string with <code>free</code>.
</p></dd></dl>

<hr size="6">
<a name="Numeric-Formatting-Styles"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Obtaining-Properties-of-Format-Types" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Formatted-Data-Input-and-Output" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Numeric-Formatting-Styles-1"></a>
<h3 class="subsection">2.2.4 Numeric Formatting Styles</h3>

<p>Each of the basic numeric formats (F, E, COMMA, DOT, DOLLAR, PCT) and
custom currency formats (CCA, CCB, CCC, CCD, CCE) has an associated
numeric formatting style, represented by <code>struct fmt_number_style</code>.
Input and output conversion of formats that have numeric styles is
determined mainly by the style, although the formatting rules have
special cases that are not represented within the style.
</p>
<dl>
<dt><a name="index-struct-fmt_005fnumber_005fstyle"></a><u>Structure:</u> <b>struct fmt_number_style</b></dt>
<dd><p>A structure type with the following members:
</p>
<dl compact="compact">
<dt> <code>struct substring neg_prefix</code></dt>
<dt> <code>struct substring prefix</code></dt>
<dt> <code>struct substring suffix</code></dt>
<dt> <code>struct substring neg_suffix</code></dt>
<dd><p>A set of strings used a prefix to negative numbers, a prefix to every
number, a suffix to every number, and a suffix to negative numbers,
respectively.  Each of these strings is no more than
<code>FMT_STYLE_AFFIX_MAX</code> bytes (currently 16) bytes in length.
These strings must be freed with <code>ss_dealloc</code> when no longer
needed.
</p>
</dd>
<dt> <code>decimal</code></dt>
<dd><p>The character used as a decimal point.  It must be either &lsquo;<samp>.</samp>&rsquo; or
&lsquo;<samp>,</samp>&rsquo;.
</p>
</dd>
<dt> <code>grouping</code></dt>
<dd><p>The character used for grouping digits to the left of the decimal
point.  It may be &lsquo;<samp>.</samp>&rsquo; or &lsquo;<samp>,</samp>&rsquo;, in which case it must not be
equal to <code>decimal</code>, or it may be set to 0 to disable grouping.
</p></dd>
</dl>
</dd></dl>

<p>The following functions are provided for working with numeric
formatting styles.
</p>
<dl>
<dt><a name="index-fmt_005fnumber_005fstyle_005finit"></a><u>Function:</u> void <b>fmt_number_style_init</b><i> (struct fmt_number_style *<var>style</var>)</i></dt>
<dd><p>Initialises a <code>struct fmt_number_style</code> with all of the
prefixes and suffixes set to the empty string, &lsquo;<samp>.</samp>&rsquo; as the decimal
point character, and grouping disables.
</p></dd></dl>


<dl>
<dt><a name="index-fmt_005fnumber_005fstyle_005fdestroy"></a><u>Function:</u> void <b>fmt_number_style_destroy</b><i> (struct fmt_number_style *<var>style</var>)</i></dt>
<dd><p>Destroys <var>style</var>, freeing its storage.
</p></dd></dl>

<dl>
<dt><a name="index-_002afmt_005fcreate"></a><u>Function:</u> struct fmt_number_style <b>*fmt_create</b><i> (void)</i></dt>
<dd><p>A function which creates an array of all the styles used by pspp, and 
calls fmt_number_style_init on each of them.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fdone"></a><u>Function:</u> void <b>fmt_done</b><i> (struct fmt_number_style *<var>styles</var>)</i></dt>
<dd><p>A wrapper function which takes an array of <code>struct fmt_number_style</code>, calls
fmt_number_style_destroy on each of them, and then frees the array.
</p></dd></dl>



<dl>
<dt><a name="index-fmt_005faffix_005fwidth"></a><u>Function:</u> int <b>fmt_affix_width</b><i> (const struct fmt_number_style *<var>style</var>)</i></dt>
<dd><p>Returns the total length of <var>style</var>&rsquo;s <code>prefix</code> and <code>suffix</code>.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fneg_005faffix_005fwidth"></a><u>Function:</u> int <b>fmt_neg_affix_width</b><i> (const struct fmt_number_style *<var>style</var>)</i></dt>
<dd><p>Returns the total length of <var>style</var>&rsquo;s <code>neg_prefix</code> and
<code>neg_suffix</code>.
</p></dd></dl>

<p>PSPP maintains a global set of number styles for each of the basic
numeric formats and custom currency formats.  The following functions
work with these global styles:
</p>
<dl>
<dt><a name="index-fmt_005fget_005fstyle"></a><u>Function:</u> const struct fmt_number_style * <b>fmt_get_style</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the numeric style for the given format <var>type</var>.
</p></dd></dl>

<dl>
<dt><a name="index-fmt_005fname"></a><u>Function:</u> const char * <b>fmt_name</b><i> (enum fmt_type <var>type</var>)</i></dt>
<dd><p>Returns the name of the given format <var>type</var>.
</p></dd></dl>



<hr size="6">
<a name="Formatted-Data-Input-and-Output"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Numeric-Formatting-Styles" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Input-and-Output-Formats" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Formatted-Data-Input-and-Output-1"></a>
<h3 class="subsection">2.2.5 Formatted Data Input and Output</h3>

<p>These functions provide the ability to convert data fields into
<code>union value</code>s and vice versa.
</p>
<dl>
<dt><a name="index-data_005fin"></a><u>Function:</u> bool <b>data_in</b><i> (struct substring <var>input</var>, const char *<var>encoding</var>, enum fmt_type <var>type</var>, int <var>implied_decimals</var>, int <var>first_column</var>, const struct dictionary *<var>dict</var>, union value *<var>output</var>, int <var>width</var>)</i></dt>
<dd><p>Parses <var>input</var> as a field containing data in the given format
<var>type</var>.  The resulting value is stored in <var>output</var>, which the
caller must have initialized with the given <var>width</var>.  For
consistency, <var>width</var> must be 0 if
<var>type</var> is a numeric format type and greater than 0 if <var>type</var>
is a string format type.
<var>encoding</var> should be set to indicate the character
encoding of <var>input</var>.
<var>dict</var> must be a pointer to the dictionary with which <var>output</var>
is associated.
</p>
<p>If <var>input</var> is the empty string (with length 0), <var>output</var> is
set to the value set on SET BLANKS (see <a href="pspp.html#SET-BLANKS">(pspp)SET BLANKS</a> section &lsquo;SET BLANKS&rsquo; in <cite>PSPP Users Guide</cite>) for a numeric value, or to all spaces for a string
value.  This applies regardless of the usual parsing requirements for
<var>type</var>.
</p>
<p>If <var>implied_decimals</var> is greater than zero, then the numeric
result is shifted right by <var>implied_decimals</var> decimal places if
<var>input</var> does not contain a decimal point character or an exponent.
Only certain numeric format types support implied decimal places; for
string formats and other numeric formats, <var>implied_decimals</var> has
no effect.  DATA LIST FIXED is the primary user of this feature
(see <a href="pspp.html#DATA-LIST-FIXED">(pspp)DATA LIST FIXED</a> section &lsquo;DATA LIST FIXED&rsquo; in <cite>PSPP Users Guide</cite>).  Other callers
should generally specify 0 for <var>implied_decimals</var>, to disable this
feature.
</p>
<p>When <var>input</var> contains invalid input data, <code>data_in</code> outputs a
message using <code>msg</code>.
If <var>first_column</var> is
nonzero, it is included in any such error message as the 1-based
column number of the start of the field.  The last column in the field
is calculated as <em><var>first_column</var> + <var>input</var> - 1</em>.  To
suppress error output, enclose the call to <code>data_in</code> by calls to
<code>msg_disable</code> and <code>msg_enable</code>.
</p>
<p>This function returns true on success, false if a message was output
(even if suppressed).  Overflow and underflow provoke warnings but are
not propagated to the caller as errors.
</p>
<p>This function is declared in &lsquo;<tt>data/data-in.h</tt>&rsquo;.
</p></dd></dl>

<dl>
<dt><a name="index-_002a"></a><u>Function:</u> char <b>*</b><i> data_out (const union value *<var>input</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dt><a name="index-_002a-1"></a><u>Function:</u> char <b>*</b><i> data_out_legacy (const union value *<var>input</var>, const char *<var>encoding</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Converts the data pointed to by <var>input</var> into a string value, which
will be encoded in UTF-8,  according to output format specifier <var>format</var>.
Format 
must be a valid output format.   The width of <var>input</var> is
inferred from <var>format</var> using an algorithm equivalent to
<code>fmt_var_width</code>.
</p>
<p>When <var>input</var> contains data that cannot be represented in the given
<var>format</var>, <code>data_out</code> may output a message using <code>msg</code>,
although the current implementation does not
consistently do so.  To suppress error output, enclose the call to
<code>data_out</code> by calls to <code>msg_disable</code> and <code>msg_enable</code>.
</p>
<p>This function is declared in &lsquo;<tt>data/data-out.h</tt>&rsquo;.
</p></dd></dl>

<hr size="6">
<a name="User_002dMissing-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Formatted-Data-Input-and-Output" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Testing-for-Missing-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="User_002dMissing-Values-1"></a>
<h2 class="section">2.3 User-Missing Values</h2>

<p>In addition to the system-missing value for numeric values, each
variable has a set of user-missing values (see <a href="pspp.html#MISSING-VALUES">(pspp)MISSING VALUES</a> section &lsquo;MISSING VALUES&rsquo; in <cite>PSPP Users Guide</cite>).  A set of user-missing values is
represented by <code>struct missing_values</code>.
</p>
<p>It is rarely necessary to interact directly with a
<code>struct missing_values</code> object.  Instead, the most common operation,
querying whether a particular value is a missing value for a given
variable, is most conveniently executed through functions on
<code>struct variable</code>.  See section <a href="#Variable-Missing-Values">Variable Missing Values</a>, for details.
</p>
<p>A <code>struct missing_values</code> is essentially a set of <code>union value</code>s that
have a common value width (see section <a href="#Values">Values</a>).  For a set of
missing values associated with a variable (the common case), the set&rsquo;s
width is the same as the variable&rsquo;s width.
</p>
<p>Function prototypes and other declarations related to missing values
are declared in &lsquo;<tt>data/missing-values.h</tt>&rsquo;.
</p>
<dl>
<dt><a name="index-struct-missing_005fvalues"></a><u>Structure:</u> <b>struct missing_values</b></dt>
<dd><p>Opaque type that represents a set of missing values.
</p></dd></dl>

<p>The contents of a set of missing values is subject to some
restrictions.  Regardless of width, a set of missing values is allowed
to be empty.  A set of numeric missing values may contain up to three
discrete numeric values, or a range of numeric values (which includes
both ends of the range), or a range plus one discrete numeric value.
A set of string missing values may contain up to three discrete string
values (with the same width as the set), but ranges are not supported.
</p>
<p>In addition, values in string missing values wider than
<code>MV_MAX_STRING</code> bytes may contain non-space characters only in
their first <code>MV_MAX_STRING</code> bytes; all the bytes after the first
<code>MV_MAX_STRING</code> must be spaces.  See <a href="#mv_005fis_005facceptable">mv_is_acceptable</a>, for a
function that tests a value against these constraints.
</p>
<dl>
<dt><a name="index-MV_005fMAX_005fSTRING"></a><u>Macro:</u> int <b>MV_MAX_STRING</b></dt>
<dd><p>Number of bytes in a string missing value that are not required to be
spaces.  The current value is 8, a value which is fixed by the system
file format.  In PSPP we could easily eliminate this restriction, but
doing so would also require us to extend the system file format in an
incompatible way, which we consider a bad tradeoff.
</p></dd></dl>

<p>The most often useful functions for missing values are those for
testing whether a given value is missing, described in the following
section.  Several other functions for creating, inspecting, and
modifying <code>struct missing_values</code> objects are described afterward, but
these functions are much more rarely useful.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Testing-for-Missing-Values">2.3.1 Testing for Missing Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Creating-and-Destroying-User_002dMissing-Values">2.3.2 Creation and Destruction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Changing-User_002dMissing-Value-Set-Width">2.3.3 Changing User-Missing Value Set Width</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Inspecting-User_002dMissing-Value-Sets">2.3.4 Inspecting User-Missing Value Sets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Testing-for-Missing-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Creating-and-Destroying-User_002dMissing-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Testing-for-Missing-Values-1"></a>
<h3 class="subsection">2.3.1 Testing for Missing Values</h3>

<p>The most often useful functions for missing values are those for
testing whether a given value is missing, described here.  However,
using one of the corresponding missing value testing functions for
variables can be even easier (see section <a href="#Variable-Missing-Values">Variable Missing Values</a>).
</p>
<dl>
<dt><a name="index-mv_005fis_005fvalue_005fmissing"></a><u>Function:</u> bool <b>mv_is_value_missing</b><i> (const struct missing_values *<var>mv</var>, const union value *<var>value</var>, enum mv_class <var>class</var>)</i></dt>
<dt><a name="index-mv_005fis_005fnum_005fmissing"></a><u>Function:</u> bool <b>mv_is_num_missing</b><i> (const struct missing_values *<var>mv</var>, double <var>value</var>, enum mv_class <var>class</var>)</i></dt>
<dt><a name="index-mv_005fis_005fstr_005fmissing"></a><u>Function:</u> bool <b>mv_is_str_missing</b><i> (const struct missing_values *<var>mv</var>, const char <var>value</var>[], enum mv_class <var>class</var>)</i></dt>
<dd><p>Tests whether <var>value</var> is in one of the categories of missing
values given by <var>class</var>.  Returns true if so, false otherwise.
</p>
<p><var>mv</var> determines the width of <var>value</var> and provides the set of
user-missing values to test.
</p>
<p>The only difference among these functions in the form in which
<var>value</var> is provided, so you may use whichever function is most
convenient.
</p>
<p>The <var>class</var> argument determines the exact kinds of missing values
that the functions test for:
</p>
<dl>
<dt><a name="index-enum-mv_005fclass"></a><u>Enumeration:</u> <b>enum mv_class</b></dt>
<dd><dl compact="compact">
<dt> <tt>MV_USER</tt></dt>
<dd><p>Returns true if <var>value</var> is in the set of user-missing values given
by <var>mv</var>.
</p>
</dd>
<dt> <tt>MV_SYSTEM</tt></dt>
<dd><p>Returns true if <var>value</var> is system-missing.  (If <var>mv</var>
represents a set of string values, then <var>value</var> is never
system-missing.)
</p>
</dd>
<dt> <tt>MV_ANY</tt></dt>
<dt> <tt>MV_USER | MV_SYSTEM</tt></dt>
<dd><p>Returns true if <var>value</var> is user-missing or system-missing.
</p>
</dd>
<dt> <tt>MV_NONE</tt></dt>
<dd><p>Always returns false, that is, <var>value</var> is never considered
missing.
</p></dd>
</dl>
</dd></dl>
</dd></dl>

<hr size="6">
<a name="Creating-and-Destroying-User_002dMissing-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Testing-for-Missing-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Changing-User_002dMissing-Value-Set-Width" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Creation-and-Destruction-1"></a>
<h3 class="subsection">2.3.2 Creation and Destruction</h3>

<p>These functions create and destroy <code>struct missing_values</code> objects.
</p>
<dl>
<dt><a name="index-mv_005finit"></a><u>Function:</u> void <b>mv_init</b><i> (struct missing_values *<var>mv</var>, int <var>width</var>)</i></dt>
<dd><p>Initializes <var>mv</var> as a set of user-missing values.  The set is
initially empty.  Any values added to it must have the specified
<var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fdestroy"></a><u>Function:</u> void <b>mv_destroy</b><i> (struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Destroys <var>mv</var>, which must not be referred to again.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fcopy"></a><u>Function:</u> void <b>mv_copy</b><i> (struct missing_values *<var>mv</var>, const struct missing_values *<var>old</var>)</i></dt>
<dd><p>Initializes <var>mv</var> as a copy of the existing set of user-missing
values <var>old</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fclear"></a><u>Function:</u> void <b>mv_clear</b><i> (struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Empties the user-missing value set <var>mv</var>, retaining its existing
width.
</p></dd></dl>

<hr size="6">
<a name="Changing-User_002dMissing-Value-Set-Width"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Creating-and-Destroying-User_002dMissing-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Inspecting-User_002dMissing-Value-Sets" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Changing-User_002dMissing-Value-Set-Width-1"></a>
<h3 class="subsection">2.3.3 Changing User-Missing Value Set Width</h3>

<p>A few PSPP language constructs copy sets of user-missing values from
one variable to another.  When the source and target variables have
the same width, this is simple.  But when the target variable&rsquo;s width
might be different from the source variable&rsquo;s, it takes a little more
work.  The functions described here can help.
</p>
<p>In fact, it is usually unnecessary to call these functions directly.
Most of the time <code>var_set_missing_values</code>, which uses
<code>mv_resize</code> internally to resize the new set of missing values to
the required width, may be used instead.
See <a href="#var_005fset_005fmissing_005fvalues">var_set_missing_values</a>, for more information.
</p>
<dl>
<dt><a name="index-mv_005fis_005fresizable"></a><u>Function:</u> bool <b>mv_is_resizable</b><i> (const struct missing_values *<var>mv</var>, int <var>new_width</var>)</i></dt>
<dd><p>Tests whether <var>mv</var>&rsquo;s width may be changed to <var>new_width</var> using
<code>mv_resize</code>.  Returns true if it is allowed, false otherwise.
</p>
<p>If <var>mv</var> contains any missing values, then it may be resized only
if each missing value may be resized, as determined by
<code>value_is_resizable</code> (see <a href="#value_005fis_005fresizable">value_is_resizable</a>).
</p></dd></dl>

<p><a name="mv_005fresize"></a>
</p><dl>
<dt><a name="index-mv_005fresize"></a><u>Function:</u> void <b>mv_resize</b><i> (struct missing_values *<var>mv</var>, int <var>width</var>)</i></dt>
<dd><p>Changes <var>mv</var>&rsquo;s width to <var>width</var>.  <var>mv</var> and <var>width</var>
must satisfy the constraints explained above.
</p>
<p>When a string missing value set&rsquo;s width is increased, each
user-missing value is padded on the right with spaces to the new
width.
</p></dd></dl>

<hr size="6">
<a name="Inspecting-User_002dMissing-Value-Sets"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Changing-User_002dMissing-Value-Set-Width" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Modifying-User_002dMissing-Value-Sets" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Inspecting-User_002dMissing-Value-Sets-1"></a>
<h3 class="subsection">2.3.4 Inspecting User-Missing Value Sets</h3>

<p>These functions inspect the properties and contents of
<code>struct missing_values</code> objects.
</p>
<p>The first set of functions inspects the discrete values that sets of
user-missing values may contain:
</p>
<dl>
<dt><a name="index-mv_005fis_005fempty"></a><u>Function:</u> bool <b>mv_is_empty</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns true if <var>mv</var> contains no user-missing values, false if it
contains at least one user-missing value (either a discrete value or a
numeric range).
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fget_005fwidth"></a><u>Function:</u> int <b>mv_get_width</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns the width of the user-missing values that <var>mv</var> represents.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fn_005fvalues"></a><u>Function:</u> int <b>mv_n_values</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns the number of discrete user-missing values included in
<var>mv</var>.  The return value will be between 0 and 3.  For sets of
numeric user-missing values that include a range, the return value
will be 0 or 1.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fhas_005fvalue"></a><u>Function:</u> bool <b>mv_has_value</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns true if <var>mv</var> has at least one discrete user-missing
values, that is, if <code>mv_n_values</code> would return nonzero for
<var>mv</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fget_005fvalue"></a><u>Function:</u> const union value * <b>mv_get_value</b><i> (const struct missing_values *<var>mv</var>, int <var>index</var>)</i></dt>
<dd><p>Returns the discrete user-missing value in <var>mv</var> with the given
<var>index</var>.  The caller must not modify or free the returned value or
refer to it after modifying or freeing <var>mv</var>.  The index must be
less than the number of discrete user-missing values in <var>mv</var>, as
reported by <code>mv_n_values</code>.
</p></dd></dl>

<p>The second set of functions inspects the single range of values that
numeric sets of user-missing values may contain:
</p>
<dl>
<dt><a name="index-mv_005fhas_005frange"></a><u>Function:</u> bool <b>mv_has_range</b><i> (const struct missing_values *<var>mv</var>)</i></dt>
<dd><p>Returns true if <var>mv</var> includes a range, false otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fget_005frange"></a><u>Function:</u> void <b>mv_get_range</b><i> (const struct missing_values *<var>mv</var>, double *<var>low</var>, double *<var>high</var>)</i></dt>
<dd><p>Stores the low endpoint of <var>mv</var>&rsquo;s range in <code>*<var>low</var></code> and
the high endpoint of the range in <code>*<var>high</var></code>.  <var>mv</var> must
include a range.
</p></dd></dl>

<hr size="6">
<a name="Modifying-User_002dMissing-Value-Sets"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Inspecting-User_002dMissing-Value-Sets" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#User_002dMissing-Values" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Modifying-User_002dMissing-Value-Sets-1"></a>
<h3 class="subsection">2.3.5 Modifying User-Missing Value Sets</h3>

<p>These functions modify the contents of <code>struct missing_values</code>
objects.
</p>
<p>The next set of functions applies to all sets of user-missing values:
</p>
<dl>
<dt><a name="index-mv_005fadd_005fvalue"></a><u>Function:</u> bool <b>mv_add_value</b><i> (struct missing_values *<var>mv</var>, const union value *<var>value</var>)</i></dt>
<dt><a name="index-mv_005fadd_005fstr"></a><u>Function:</u> bool <b>mv_add_str</b><i> (struct missing_values *<var>mv</var>, const char <var>value</var>[])</i></dt>
<dt><a name="index-mv_005fadd_005fnum"></a><u>Function:</u> bool <b>mv_add_num</b><i> (struct missing_values *<var>mv</var>, double <var>value</var>)</i></dt>
<dd><p>Attempts to add the given discrete <var>value</var> to set of user-missing
values <var>mv</var>.  <var>value</var> must have the same width as <var>mv</var>.
Returns true if <var>value</var> was successfully added, false if the set
could not accept any more discrete values or if <var>value</var> is not an
acceptable user-missing value (see <code>mv_is_acceptable</code> below).
</p>
<p>These functions are equivalent, except for the form in which
<var>value</var> is provided, so you may use whichever function is most
convenient.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fpop_005fvalue"></a><u>Function:</u> void <b>mv_pop_value</b><i> (struct missing_values *<var>mv</var>, union value *<var>value</var>)</i></dt>
<dd><p>Removes a discrete value from <var>mv</var> (which must contain at least
one discrete value) and stores it in <var>value</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005freplace_005fvalue"></a><u>Function:</u> bool <b>mv_replace_value</b><i> (struct missing_values *<var>mv</var>, const union value *<var>value</var>, int <var>index</var>)</i></dt>
<dd><p>Attempts to replace the discrete value with the given <var>index</var> in
<var>mv</var> (which must contain at least <var>index</var> + 1 discrete values)
by <var>value</var>.  Returns true if successful, false if <var>value</var> is
not an acceptable user-missing value (see <code>mv_is_acceptable</code>
below).
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fis_005facceptable"></a><u>Function:</u> bool <b>mv_is_acceptable</b><i> (const union value *<var>value</var>, int <var>width</var>)</i></dt>
<dd><p><a name="mv_005fis_005facceptable"></a>
Returns true if <var>value</var>, which must have the specified
<var>width</var>, may be added to a missing value set of the same
<var>width</var>, false if it cannot.  As described above, all numeric
values and string values of width <code>MV_MAX_STRING</code> or less may be
added, but string value of greater width may be added only if bytes
beyond the first <code>MV_MAX_STRING</code> are all spaces.
</p></dd></dl>

<p>The second set of functions applies only to numeric sets of
user-missing values:
</p>
<dl>
<dt><a name="index-mv_005fadd_005frange"></a><u>Function:</u> bool <b>mv_add_range</b><i> (struct missing_values *<var>mv</var>, double <var>low</var>, double <var>high</var>)</i></dt>
<dd><p>Attempts to add a numeric range covering <var>low</var>&hellip;<var>high</var>
(inclusive on both ends) to <var>mv</var>, which must be a numeric set of
user-missing values.  Returns true if the range is successful added,
false on failure.  Fails if <var>mv</var> already contains a range, or if
<var>mv</var> contains more than one discrete value, or if <var>low</var> &gt;
<var>high</var>.
</p></dd></dl>

<dl>
<dt><a name="index-mv_005fpop_005frange"></a><u>Function:</u> void <b>mv_pop_range</b><i> (struct missing_values *<var>mv</var>, double *<var>low</var>, double *<var>high</var>)</i></dt>
<dd><p>Given <var>mv</var>, which must be a numeric set of user-missing values
that contains a range, removes that range from <var>mv</var> and stores its
low endpoint in <code>*<var>low</var></code> and its high endpoint in
<code>*<var>high</var></code>.
</p></dd></dl>

<hr size="6">
<a name="Value-Labels"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Modifying-User_002dMissing-Value-Sets" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Creation-and-Destruction" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Value-Labels-1"></a>
<h2 class="section">2.4 Value Labels</h2>

<p>Each variable has a set of value labels (see <a href="pspp.html#VALUE-LABELS">(pspp)VALUE LABELS</a> section &lsquo;VALUE LABELS&rsquo; in <cite>PSPP Users Guide</cite>), represented as <code>struct val_labs</code>.  A
<code>struct val_labs</code> is essentially a map from <code>union value</code>s to strings.
All of the values in a set of value labels have the same width, which
for a set of value labels owned by a variable (the common case) is the
same as its variable.
</p>
<p>Sets of value labels may contain any number of entries.
</p>
<p>It is rarely necessary to interact directly with a <code>struct val_labs</code>
object.  Instead, the most common operation, looking up the label for
a value of a given variable, can be conveniently executed through
functions on <code>struct variable</code>.  See section <a href="#Variable-Value-Labels">Variable Value Labels</a>, for
details.
</p>
<p>Function prototypes and other declarations related to missing values
are declared in &lsquo;<tt>data/value-labels.h</tt>&rsquo;.
</p>
<dl>
<dt><a name="index-struct-val_005flabs"></a><u>Structure:</u> <b>struct val_labs</b></dt>
<dd><p>Opaque type that represents a set of value labels.
</p></dd></dl>

<p>The most often useful function for value labels is
<code>val_labs_find</code>, for looking up the label associated with a
value.
</p>
<dl>
<dt><a name="index-val_005flabs_005ffind"></a><u>Function:</u> char * <b>val_labs_find</b><i> (const struct val_labs *<var>val_labs</var>, union value <var>value</var>)</i></dt>
<dd><p>Looks in <var>val_labs</var> for a label for the given <var>value</var>.
Returns the label, if one is found, or a null pointer otherwise.
</p></dd></dl>

<p>Several other functions for working with value labels are described in
the following section, but these are more rarely useful.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Value-Labels-Creation-and-Destruction">2.4.1 Creation and Destruction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels-Properties">2.4.2 Value Labels Properties</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels-Adding-and-Removing-Labels">2.4.3 Adding and Removing Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels-Iteration">2.4.4 Iterating through Value Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Value-Labels-Creation-and-Destruction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Properties" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Creation-and-Destruction"></a>
<h3 class="subsection">2.4.1 Creation and Destruction</h3>

<p>These functions create and destroy <code>struct val_labs</code> objects.
</p>
<dl>
<dt><a name="index-val_005flabs_005fcreate"></a><u>Function:</u> struct val_labs * <b>val_labs_create</b><i> (int <var>width</var>)</i></dt>
<dd><p>Creates and returns an initially empty set of value labels with the
given <var>width</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fclone"></a><u>Function:</u> struct val_labs * <b>val_labs_clone</b><i> (const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Creates and returns a set of value labels whose width and contents are
the same as those of <var>var_labs</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fclear"></a><u>Function:</u> void <b>val_labs_clear</b><i> (struct val_labs *<var>var_labs</var>)</i></dt>
<dd><p>Deletes all value labels from <var>var_labs</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fdestroy"></a><u>Function:</u> void <b>val_labs_destroy</b><i> (struct val_labs *<var>var_labs</var>)</i></dt>
<dd><p>Destroys <var>var_labs</var>, which must not be referenced again.
</p></dd></dl>

<hr size="6">
<a name="Value-Labels-Properties"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Creation-and-Destruction" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Adding-and-Removing-Labels" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Value-Labels-Properties-1"></a>
<h3 class="subsection">2.4.2 Value Labels Properties</h3>

<p>These functions inspect and manipulate basic properties of
<code>struct val_labs</code> objects.
</p>
<dl>
<dt><a name="index-val_005flabs_005fcount"></a><u>Function:</u> size_t <b>val_labs_count</b><i> (const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Returns the number of value labels in <var>val_labs</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fcan_005fset_005fwidth"></a><u>Function:</u> bool <b>val_labs_can_set_width</b><i> (const struct val_labs *<var>val_labs</var>, int <var>new_width</var>)</i></dt>
<dd><p>Tests whether <var>val_labs</var>&rsquo;s width may be changed to <var>new_width</var>
using <code>val_labs_set_width</code>.  Returns true if it is allowed, false
otherwise.
</p>
<p>A set of value labels may be resized to a given width only if each
value in it may be resized to that width, as determined by
<code>value_is_resizable</code> (see <a href="#value_005fis_005fresizable">value_is_resizable</a>).
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fset_005fwidth"></a><u>Function:</u> void <b>val_labs_set_width</b><i> (struct val_labs *<var>val_labs</var>, int <var>new_width</var>)</i></dt>
<dd><p>Changes the width of <var>val_labs</var>&rsquo;s values to <var>new_width</var>, which
must be a valid new width as determined by
<code>val_labs_can_set_width</code>.
</p></dd></dl>

<hr size="6">
<a name="Value-Labels-Adding-and-Removing-Labels"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Properties" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Iteration" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Adding-and-Removing-Labels"></a>
<h3 class="subsection">2.4.3 Adding and Removing Labels</h3>

<p>These functions add and remove value labels from a <code>struct val_labs</code>
object.
</p>
<dl>
<dt><a name="index-val_005flabs_005fadd"></a><u>Function:</u> bool <b>val_labs_add</b><i> (struct val_labs *<var>val_labs</var>, union value <var>value</var>, const char *<var>label</var>)</i></dt>
<dd><p>Adds <var>label</var> to in <var>var_labs</var> as a label for <var>value</var>,
which must have the same width as the set of value labels.  Returns
true if successful, false if <var>value</var> already has a label.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005freplace"></a><u>Function:</u> void <b>val_labs_replace</b><i> (struct val_labs *<var>val_labs</var>, union value <var>value</var>, const char *<var>label</var>)</i></dt>
<dd><p>Adds <var>label</var> to in <var>var_labs</var> as a label for <var>value</var>,
which must have the same width as the set of value labels.  If
<var>value</var> already has a label in <var>var_labs</var>, it is replaced.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fremove"></a><u>Function:</u> bool <b>val_labs_remove</b><i> (struct val_labs *<var>val_labs</var>, union value <var>value</var>)</i></dt>
<dd><p>Removes from <var>val_labs</var> any label for <var>value</var>, which must have
the same width as the set of value labels.  Returns true if a label
was removed, false otherwise.
</p></dd></dl>

<hr size="6">
<a name="Value-Labels-Iteration"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Adding-and-Removing-Labels" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Iterating-through-Value-Labels"></a>
<h3 class="subsection">2.4.4 Iterating through Value Labels</h3>

<p>These functions allow iteration through the set of value labels
represented by a <code>struct val_labs</code> object.  They may be used in the
context of a <code>for</code> loop:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">struct val_labs val_labs;
const struct val_lab *vl;

&hellip;

for (vl = val_labs_first (val_labs); vl != NULL;
     vl = val_labs_next (val_labs, vl))
  {
    &hellip;<span class="roman">do something with <code>vl</code></span>&hellip;
  }
</pre></td></tr></table>

<p>Value labels should not be added or deleted from a <code>struct val_labs</code>
as it is undergoing iteration.
</p>
<dl>
<dt><a name="index-val_005flabs_005ffirst"></a><u>Function:</u> const struct val_lab * <b>val_labs_first</b><i> (const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Returns the first value label in <var>var_labs</var>, if it contains at
least one value label, or a null pointer if it does not contain any
value labels.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fnext"></a><u>Function:</u> const struct val_lab * <b>val_labs_next</b><i> (const struct val_labs *<var>val_labs</var>, const struct val_labs_iterator **<var>vl</var>)</i></dt>
<dd><p>Returns the value label in <var>var_labs</var> following <var>vl</var>, if
<var>vl</var> is not the last value label in <var>val_labs</var>, or a null
pointer if there are no value labels following <var>vl</var>.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flabs_005fsorted"></a><u>Function:</u> const struct val_lab ** <b>val_labs_sorted</b><i> (const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Allocates and returns an array of pointers to value labels, which are
sorted in increasing order by value.  The array has
<code>val_labs_count (<var>val_labs</var>)</code> elements.  The caller is
responsible for freeing the array with <code>free</code> (but must not free
any of the <code>struct val_lab</code> elements that the array points to).
</p></dd></dl>

<p>The iteration functions above work with pointers to <code>struct val_lab</code>
which is an opaque data structure that users of <code>struct val_labs</code> must
not modify or free directly.  The following functions work with
objects of this type:
</p>
<dl>
<dt><a name="index-val_005flab_005fget_005fvalue"></a><u>Function:</u> const union value * <b>val_lab_get_value</b><i> (const struct val_lab *<var>vl</var>)</i></dt>
<dd><p>Returns the value of value label <var>vl</var>.  The caller must not modify
or free the returned value.  (To achieve a similar result, remove the
value label with <code>val_labs_remove</code>, then add the new value with
<code>val_labs_add</code>.)
</p>
<p>The width of the returned value cannot be determined directly from
<var>vl</var>.  It may be obtained by calling <code>val_labs_get_width</code> on
the <code>struct val_labs</code> that <var>vl</var> is in.
</p></dd></dl>

<dl>
<dt><a name="index-val_005flab_005fget_005flabel"></a><u>Function:</u> const char * <b>val_lab_get_label</b><i> (const struct val_lab *<var>vl</var>)</i></dt>
<dd><p>Returns the label in <var>vl</var> as a null-terminated string.  The caller
must not modify or free the returned string.  (Use
<code>val_labs_replace</code> to change a value label.)
</p></dd></dl>

<hr size="6">
<a name="Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Iteration" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Name" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variables-1"></a>
<h2 class="section">2.5 Variables</h2>

<p>A PSPP variable is represented by <code>struct variable</code>, an opaque type
declared in &lsquo;<tt>data/variable.h</tt>&rsquo; along with related declarations.
See <a href="pspp.html#Variables">(pspp)Variables</a> section &lsquo;Variables&rsquo; in <cite>PSPP Users Guide</cite>, for a description of PSPP
variables from a user perspective.
</p>
<p>PSPP is unusual among computer languages in that, by itself, a PSPP
variable does not have a value.  Instead, a variable in PSPP takes on
a value only in the context of a case, which supplies one value for
each variable in a set of variables (see section <a href="#Cases">Cases</a>).  The set of
variables in a case, in turn, are ordinarily part of a dictionary
(see section <a href="#Dictionaries">Dictionaries</a>).
</p>
<p>Every variable has several attributes, most of which correspond
directly to one of the variable attributes visible to PSPP users
(see <a href="pspp.html#Attributes">(pspp)Attributes</a> section &lsquo;Attributes&rsquo; in <cite>PSPP Users Guide</cite>).
</p>
<p>The following sections describe variable-related functions and macros.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Variable-Name">2.5.1 Variable Name</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Type-and-Width">2.5.2 Variable Type and Width</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Missing-Values">2.5.3 Variable Missing Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Print-and-Write-Formats">2.5.5 Variable Print and Write Formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Labels">2.5.6 Variable Labels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Leave-Status">2.5.8 Variable Leave Status</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Class">2.5.9 Dictionary Class</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Creation-and-Destruction">2.5.10 Variable Creation and Destruction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Short-Names">2.5.11 Variable Short Names</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Relationships">2.5.12 Variable Relationships</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Auxiliary-Data">2.5.13 Variable Auxiliary Data</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Categorical-Values">2.5.14 Variable Categorical Values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Variable-Name"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Type-and-Width" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Name-1"></a>
<h3 class="subsection">2.5.1 Variable Name</h3>

<p>A variable name is a string between 1 and <code>ID_MAX_LEN</code> bytes
long that satisfies the rules for PSPP identifiers
(see <a href="pspp.html#Tokens">(pspp)Tokens</a> section &lsquo;Tokens&rsquo; in <cite>PSPP Users Guide</cite>).  Variable names are
mixed-case and treated case-insensitively.
</p>
<dl>
<dt><a name="index-ID_005fMAX_005fLEN"></a><u>Macro:</u> int <b>ID_MAX_LEN</b></dt>
<dd><p>Maximum length of a variable name, in bytes, currently 64.
</p></dd></dl>

<p>Only one commonly useful function relates to variable names:
</p>
<dl>
<dt><a name="index-var_005fget_005fname"></a><u>Function:</u> const char * <b>var_get_name</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s variable name as a C string.
</p></dd></dl>

<p>A few other functions are much more rarely used.  Some of these
functions are used internally by the dictionary implementation:
</p>
<p><a name="var_005fset_005fname"></a>
</p><dl>
<dt><a name="index-var_005fset_005fname"></a><u>Function:</u> void <b>var_set_name</b><i> (struct variable *<var>var</var>, const char *<var>new_name</var>)</i></dt>
<dd><p>Changes the name of <var>var</var> to <var>new_name</var>, which must be a
&ldquo;plausible&rdquo; name as defined below.
</p>
<p>This function cannot be applied to a variable that is part of a
dictionary.  Use <code>dict_rename_var</code> instead (see section <a href="#Dictionary-Renaming-Variables">Renaming Variables</a>).
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fdict_005fclass"></a><u>Function:</u> enum dict_class <b>var_get_dict_class</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the dictionary class of <var>var</var>&rsquo;s name (see section <a href="#Dictionary-Class">Dictionary Class</a>).
</p></dd></dl>

<hr size="6">
<a name="Variable-Type-and-Width"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Name" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Missing-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Type-and-Width-1"></a>
<h3 class="subsection">2.5.2 Variable Type and Width</h3>

<p>A variable&rsquo;s type and width are the type and width of its values
(see section <a href="#Values">Values</a>).
</p>
<dl>
<dt><a name="index-var_005fget_005ftype"></a><u>Function:</u> enum val_type <b>var_get_type</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the type of variable <var>var</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fwidth"></a><u>Function:</u> int <b>var_get_width</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the width of variable <var>var</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fwidth"></a><u>Function:</u> void <b>var_set_width</b><i> (struct variable *<var>var</var>, int <var>width</var>)</i></dt>
<dd><p>Sets the width of variable <var>var</var> to <var>width</var>.  The width of a
variable should not normally be changed after the variable is created,
so this function is rarely used.  This function cannot be applied to a
variable that is part of a dictionary.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fis_005fnumeric"></a><u>Function:</u> bool <b>var_is_numeric</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> is a numeric variable, false otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fis_005falpha"></a><u>Function:</u> bool <b>var_is_alpha</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> is an alphanumeric (string) variable, false
otherwise.
</p></dd></dl>

<hr size="6">
<a name="Variable-Missing-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Type-and-Width" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Value-Labels" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Missing-Values-1"></a>
<h3 class="subsection">2.5.3 Variable Missing Values</h3>

<p>A numeric or short string variable may have a set of user-missing
values (see <a href="pspp.html#MISSING-VALUES">(pspp)MISSING VALUES</a> section &lsquo;MISSING VALUES&rsquo; in <cite>PSPP Users Guide</cite>), represented
as a <code>struct missing_values</code> (see section <a href="#User_002dMissing-Values">User-Missing Values</a>).
</p>
<p>The most frequent operation on a variable&rsquo;s missing values is to query
whether a value is user- or system-missing:
</p>
<dl>
<dt><a name="index-var_005fis_005fvalue_005fmissing"></a><u>Function:</u> bool <b>var_is_value_missing</b><i> (const struct variable *<var>var</var>, const union value *<var>value</var>, enum mv_class <var>class</var>)</i></dt>
<dt><a name="index-var_005fis_005fnum_005fmissing"></a><u>Function:</u> bool <b>var_is_num_missing</b><i> (const struct variable *<var>var</var>, double <var>value</var>, enum mv_class <var>class</var>)</i></dt>
<dt><a name="index-var_005fis_005fstr_005fmissing"></a><u>Function:</u> bool <b>var_is_str_missing</b><i> (const struct variable *<var>var</var>, const char <var>value</var>[], enum mv_class <var>class</var>)</i></dt>
<dd><p>Tests whether <var>value</var> is a missing value of the given <var>class</var>
for variable <var>var</var> and returns true if so, false otherwise.
<code>var_is_num_missing</code> may only be applied to numeric variables;
<code>var_is_str_missing</code> may only be applied to string variables.
<var>value</var> must have been initialized with the same width as
<var>var</var>.
</p>
<p><code>var_is_<var>type</var>_missing (<var>var</var>, <var>value</var>, <var>class</var>)</code>
is equivalent to <code>mv_is_<var>type</var>_missing
(var_get_missing_values (<var>var</var>), <var>value</var>, <var>class</var>)</code>.
</p></dd></dl>

<p>In addition, a few functions are provided to work more directly with a
variable&rsquo;s <code>struct missing_values</code>:
</p>
<dl>
<dt><a name="index-var_005fget_005fmissing_005fvalues"></a><u>Function:</u> const struct missing_values * <b>var_get_missing_values</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the <code>struct missing_values</code> associated with <var>var</var>.  The
caller must not modify the returned structure.  The return value is
always non-null.
</p></dd></dl>

<p><a name="var_005fset_005fmissing_005fvalues"></a>
</p><dl>
<dt><a name="index-var_005fset_005fmissing_005fvalues"></a><u>Function:</u> void <b>var_set_missing_values</b><i> (struct variable *<var>var</var>, const struct missing_values *<var>miss</var>)</i></dt>
<dd><p>Changes <var>var</var>&rsquo;s missing values to a copy of <var>miss</var>, or if
<var>miss</var> is a null pointer, clears <var>var</var>&rsquo;s missing values.  If
<var>miss</var> is non-null, it must have the same width as <var>var</var> or be
resizable to <var>var</var>&rsquo;s width (see <a href="#mv_005fresize">mv_resize</a>).  The caller
retains ownership of <var>miss</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fclear_005fmissing_005fvalues"></a><u>Function:</u> void <b>var_clear_missing_values</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Clears <var>var</var>&rsquo;s missing values.  Equivalent to
<code>var_set_missing_values (<var>var</var>, NULL)</code>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fhas_005fmissing_005fvalues"></a><u>Function:</u> bool <b>var_has_missing_values</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> has any missing values, false if it has
none.  Equivalent to <code>mv_is_empty (var_get_missing_values (<var>var</var>))</code>.
</p></dd></dl>

<hr size="6">
<a name="Variable-Value-Labels"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Missing-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Print-and-Write-Formats" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Value-Labels-1"></a>
<h3 class="subsection">2.5.4 Variable Value Labels</h3>

<p>A numeric or short string variable may have a set of value labels
(see <a href="pspp.html#VALUE-LABELS">(pspp)VALUE LABELS</a> section &lsquo;VALUE LABELS&rsquo; in <cite>PSPP Users Guide</cite>), represented as a
<code>struct val_labs</code> (see section <a href="#Value-Labels">Value Labels</a>).  The most commonly useful
functions for value labels return the value label associated with a
value:
</p>
<dl>
<dt><a name="index-var_005flookup_005fvalue_005flabel"></a><u>Function:</u> const char * <b>var_lookup_value_label</b><i> (const struct variable *<var>var</var>, const union value *<var>value</var>)</i></dt>
<dd><p>Looks for a label for <var>value</var> in <var>var</var>&rsquo;s set of value labels.
<var>value</var> must have the same width as <var>var</var>.  Returns the label
if one exists, otherwise a null pointer.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fappend_005fvalue_005fname"></a><u>Function:</u> void <b>var_append_value_name</b><i> (const struct variable *<var>var</var>, const union value *<var>value</var>, struct string *<var>str</var>)</i></dt>
<dd><p>Looks for a label for <var>value</var> in <var>var</var>&rsquo;s set of value labels.
<var>value</var> must have the same width as <var>var</var>.
If a label exists, it will be appended to the string pointed to by <var>str</var>.
Otherwise, it formats <var>value</var>
using <var>var</var>&rsquo;s print format (see section <a href="#Input-and-Output-Formats">Input and Output Formats</a>) 
and appends the formatted string.
</p></dd></dl>

<p>The underlying <code>struct val_labs</code> structure may also be accessed
directly using the functions described below.
</p>
<dl>
<dt><a name="index-var_005fhas_005fvalue_005flabels"></a><u>Function:</u> bool <b>var_has_value_labels</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> has at least one value label, false
otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fvalue_005flabels"></a><u>Function:</u> const struct val_labs * <b>var_get_value_labels</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns the <code>struct val_labs</code> associated with <var>var</var>.  If <var>var</var>
has no value labels, then the return value may or may not be a null
pointer.
</p>
<p>The variable retains ownership of the returned <code>struct val_labs</code>,
which the caller must not attempt to modify.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fvalue_005flabels"></a><u>Function:</u> void <b>var_set_value_labels</b><i> (struct variable *<var>var</var>, const struct val_labs *<var>val_labs</var>)</i></dt>
<dd><p>Replaces <var>var</var>&rsquo;s value labels by a copy of <var>val_labs</var>.  The
caller retains ownership of <var>val_labs</var>.  If <var>val_labs</var> is a
null pointer, then <var>var</var>&rsquo;s value labels, if any, are deleted.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fclear_005fvalue_005flabels"></a><u>Function:</u> void <b>var_clear_value_labels</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Deletes <var>var</var>&rsquo;s value labels.  Equivalent to
<code>var_set_value_labels (<var>var</var>, NULL)</code>.
</p></dd></dl>

<p>A final group of functions offers shorthands for operations that would
otherwise require getting the value labels from a variable, copying
them, modifying them, and then setting the modified value labels into
the variable (making a second copy):
</p>
<dl>
<dt><a name="index-var_005fadd_005fvalue_005flabel"></a><u>Function:</u> bool <b>var_add_value_label</b><i> (struct variable *<var>var</var>, const union value *<var>value</var>, const char *<var>label</var>)</i></dt>
<dd><p>Attempts to add a copy of <var>label</var> as a label for <var>value</var> for
the given <var>var</var>.  <var>value</var> must have the same width as
<var>var</var>.  If <var>value</var> already has a label, then the old label is
retained.  Returns true if a label is added, false if there was an
existing label for <var>value</var>.  Either way, the caller retains
ownership of <var>value</var> and <var>label</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005freplace_005fvalue_005flabel"></a><u>Function:</u> void <b>var_replace_value_label</b><i> (struct variable *<var>var</var>, const union value *<var>value</var>, const char *<var>label</var>)</i></dt>
<dd><p>Attempts to add a copy of <var>label</var> as a label for <var>value</var> for
the given <var>var</var>.  <var>value</var> must have the same width as
<var>var</var>.  If <var>value</var> already has a label, then
<var>label</var> replaces the old label.  Either way, the caller retains
ownership of <var>value</var> and <var>label</var>.
</p></dd></dl>

<hr size="6">
<a name="Variable-Print-and-Write-Formats"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Value-Labels" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Labels" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Print-and-Write-Formats-1"></a>
<h3 class="subsection">2.5.5 Variable Print and Write Formats</h3>

<p>Each variable has an associated pair of output formats, called its
<em>print format</em> and <em>write format</em>.  See <a href="pspp.html#Input-and-Output-Formats">(pspp)Input and Output Formats</a> section &lsquo;Input and Output Formats&rsquo; in <cite>PSPP Users Guide</cite>, for an introduction to formats.
See section <a href="#Input-and-Output-Formats">Input and Output Formats</a>, for a developer&rsquo;s description of
format representation.
</p>
<p>The print format is used to convert a variable&rsquo;s data values to
strings for human-readable output.  The write format is used similarly
for machine-readable output, primarily by the WRITE transformation
(see <a href="pspp.html#WRITE">(pspp)WRITE</a> section &lsquo;WRITE&rsquo; in <cite>PSPP Users Guide</cite>).  Most often a variable&rsquo;s
print and write formats are the same.
</p>
<p>A newly created variable by default has format F8.2 if it is numeric
or an A format with the same width as the variable if it is string.
Many creators of variables override these defaults.
</p>
<p>Both the print format and write format are output formats.  Input
formats are not part of <code>struct variable</code>.  Instead, input programs
and transformations keep track of variable input formats themselves.
</p>
<p>The following functions work with variable print and write formats.
</p>
<dl>
<dt><a name="index-var_005fget_005fprint_005fformat"></a><u>Function:</u> const struct fmt_spec * <b>var_get_print_format</b><i> (const struct variable *<var>var</var>)</i></dt>
<dt><a name="index-var_005fget_005fwrite_005fformat"></a><u>Function:</u> const struct fmt_spec * <b>var_get_write_format</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s print or write format, respectively.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fprint_005fformat"></a><u>Function:</u> void <b>var_set_print_format</b><i> (struct variable *<var>var</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dt><a name="index-var_005fset_005fwrite_005fformat"></a><u>Function:</u> void <b>var_set_write_format</b><i> (struct variable *<var>var</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dt><a name="index-var_005fset_005fboth_005fformats"></a><u>Function:</u> void <b>var_set_both_formats</b><i> (struct variable *<var>var</var>, const struct fmt_spec *<var>format</var>)</i></dt>
<dd><p>Sets <var>var</var>&rsquo;s print format, write format, or both formats,
respectively, to a copy of <var>format</var>.
</p></dd></dl>

<hr size="6">
<a name="Variable-Labels"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Print-and-Write-Formats" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-GUI-Attributes" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Labels-1"></a>
<h3 class="subsection">2.5.6 Variable Labels</h3>

<p>A variable label is a string that describes a variable.  Variable
labels may contain spaces and punctuation not allowed in variable
names.  See <a href="pspp.html#VARIABLE-LABELS">(pspp)VARIABLE LABELS</a> section &lsquo;VARIABLE LABELS&rsquo; in <cite>PSPP Users Guide</cite>, for a
user-level description of variable labels.
</p>
<p>The most commonly useful functions for variable labels are those to
retrieve a variable&rsquo;s label:
</p>
<dl>
<dt><a name="index-var_005fto_005fstring"></a><u>Function:</u> const char * <b>var_to_string</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s variable label, if it has one, otherwise
<var>var</var>&rsquo;s name.  In either case the caller must not attempt to
modify or free the returned string.
</p>
<p>This function is useful for user output.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005flabel"></a><u>Function:</u> const char * <b>var_get_label</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s variable label, if it has one, or a null pointer
otherwise.
</p></dd></dl>

<p>A few other variable label functions are also provided:
</p>
<dl>
<dt><a name="index-var_005fset_005flabel"></a><u>Function:</u> void <b>var_set_label</b><i> (struct variable *<var>var</var>, const char *<var>label</var>)</i></dt>
<dd><p>Sets <var>var</var>&rsquo;s variable label to a copy of <var>label</var>, or removes
any label from <var>var</var> if <var>label</var> is a null pointer or contains
only spaces.  Leading and trailing spaces are removed from the
variable label and its remaining content is truncated at 255 bytes.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fclear_005flabel"></a><u>Function:</u> void <b>var_clear_label</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Removes any variable label from <var>var</var>.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fhas_005flabel"></a><u>Function:</u> bool <b>var_has_label</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> has a variable label, false otherwise.
</p></dd></dl>

<hr size="6">
<a name="Variable-GUI-Attributes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Labels" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Leave-Status" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="GUI-Attributes"></a>
<h3 class="subsection">2.5.7 GUI Attributes</h3>

<p>These functions and types access and set attributes that are mainly
used by graphical user interfaces.  Their values are also stored in
and retrieved from system files (but not portable files).
</p>
<p>The first group of functions relate to the measurement level of
numeric data.  New variables are assigned a nominal level of
measurement by default.
</p>
<dl>
<dt><a name="index-enum-measure"></a><u>Enumeration:</u> <b>enum measure</b></dt>
<dd><p>Measurement level.  Available values are:
</p>
<dl compact="compact">
<dt> <code>MEASURE_NOMINAL</code></dt>
<dd><p>Numeric data values are arbitrary.  Arithmetic operations and
numerical comparisons of such data are not meaningful.
</p>
</dd>
<dt> <code>MEASURE_ORDINAL</code></dt>
<dd><p>Numeric data values indicate progression along a rank order.
Arbitrary arithmetic operations such as addition are not meaningful on
such data, but inequality comparisons (less, greater, etc.) have
straightforward interpretations.
</p>
</dd>
<dt> <code>MEASURE_SCALE</code></dt>
<dd><p>Ratios, sums, etc. of numeric data values have meaningful
interpretations.
</p></dd>
</dl>

<p>PSPP does not have a separate category for interval data, which would
naturally fall between the ordinal and scale measurement levels.
</p></dd></dl>

<dl>
<dt><a name="index-measure_005fis_005fvalid"></a><u>Function:</u> bool <b>measure_is_valid</b><i> (enum measure <var>measure</var>)</i></dt>
<dd><p>Returns true if <var>measure</var> is a valid level of measurement, that
is, if it is one of the <code>enum measure</code> constants listed above,
and false otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-measure"></a><u>Function:</u> enum <b>measure</b><i> var_get_measure (const struct variable *<var>var</var>)</i></dt>
<dt><a name="index-var_005fset_005fmeasure"></a><u>Function:</u> void <b>var_set_measure</b><i> (struct variable *<var>var</var>, enum measure <var>measure</var>)</i></dt>
<dd><p>Gets or sets <var>var</var>&rsquo;s measurement level.
</p></dd></dl>

<p>The following set of functions relates to the width of on-screen
columns used for displaying variable data in a graphical user
interface environment.  The unit of measurement is the width of a
character.  For proportionally spaced fonts, this is based on the
average width of a character.
</p>
<dl>
<dt><a name="index-var_005fget_005fdisplay_005fwidth"></a><u>Function:</u> int <b>var_get_display_width</b><i> (const struct variable *<var>var</var>)</i></dt>
<dt><a name="index-var_005fset_005fdisplay_005fwidth"></a><u>Function:</u> void <b>var_set_display_width</b><i> (struct variable *<var>var</var>, int <var>display_width</var>)</i></dt>
<dd><p>Gets or sets <var>var</var>&rsquo;s display width.
</p></dd></dl>

<p><a name="var_005fdefault_005fdisplay_005fwidth"></a>
</p><dl>
<dt><a name="index-var_005fdefault_005fdisplay_005fwidth"></a><u>Function:</u> int <b>var_default_display_width</b><i> (int <var>width</var>)</i></dt>
<dd><p>Returns the default display width for a variable with the given
<var>width</var>.  The default width of a numeric variable is 8.  The
default width of a string variable is <var>width</var> or 32, whichever is
less.
</p></dd></dl>

<p>The final group of functions work with the justification of data when
it is displayed in on-screen columns.  New variables are by default
right-justified.
</p>
<dl>
<dt><a name="index-enum-alignment"></a><u>Enumeration:</u> <b>enum alignment</b></dt>
<dd><p>Text justification.  Possible values are <code>ALIGN_LEFT</code>,
<code>ALIGN_RIGHT</code>, and <code>ALIGN_CENTRE</code>.
</p></dd></dl>

<dl>
<dt><a name="index-alignment_005fis_005fvalid"></a><u>Function:</u> bool <b>alignment_is_valid</b><i> (enum alignment <var>alignment</var>)</i></dt>
<dd><p>Returns true if <var>alignment</var> is a valid alignment, that is, if it
is one of the <code>enum alignment</code> constants listed above, and false
otherwise.
</p></dd></dl>

<dl>
<dt><a name="index-alignment"></a><u>Function:</u> enum <b>alignment</b><i> var_get_alignment (const struct variable *<var>var</var>)</i></dt>
<dt><a name="index-var_005fset_005falignment"></a><u>Function:</u> void <b>var_set_alignment</b><i> (struct variable *<var>var</var>, enum alignment <var>alignment</var>)</i></dt>
<dd><p>Gets or sets <var>var</var>&rsquo;s alignment.
</p></dd></dl>

<hr size="6">
<a name="Variable-Leave-Status"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-GUI-Attributes" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Class" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Leave-Status-1"></a>
<h3 class="subsection">2.5.8 Variable Leave Status</h3>

<p>Commonly, most or all data in a case come from an input file, read
with a command such as DATA LIST or GET, but data can also be
generated with transformations such as COMPUTE.  In the latter case
the question of a datum&rsquo;s &ldquo;initial value&rdquo; can arise.  For example,
the value of a piece of generated data can recursively depend on its
own value:
</p><table><tr><td>&nbsp;</td><td><pre class="example">COMPUTE X = X + 1.
</pre></td></tr></table>
<p>Another situation where the initial value of a variable arises is when
its value is not set at all for some cases, e.g. below, <code>Y</code> is
set only for the first 10 cases:
</p><table><tr><td>&nbsp;</td><td><pre class="example">DO IF #CASENUM &lt;= 10.
+ COMPUTE Y = 1.
END IF.
</pre></td></tr></table>

<p>By default, the initial value of a datum in either of these situations
is the system-missing value for numeric values and spaces for string
values.  This means that, above, X would be system-missing and that Y
would be 1 for the first 10 cases and system-missing for the
remainder.
</p>
<p>PSPP also supports retaining the value of a variable from one case to
another, using the LEAVE command (see <a href="pspp.html#LEAVE">(pspp)LEAVE</a> section &lsquo;LEAVE&rsquo; in <cite>PSPP Users Guide</cite>).  The initial value of such a variable is 0 if it is numeric
and spaces if it is a string.  If the command &lsquo;<samp>LEAVE X Y</samp>&rsquo; is
appended to the above example, then X would have value 1 in the first
case and increase by 1 in every succeeding case, and Y would have
value 1 for the first 10 cases and 0 for later cases.
</p>
<p>The LEAVE command has no effect on data that comes from an input file
or whose values do not depend on a variable&rsquo;s initial value.
</p>
<p>The value of scratch variables (see <a href="pspp.html#Scratch-Variables">(pspp)Scratch Variables</a> section &lsquo;Scratch Variables&rsquo; in <cite>PSPP Users Guide</cite>) are always left from one case to another.
</p>
<p>The following functions work with a variable&rsquo;s leave status.
</p>
<dl>
<dt><a name="index-var_005fget_005fleave"></a><u>Function:</u> bool <b>var_get_leave</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var>&rsquo;s value is to be retained from case to case,
false if it is reinitialized to system-missing or spaces.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fleave"></a><u>Function:</u> void <b>var_set_leave</b><i> (struct variable *<var>var</var>, bool <var>leave</var>)</i></dt>
<dd><p>If <var>leave</var> is true, marks <var>var</var> to be left from case to case;
if <var>leave</var> is false, marks <var>var</var> to be reinitialized for each
case.
</p>
<p>If <var>var</var> is a scratch variable, <var>leave</var> must be true.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fmust_005fleave"></a><u>Function:</u> bool <b>var_must_leave</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> must be left from case to case, that is, if
<var>var</var> is a scratch variable.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Class"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Leave-Status" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Creation-and-Destruction" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Dictionary-Class-1"></a>
<h3 class="subsection">2.5.9 Dictionary Class</h3>

<p>Occasionally it is useful to classify variables into <em>dictionary
classes</em> based on their names.  Dictionary classes are represented by
<code>enum dict_class</code>.  This type and other declarations for dictionary
classes are in the &lsquo;<tt>&lt;data/dict-class.h&gt;</tt>&rsquo; header.
</p>
<dl>
<dt><a name="index-enum-dict_005fclass"></a><u>Enumeration:</u> <b>enum dict_class</b></dt>
<dd><p>The dictionary classes are:
</p>
<dl compact="compact">
<dt> <code>DC_ORDINARY</code></dt>
<dd><p>An ordinary variable, one whose name does not begin with &lsquo;<samp>$</samp>&rsquo; or
&lsquo;<samp>#</samp>&rsquo;.
</p>
</dd>
<dt> <code>DC_SYSTEM</code></dt>
<dd><p>A system variable, one whose name begins with &lsquo;<samp>$</samp>&rsquo;.  See <a href="pspp.html#System-Variables">(pspp)System Variables</a> section &lsquo;System Variables&rsquo; in <cite>PSPP Users Guide</cite>.
</p>
</dd>
<dt> <code>DC_SCRATCH</code></dt>
<dd><p>A scratch variable, one whose name begins with &lsquo;<samp>#</samp>&rsquo;.
See <a href="pspp.html#Scratch-Variables">(pspp)Scratch Variables</a> section &lsquo;Scratch Variables&rsquo; in <cite>PSPP Users Guide</cite>.
</p></dd>
</dl>

<p>The values for dictionary classes are bitwise disjoint, which allows
them to be used in bit-masks.  An extra enumeration constant
<code>DC_ALL</code>, whose value is the bitwise-<i>or</i> of all of the above
constants, is provided to aid in this purpose.
</p></dd></dl>

<p>One example use of dictionary classes arises in connection with PSPP
syntax that uses <code><var>a</var> TO <var>b</var></code> to name the variables in a
dictionary from <var>a</var> to <var>b</var> (see <a href="pspp.html#Sets-of-Variables">(pspp)Sets of Variables</a> section &lsquo;Sets of Variables&rsquo; in <cite>PSPP Users Guide</cite>).  This syntax requires <var>a</var> and <var>b</var> to be in
the same dictionary class.  It limits the variables that it includes
to those in that dictionary class.
</p>
<p>The following functions relate to dictionary classes.
</p>
<dl>
<dt><a name="index-dict_005fclass_005ffrom_005fid"></a><u>Function:</u> enum dict_class <b>dict_class_from_id</b><i> (const char *<var>name</var>)</i></dt>
<dd><p>Returns the &ldquo;dictionary class&rdquo; for the given variable <var>name</var>, by
looking at its first letter.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fclass_005fto_005fname"></a><u>Function:</u> const char * <b>dict_class_to_name</b><i> (enum dict_class <var>dict_class</var>)</i></dt>
<dd><p>Returns a name for the given <var>dict_class</var> as an adjective, e.g.
<code>&quot;scratch&quot;</code>.
</p>
<p>This function should probably not be used in new code as it can lead
to difficulties for internationalization.
</p></dd></dl>

<hr size="6">
<a name="Variable-Creation-and-Destruction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Class" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Short-Names" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Creation-and-Destruction-1"></a>
<h3 class="subsection">2.5.10 Variable Creation and Destruction</h3>

<p>Only rarely should PSPP code create or destroy variables directly.
Ordinarily, variables are created within a dictionary and destroying
by individual deletion from the dictionary or by destroying the entire
dictionary at once.  The functions here enable the exceptional case,
of creation and destruction of variables that are not associated with
any dictionary.  These functions are used internally in the dictionary
implementation.
</p>
<p><a name="var_005fcreate"></a>
</p><dl>
<dt><a name="index-var_005fcreate"></a><u>Function:</u> struct variable * <b>var_create</b><i> (const char *<var>name</var>, int <var>width</var>)</i></dt>
<dd><p>Creates and returns a new variable with the given <var>name</var> and
<var>width</var>.  The new variable is not part of any dictionary.  Use
<code>dict_create_var</code>, instead, to create a variable in a dictionary
(see section <a href="#Dictionary-Creating-Variables">Creating Variables</a>).
</p>
<p><var>name</var> should be a valid variable name and must be a &ldquo;plausible&rdquo;
variable name (see section <a href="#Variable-Name">Variable Name</a>).  <var>width</var> must be between 0
and <code>MAX_STRING</code>, inclusive (see section <a href="#Values">Values</a>).
</p>
<p>The new variable has no user-missing values, value labels, or variable
label.  Numeric variables initially have F8.2 print and write formats,
right-justified display alignment, and scale level of measurement.
String variables are created with A print and write formats,
left-justified display alignment, and nominal level of measurement.
The initial display width is determined by
<code>var_default_display_width</code> (see <a href="#var_005fdefault_005fdisplay_005fwidth">var_default_display_width</a>).
</p>
<p>The new variable initially has no short name (see section <a href="#Variable-Short-Names">Variable Short Names</a>) and no auxiliary data (see section <a href="#Variable-Auxiliary-Data">Variable Auxiliary Data</a>).
</p></dd></dl>

<p><a name="var_005fclone"></a>
</p><dl>
<dt><a name="index-var_005fclone"></a><u>Function:</u> struct variable * <b>var_clone</b><i> (const struct variable *<var>old_var</var>)</i></dt>
<dd><p>Creates and returns a new variable with the same attributes as
<var>old_var</var>, with a few exceptions.  First, the new variable is not
part of any dictionary, regardless of whether <var>old_var</var> was in a
dictionary.  Use <code>dict_clone_var</code>, instead, to add a clone of a
variable to a dictionary.
</p>
<p>Second, the new variable is not given any short name, even if
<var>old_var</var> had a short name.  This is because the new variable is
likely to be immediately renamed, in which case the short name would
be incorrect (see section <a href="#Variable-Short-Names">Variable Short Names</a>).
</p>
<p>Finally, <var>old_var</var>&rsquo;s auxiliary data, if any, is not copied to the
new variable (see section <a href="#Variable-Auxiliary-Data">Variable Auxiliary Data</a>).
</p></dd></dl>

<dl>
<dt><a name="index-var_005fdestroy"></a><u>Function:</u> void <b>var_destroy</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Destroys <var>var</var> and frees all associated storage, including its
auxiliary data, if any.  <var>var</var> must not be part of a dictionary.
To delete a variable from a dictionary and destroy it, use
<code>dict_delete_var</code> (see section <a href="#Dictionary-Deleting-Variables">Deleting Variables</a>).
</p></dd></dl>

<hr size="6">
<a name="Variable-Short-Names"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Creation-and-Destruction" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Relationships" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Short-Names-1"></a>
<h3 class="subsection">2.5.11 Variable Short Names</h3>

<p>PSPP variable names may be up to 64 (<code>ID_MAX_LEN</code>) bytes long.
The system and portable file formats, however, were designed when
variable names were limited to 8 bytes in length.  Since then, the
system file format has been augmented with an extension record that
explains how the 8-byte short names map to full-length names
(see section <a href="#Long-Variable-Names-Record">Long Variable Names Record</a>), but the short names are still
present.  Thus, the continued presence of the short names is more or
less invisible to PSPP users, but every variable in a system file
still has a short name that must be unique.
</p>
<p>PSPP can generate unique short names for variables based on their full
names at the time it creates the data file.  If all variables&rsquo; full
names are unique in their first 8 bytes, then the short names are
simply prefixes of the full names; otherwise, PSPP changes them so
that they are unique.
</p>
<p>By itself this algorithm interoperates well with other software that
can read system files, as long as that software understands the
extension record that maps short names to long names.  When the other
software does not understand the extension record, it can produce
surprising results.  Consider a situation where PSPP reads a system
file that contains two variables named RANKINGSCORE, then the user
adds a new variable named RANKINGSTATUS, then saves the modified data
as a new system file.  A program that does not understand long names
would then see one of these variables under the name RANKINGS&mdash;either
one, depending on the algorithm&rsquo;s details&mdash;and the other under a
different name.  The effect could be very confusing: by adding a new
and apparently unrelated variable in PSPP, the user effectively
renamed the existing variable.
</p>
<p>To counteract this potential problem, every <code>struct variable</code> may have
a short name.  A variable created by the system or portable file
reader receives the short name from that data file.  When a variable
with a short name is written to a system or portable file, that
variable receives priority over other long names whose names begin
with the same 8 bytes but which were not read from a data file under
that short name.
</p>
<p>Variables not created by the system or portable file reader have no
short name by default.
</p>
<p>A variable with a full name of 8 bytes or less in length has absolute
priority for that name when the variable is written to a system file,
even over a second variable with that assigned short name.
</p>
<p>PSPP does not enforce uniqueness of short names, although the short
names read from any given data file will always be unique.  If two
variables with the same short name are written to a single data file,
neither one receives priority.
</p>
<p>The following macros and functions relate to short names.
</p>
<dl>
<dt><a name="index-SHORT_005fNAME_005fLEN"></a><u>Macro:</u> <b>SHORT_NAME_LEN</b></dt>
<dd><p>Maximum length of a short name, in bytes.  Its value is 8.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fshort_005fname"></a><u>Function:</u> const char * <b>var_get_short_name</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s short name, or a null pointer if <var>var</var> has not
been assigned a short name.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fshort_005fname"></a><u>Function:</u> void <b>var_set_short_name</b><i> (struct variable *<var>var</var>, const char *<var>short_name</var>)</i></dt>
<dd><p>Sets <var>var</var>&rsquo;s short name to <var>short_name</var>, or removes
<var>var</var>&rsquo;s short name if <var>short_name</var> is a null pointer.  If it
is non-null, then <var>short_name</var> must be a plausible name for a
variable.  The name will be truncated
to 8 bytes in length and converted to all-uppercase.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fclear_005fshort_005fname"></a><u>Function:</u> void <b>var_clear_short_name</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Removes <var>var</var>&rsquo;s short name.
</p></dd></dl>

<hr size="6">
<a name="Variable-Relationships"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Short-Names" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Auxiliary-Data" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Relationships-1"></a>
<h3 class="subsection">2.5.12 Variable Relationships</h3>

<p>Variables have close relationships with dictionaries
(see section <a href="#Dictionaries">Dictionaries</a>) and cases (see section <a href="#Cases">Cases</a>).  A variable is
usually a member of some dictionary, and a case is often used to store
data for the set of variables in a dictionary.
</p>
<p>These functions report on these relationships.  They may be applied
only to variables that are in a dictionary.
</p>
<dl>
<dt><a name="index-var_005fget_005fdict_005findex"></a><u>Function:</u> size_t <b>var_get_dict_index</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s index within its dictionary.  The first variable
in a dictionary has index 0, the next variable index 1, and so on.
</p>
<p>The dictionary index can be influenced using dictionary functions such
as dict_reorder_var (see <a href="#dict_005freorder_005fvar">dict_reorder_var</a>).
</p></dd></dl>

<dl>
<dt><a name="index-var_005fget_005fcase_005findex"></a><u>Function:</u> size_t <b>var_get_case_index</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s index within a case.  The case index is an index
into an array of <code>union value</code> large enough to contain all the data in
the dictionary.
</p>
<p>The returned case index can be used to access the value of <var>var</var>
within a case for its dictionary, as in e.g. <code>case_data_idx
(case, var_get_case_index (<var>var</var>))</code>, but ordinarily it is more
convenient to use the data access functions that do variable-to-index
translation internally, as in e.g. <code>case_data (case,
<var>var</var>)</code>.
</p></dd></dl>

<hr size="6">
<a name="Variable-Auxiliary-Data"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Relationships" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Categorical-Values" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Auxiliary-Data-1"></a>
<h3 class="subsection">2.5.13 Variable Auxiliary Data</h3>

<p>Each <code>struct variable</code> can have a single pointer to auxiliary data of
type <code>void *</code>.  These functions manipulate a variable&rsquo;s auxiliary
data.
</p>
<p>Use of auxiliary data is discouraged because of its lack of
flexibility.  Only one client can make use of auxiliary data on a
given variable at any time, even though many clients could usefully
associate data with a variable.
</p>
<p>To prevent multiple clients from attempting to use a variable&rsquo;s single
auxiliary data field at the same time, we adopt the convention that
use of auxiliary data in the active dataset dictionary is restricted to
the currently executing command.  In particular, transformations must
not attach auxiliary data to a variable in the active dataset in the
expectation that it can be used later when the active dataset is read and
the transformation is executed.  To help enforce this restriction,
auxiliary data is deleted from all variables in the active dataset
dictionary after the execution of each PSPP command.
</p>
<p>This convention for safe use of auxiliary data applies only to the
active dataset dictionary.  Rules for other dictionaries may be
established separately.
</p>
<p>Auxiliary data should be replaced by a more flexible mechanism at some
point, but no replacement mechanism has been designed or implemented
so far.
</p>
<p>The following functions work with variable auxiliary data.
</p>
<dl>
<dt><a name="index-var_005fget_005faux"></a><u>Function:</u> void * <b>var_get_aux</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s auxiliary data, or a null pointer if none has been
assigned.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fattach_005faux"></a><u>Function:</u> void * <b>var_attach_aux</b><i> (const struct variable *<var>var</var>, void *<var>aux</var>, void (*<var>aux_dtor</var>) (struct variable *))</i></dt>
<dd><p>Sets <var>var</var>&rsquo;s auxiliary data to <var>aux</var>, which must not be null.
<var>var</var> must not already have auxiliary data.
</p>
<p>Before <var>var</var>&rsquo;s auxiliary data is cleared by <code>var_clear_aux</code>,
<var>aux_dtor</var>, if non-null, will be called with <var>var</var> as its
argument.  It should free any storage associated with <var>aux</var>, if
necessary.  <code>var_dtor_free</code> may be appropriate for use as
<var>aux_dtor</var>:
</p>
<dl>
<dt><a name="index-void"></a><u>Function:</u> <b>void</b><i> var_dtor_free (struct variable *<var>var</var>)</i></dt>
<dd><p>Frees <var>var</var>&rsquo;s auxiliary data by calling <code>free</code>.
</p></dd></dl>
</dd></dl>

<dl>
<dt><a name="index-var_005fclear_005faux"></a><u>Function:</u> void <b>var_clear_aux</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Removes auxiliary data, if any, from <var>var</var>, first calling the
destructor passed to <code>var_attach_aux</code>, if one was provided.
</p>
<p>Use <code>dict_clear_aux</code> to remove auxiliary data from every variable
in a dictionary. </p></dd></dl>

<dl>
<dt><a name="index-var_005fdetach_005faux"></a><u>Function:</u> void * <b>var_detach_aux</b><i> (struct variable *<var>var</var>)</i></dt>
<dd><p>Removes auxiliary data, if any, from <var>var</var>, and returns it.
Returns a null pointer if <var>var</var> had no auxiliary data.
</p>
<p>Any destructor passed to <code>var_attach_aux</code> is not called, so the
caller is responsible for freeing storage associated with the returned
auxiliary data.
</p></dd></dl>

<hr size="6">
<a name="Variable-Categorical-Values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Auxiliary-Data" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variables" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Categorical-Values-1"></a>
<h3 class="subsection">2.5.14 Variable Categorical Values</h3>

<p>Some statistical procedures require a list of all the values that a
categorical variable takes on.  Arranging such a list requires making
a pass through the data, so PSPP caches categorical values in
<code>struct variable</code>.
</p>
<p>When variable auxiliary data is revamped to support multiple clients
as described in the previous section, categorical values are an
obvious candidate.  The form in which they are currently supported is
inelegant.
</p>
<p>Categorical values are not robust against changes in the data.  That
is, there is currently no way to detect that a transformation has
changed data values, meaning that categorical values lists for the
changed variables must be recomputed.  PSPP is in fact in need of a
general-purpose caching and cache-invalidation mechanism, but none
has yet been designed and built.
</p>
<p>The following functions work with cached categorical values.
</p>
<dl>
<dt><a name="index-var_005fget_005fobs_005fvals"></a><u>Function:</u> struct cat_vals * <b>var_get_obs_vals</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns <var>var</var>&rsquo;s set of categorical values.  Yields undefined
behavior if <var>var</var> does not have any categorical values.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fset_005fobs_005fvals"></a><u>Function:</u> void <b>var_set_obs_vals</b><i> (const struct variable *<var>var</var>, struct cat_vals *<var>cat_vals</var>)</i></dt>
<dd><p>Destroys <var>var</var>&rsquo;s categorical values, if any, and replaces them by
<var>cat_vals</var>, ownership of which is transferred to <var>var</var>.  If
<var>cat_vals</var> is a null pointer, then <var>var</var>&rsquo;s categorical values
are cleared.
</p></dd></dl>

<dl>
<dt><a name="index-var_005fhas_005fobs_005fvals"></a><u>Function:</u> bool <b>var_has_obs_vals</b><i> (const struct variable *<var>var</var>)</i></dt>
<dd><p>Returns true if <var>var</var> has a set of categorical values, false
otherwise.
</p></dd></dl>

<hr size="6">
<a name="Dictionaries"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Categorical-Values" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Variable-Access" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Dictionaries-1"></a>
<h2 class="section">2.6 Dictionaries</h2>

<p>Each data file in memory or on disk has an associated dictionary,
whose primary purpose is to describe the data in the file.
See <a href="pspp.html#Variables">(pspp)Variables</a> section &lsquo;Variables&rsquo; in <cite>PSPP Users Guide</cite>, for a PSPP user&rsquo;s view of a
dictionary.
</p>
<p>A data file stored in a PSPP format, either as a system or portable
file, has a representation of its dictionary embedded in it.  Other
kinds of data files are usually not self-describing enough to
construct a dictionary unassisted, so the dictionaries for these files
must be specified explicitly with PSPP commands such as DATA
LIST.
</p>
<p>The most important content of a dictionary is an array of variables,
which must have unique names.  A dictionary also conceptually contains
a mapping from each of its variables to a location within a case
(see section <a href="#Cases">Cases</a>), although in fact these mappings are stored within
individual variables.
</p>
<p>System variables are not members of any dictionary (see <a href="pspp.html#System-Variables">(pspp)System Variables</a> section &lsquo;System Variables&rsquo; in <cite>PSPP Users Guide</cite>).
</p>
<p>Dictionaries are represented by <code>struct dictionary</code>.  Declarations
related to dictionaries are in the &lsquo;<tt>&lt;data/dictionary.h&gt;</tt>&rsquo; header.
</p>
<p>The following sections describe functions for use with dictionaries.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Dictionary-Variable-Access">2.6.1 Accessing Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Creating-Variables">2.6.2 Creating Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Deleting-Variables">2.6.3 Deleting Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Reordering-Variables">2.6.4 Changing Variable Order</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Renaming-Variables">2.6.5 Renaming Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Weight-Variable">2.6.6 Weight Variable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Filter-Variable">2.6.7 Filter Variable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Case-Limit">2.6.8 Case Limit</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Split-Variables">2.6.9 Split Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-File-Label">2.6.10 File Label</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Documents">2.6.11 Documents</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Dictionary-Variable-Access"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionaries" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Creating-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Accessing-Variables"></a>
<h3 class="subsection">2.6.1 Accessing Variables</h3>

<p>The most common operations on a dictionary simply retrieve a
<code>struct variable *</code> of an individual variable based on its name
or position.
</p>
<dl>
<dt><a name="index-dict_005flookup_005fvar"></a><u>Function:</u> struct variable * <b>dict_lookup_var</b><i> (const struct dictionary *<var>dict</var>, const char *<var>name</var>)</i></dt>
<dt><a name="index-dict_005flookup_005fvar_005fassert"></a><u>Function:</u> struct variable * <b>dict_lookup_var_assert</b><i> (const struct dictionary *<var>dict</var>, const char *<var>name</var>)</i></dt>
<dd><p>Looks up and returns the variable with the given <var>name</var> within
<var>dict</var>.  Name lookup is not case-sensitive.
</p>
<p><code>dict_lookup_var</code> returns a null pointer if <var>dict</var> does not
contain a variable named <var>name</var>.  <code>dict_lookup_var_assert</code>
asserts that such a variable exists.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fvar"></a><u>Function:</u> struct variable * <b>dict_get_var</b><i> (const struct dictionary *<var>dict</var>, size_t <var>position</var>)</i></dt>
<dd><p>Returns the variable at the given <var>position</var> in <var>dict</var>.
<var>position</var> must be less than the number of variables in <var>dict</var>
(see below).
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fvar_005fcnt"></a><u>Function:</u> size_t <b>dict_get_var_cnt</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the number of variables in <var>dict</var>.
</p></dd></dl>

<p>Another pair of functions allows retrieving a number of variables at
once.  These functions are more rarely useful.
</p>
<dl>
<dt><a name="index-dict_005fget_005fvars"></a><u>Function:</u> void <b>dict_get_vars</b><i> (const struct dictionary *<var>dict</var>, const struct variable ***<var>vars</var>, size_t *<var>cnt</var>, enum dict_class <var>exclude</var>)</i></dt>
<dt><a name="index-dict_005fget_005fvars_005fmutable"></a><u>Function:</u> void <b>dict_get_vars_mutable</b><i> (const struct dictionary *<var>dict</var>, struct variable ***<var>vars</var>, size_t *<var>cnt</var>, enum dict_class <var>exclude</var>)</i></dt>
<dd><p>Retrieves all of the variables in <var>dict</var>, in their original order,
except that any variables in the dictionary classes specified
<var>exclude</var>, if any, are excluded (see section <a href="#Dictionary-Class">Dictionary Class</a>).
Pointers to the variables are stored in an array allocated with
<code>malloc</code>, and a pointer to the first element of this array is
stored in <code>*<var>vars</var></code>.  The caller is responsible for freeing
this memory when it is no longer needed.  The number of variables
retrieved is stored in <code>*<var>cnt</var></code>.
</p>
<p>The presence or absence of <code>DC_SYSTEM</code> in <var>exclude</var> has no
effect, because dictionaries never include system variables.
</p></dd></dl>

<p>One additional function is available.  This function is most often
used in assertions, but it is not restricted to such use.
</p>
<dl>
<dt><a name="index-dict_005fcontains_005fvar"></a><u>Function:</u> bool <b>dict_contains_var</b><i> (const struct dictionary *<var>dict</var>, const struct variable *<var>var</var>)</i></dt>
<dd><p>Tests whether <var>var</var> is one of the variables in <var>dict</var>.
Returns true if so, false otherwise.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Creating-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Variable-Access" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Deleting-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Creating-Variables"></a>
<h3 class="subsection">2.6.2 Creating Variables</h3>

<p>These functions create a new variable and insert it into a dictionary
in a single step.
</p>
<p>There is no provision for inserting an already created variable into a
dictionary.  There is no reason that such a function could not be
written, but so far there has been no need for one.
</p>
<p>The names provided to one of these functions should be valid variable
names and must be plausible variable names. </p>
<p>If a variable with the same name already exists in the dictionary, the
non-<code>assert</code> variants of these functions return a null pointer,
without modifying the dictionary.  The <code>assert</code> variants, on the
other hand, assert that no duplicate name exists.
</p>
<p>A variable may be in only one dictionary at any given time.
</p>
<dl>
<dt><a name="index-dict_005fcreate_005fvar"></a><u>Function:</u> struct variable * <b>dict_create_var</b><i> (struct dictionary *<var>dict</var>, const char *<var>name</var>, int <var>width</var>)</i></dt>
<dt><a name="index-dict_005fcreate_005fvar_005fassert"></a><u>Function:</u> struct variable * <b>dict_create_var_assert</b><i> (struct dictionary *<var>dict</var>, const char *<var>name</var>, int <var>width</var>)</i></dt>
<dd><p>Creates a new variable with the given <var>name</var> and <var>width</var>, as
if through a call to <code>var_create</code> with those arguments
(see <a href="#var_005fcreate">var_create</a>), appends the new variable to <var>dict</var>&rsquo;s array
of variables, and returns the new variable.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fclone_005fvar"></a><u>Function:</u> struct variable * <b>dict_clone_var</b><i> (struct dictionary *<var>dict</var>, const struct variable *<var>old_var</var>)</i></dt>
<dt><a name="index-dict_005fclone_005fvar_005fassert"></a><u>Function:</u> struct variable * <b>dict_clone_var_assert</b><i> (struct dictionary *<var>dict</var>, const struct variable *<var>old_var</var>)</i></dt>
<dd><p>Creates a new variable as a clone of <var>var</var>, inserts the new
variable into <var>dict</var>, and returns the new variable.  Other
properties of the new variable are copied from <var>old_var</var>, except
for those not copied by <code>var_clone</code> (see <a href="#var_005fclone">var_clone</a>).
</p>
<p><var>var</var> does not need to be a member of any dictionary.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fclone_005fvar_005fas"></a><u>Function:</u> struct variable * <b>dict_clone_var_as</b><i> (struct dictionary *<var>dict</var>, const struct variable *<var>old_var</var>, const char *<var>name</var>)</i></dt>
<dt><a name="index-dict_005fclone_005fvar_005fas_005fassert"></a><u>Function:</u> struct variable * <b>dict_clone_var_as_assert</b><i> (struct dictionary *<var>dict</var>, const struct variable *<var>old_var</var>, const char *<var>name</var>)</i></dt>
<dd><p>These functions are similar to <code>dict_clone_var</code> and
<code>dict_clone_var_assert</code>, respectively, except that the new
variable is named <var>name</var> instead of keeping <var>old_var</var>&rsquo;s name.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Deleting-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Creating-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Reordering-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Deleting-Variables"></a>
<h3 class="subsection">2.6.3 Deleting Variables</h3>

<p>These functions remove variables from a dictionary&rsquo;s array of
variables.  They also destroy the removed variables and free their
associated storage.
</p>
<p>Deleting a variable to which there might be external pointers is a bad
idea.  In particular, deleting variables from the active dataset
dictionary is a risky proposition, because transformations can retain
references to arbitrary variables.  Therefore, no variable should be
deleted from the active dataset dictionary when any transformations are
active, because those transformations might reference the variable to
be deleted.  The safest time to delete a variable is just after a
procedure has been executed, as done by DELETE VARIABLES.
</p>
<p>Deleting a variable automatically removes references to that variable
from elsewhere in the dictionary as a weighting variable, filter
variable, SPLIT FILE variable, or member of a vector.
</p>
<p>No functions are provided for removing a variable from a dictionary
without destroying that variable.  As with insertion of an existing
variable, there is no reason that this could not be implemented, but
so far there has been no need.
</p>
<dl>
<dt><a name="index-dict_005fdelete_005fvar"></a><u>Function:</u> void <b>dict_delete_var</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>)</i></dt>
<dd><p>Deletes <var>var</var> from <var>dict</var>, of which it must be a member.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fdelete_005fvars"></a><u>Function:</u> void <b>dict_delete_vars</b><i> (struct dictionary *<var>dict</var>, struct variable *const *<var>vars</var>, size_t <var>count</var>)</i></dt>
<dd><p>Deletes the <var>count</var> variables in array <var>vars</var> from <var>dict</var>.
All of the variables in <var>vars</var> must be members of <var>dict</var>.  No
variable may be included in <var>vars</var> more than once.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fdelete_005fconsecutive_005fvars"></a><u>Function:</u> void <b>dict_delete_consecutive_vars</b><i> (struct dictionary *<var>dict</var>, size_t <var>idx</var>, size_t <var>count</var>)</i></dt>
<dd><p>Deletes the variables in sequential positions
<var>idx</var>&hellip;<var>idx</var> + <var>count</var> (exclusive) from <var>dict</var>,
which must contain at least <var>idx</var> + <var>count</var> variables.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fdelete_005fscratch_005fvars"></a><u>Function:</u> void <b>dict_delete_scratch_vars</b><i> (struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Deletes all scratch variables from <var>dict</var>.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Reordering-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Deleting-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Renaming-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Changing-Variable-Order"></a>
<h3 class="subsection">2.6.4 Changing Variable Order</h3>

<p>The variables in a dictionary are stored in an array.  These functions
change the order of a dictionary&rsquo;s array of variables without changing
which variables are in the dictionary.
</p>
<p><a name="dict_005freorder_005fvar"></a>
</p><dl>
<dt><a name="index-dict_005freorder_005fvar"></a><u>Function:</u> void <b>dict_reorder_var</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>, size_t <var>new_index</var>)</i></dt>
<dd><p>Moves <var>var</var>, which must be in <var>dict</var>, so that it is at
position <var>new_index</var> in <var>dict</var>&rsquo;s array of variables.  Other
variables in <var>dict</var>, if any, retain their relative positions.
<var>new_index</var> must be less than the number of variables in
<var>dict</var>.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005freorder_005fvars"></a><u>Function:</u> void <b>dict_reorder_vars</b><i> (struct dictionary *<var>dict</var>, struct variable *const *<var>new_order</var>, size_t <var>count</var>)</i></dt>
<dd><p>Moves the <var>count</var> variables in <var>new_order</var> to the beginning of
<var>dict</var>&rsquo;s array of variables in the specified order.  Other
variables in <var>dict</var>, if any, retain their relative positions.
</p>
<p>All of the variables in <var>new_order</var> must be in <var>dict</var>.  No
duplicates are allowed within <var>new_order</var>, which means that
<var>count</var> must be no greater than the number of variables in
<var>dict</var>.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Renaming-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Reordering-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Weight-Variable" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Renaming-Variables"></a>
<h3 class="subsection">2.6.5 Renaming Variables</h3>

<p>These functions change the names of variables within a dictionary.
The <code>var_set_name</code> function (see <a href="#var_005fset_005fname">var_set_name</a>) cannot be
applied directly to a variable that is in a dictionary, because
<code>struct dictionary</code> contains an index by name that <code>var_set_name</code>
would not update.  The following functions take care to update the
index as well.  They also ensure that variable renaming does not cause
a dictionary to contain a duplicate variable name.
</p>
<dl>
<dt><a name="index-dict_005frename_005fvar"></a><u>Function:</u> void <b>dict_rename_var</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>, const char *<var>new_name</var>)</i></dt>
<dd><p>Changes the name of <var>var</var>, which must be in <var>dict</var>, to
<var>new_name</var>.  A variable named <var>new_name</var> must not already be
in <var>dict</var>, unless <var>new_name</var> is the same as <var>var</var>&rsquo;s
current name.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005frename_005fvars"></a><u>Function:</u> bool <b>dict_rename_vars</b><i> (struct dictionary *<var>dicT</var>, struct variable **<var>vars</var>, char **<var>new_names</var>, size_t <var>count</var>, char **<var>err_name</var>)</i></dt>
<dd><p>Renames each of the <var>count</var> variables in <var>vars</var> to the name in
the corresponding position of <var>new_names</var>.  If the renaming would
result in a duplicate variable name, returns false and stores one of
the names that would be be duplicated into <code>*<var>err_name</var></code>, if
<var>err_name</var> is non-null.  Otherwise, the renaming is successful,
and true is returned.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Weight-Variable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Renaming-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Filter-Variable" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Weight-Variable"></a>
<h3 class="subsection">2.6.6 Weight Variable</h3>

<p>A data set&rsquo;s cases may optionally be weighted by the value of a
numeric variable.  See <a href="pspp.html#WEIGHT">(pspp)WEIGHT</a> section &lsquo;WEIGHT&rsquo; in <cite>PSPP Users Guide</cite>, for a user
view of weight variables.
</p>
<p>The weight variable is written to and read from system and portable
files.
</p>
<p>The most commonly useful function related to weighting is a
convenience function to retrieve a weighting value from a case.
</p>
<dl>
<dt><a name="index-dict_005fget_005fcase_005fweight"></a><u>Function:</u> double <b>dict_get_case_weight</b><i> (const struct dictionary *<var>dict</var>, const struct ccase *<var>case</var>, bool *<var>warn_on_invalid</var>)</i></dt>
<dd><p>Retrieves and returns the value of the weighting variable specified by
<var>dict</var> from <var>case</var>.  Returns 1.0 if <var>dict</var> has no
weighting variable.
</p>
<p>Returns 0.0 if <var>c</var>&rsquo;s weight value is user- or system-missing,
zero, or negative.  In such a case, if <var>warn_on_invalid</var> is
non-null and <code>*<var>warn_on_invalid</var></code> is true,
<code>dict_get_case_weight</code> also issues an error message and sets
<code>*<var>warn_on_invalid</var></code> to false.  To disable error reporting,
pass a null pointer or a pointer to false as <var>warn_on_invalid</var> or
use a <code>msg_disable</code>/<code>msg_enable</code> pair.
</p></dd></dl>

<p>The dictionary also has a pair of functions for getting and setting
the weight variable.
</p>
<dl>
<dt><a name="index-dict_005fget_005fweight"></a><u>Function:</u> struct variable * <b>dict_get_weight</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns <var>dict</var>&rsquo;s current weighting variable, or a null pointer if
the dictionary does not have a weighting variable.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005fweight"></a><u>Function:</u> void <b>dict_set_weight</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s weighting variable to <var>var</var>.  If <var>var</var> is
non-null, it must be a numeric variable in <var>dict</var>.  If <var>var</var>
is null, then <var>dict</var>&rsquo;s weighting variable, if any, is cleared.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Filter-Variable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Weight-Variable" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Case-Limit" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Filter-Variable"></a>
<h3 class="subsection">2.6.7 Filter Variable</h3>

<p>When the active dataset is read by a procedure, cases can be excluded
from analysis based on the values of a <em>filter variable</em>.
See <a href="pspp.html#FILTER">(pspp)FILTER</a> section &lsquo;FILTER&rsquo; in <cite>PSPP Users Guide</cite>, for a user view of filtering.
</p>
<p>These functions store and retrieve the filter variable.  They are
rarely useful, because the data analysis framework automatically
excludes from analysis the cases that should be filtered.
</p>
<dl>
<dt><a name="index-dict_005fget_005ffilter"></a><u>Function:</u> struct variable * <b>dict_get_filter</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns <var>dict</var>&rsquo;s current filter variable, or a null pointer if the
dictionary does not have a filter variable.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005ffilter"></a><u>Function:</u> void <b>dict_set_filter</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s filter variable to <var>var</var>.  If <var>var</var> is
non-null, it must be a numeric variable in <var>dict</var>.  If <var>var</var>
is null, then <var>dict</var>&rsquo;s filter variable, if any, is cleared.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Case-Limit"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Filter-Variable" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Split-Variables" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Case-Limit"></a>
<h3 class="subsection">2.6.8 Case Limit</h3>

<p>The limit on cases analyzed by a procedure, set by the N OF
CASES command (see <a href="pspp.html#N-OF-CASES">(pspp)N OF CASES</a> section &lsquo;N OF CASES&rsquo; in <cite>PSPP Users Guide</cite>), is
stored as part of the dictionary.  The dictionary does not, on the
other hand, play any role in enforcing the case limit (a job done by
data analysis framework code).
</p>
<p>A case limit of 0 means that the number of cases is not limited.
</p>
<p>These functions are rarely useful, because the data analysis framework
automatically excludes from analysis any cases beyond the limit.
</p>
<dl>
<dt><a name="index-dict_005fget_005fcase_005flimit"></a><u>Function:</u> casenumber <b>dict_get_case_limit</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the current case limit for <var>dict</var>.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005fcase_005flimit"></a><u>Function:</u> void <b>dict_set_case_limit</b><i> (struct dictionary *<var>dict</var>, casenumber <var>limit</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s case limit to <var>limit</var>.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Split-Variables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Case-Limit" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-File-Label" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Split-Variables"></a>
<h3 class="subsection">2.6.9 Split Variables</h3>

<p>The user may use the SPLIT FILE command (see <a href="pspp.html#SPLIT-FILE">(pspp)SPLIT FILE</a> section &lsquo;SPLIT FILE&rsquo; in <cite>PSPP Users Guide</cite>) to select a set of variables on which
to split the active dataset into groups of cases to be analyzed
independently in each statistical procedure.  The set of split
variables is stored as part of the dictionary, although the effect on
data analysis is implemented by each individual statistical procedure.
</p>
<p>Split variables may be numeric or short or long string variables.
</p>
<p>The most useful functions for split variables are those to retrieve
them.  Even these functions are rarely useful directly: for the
purpose of breaking cases into groups based on the values of the split
variables, it is usually easier to use
<code>casegrouper_create_splits</code>.
</p>
<dl>
<dt><a name="index-dict_005fget_005fsplit_005fvars"></a><u>Function:</u> const struct variable *const * <b>dict_get_split_vars</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns a pointer to an array of pointers to split variables.  If and
only if there are no split variables, returns a null pointer.  The
caller must not modify or free the returned array.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fsplit_005fcnt"></a><u>Function:</u> size_t <b>dict_get_split_cnt</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the number of split variables.
</p></dd></dl>

<p>The following functions are also available for working with split
variables.
</p>
<dl>
<dt><a name="index-dict_005fset_005fsplit_005fvars"></a><u>Function:</u> void <b>dict_set_split_vars</b><i> (struct dictionary *<var>dict</var>, struct variable *const *<var>vars</var>, size_t <var>cnt</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s split variables to the <var>cnt</var> variables in
<var>vars</var>.  If <var>cnt</var> is 0, then <var>dict</var> will not have any
split variables.  The caller retains ownership of <var>vars</var>.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005funset_005fsplit_005fvar"></a><u>Function:</u> void <b>dict_unset_split_var</b><i> (struct dictionary *<var>dict</var>, struct variable *<var>var</var>)</i></dt>
<dd><p>Removes <var>var</var>, which must be a variable in <var>dict</var>, from
<var>dict</var>&rsquo;s split of split variables.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-File-Label"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Split-Variables" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Documents" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="File-Label"></a>
<h3 class="subsection">2.6.10 File Label</h3>

<p>A dictionary may optionally have an associated string that describes
its contents, called its file label.  The user may set the file label
with the FILE LABEL command (see <a href="pspp.html#FILE-LABEL">(pspp)FILE LABEL</a> section &lsquo;FILE LABEL&rsquo; in <cite>PSPP Users Guide</cite>).
</p>
<p>These functions set and retrieve the file label.
</p>
<dl>
<dt><a name="index-dict_005fget_005flabel"></a><u>Function:</u> const char * <b>dict_get_label</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns <var>dict</var>&rsquo;s file label.  If <var>dict</var> does not have a label,
returns a null pointer.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005flabel"></a><u>Function:</u> void <b>dict_set_label</b><i> (struct dictionary *<var>dict</var>, const char *<var>label</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s label to <var>label</var>.  If <var>label</var> is non-null,
then its content, truncated to at most 60 bytes, becomes the new file
label.  If <var>label</var> is null, then <var>dict</var>&rsquo;s label is removed.
</p>
<p>The caller retains ownership of <var>label</var>.
</p></dd></dl>

<hr size="6">
<a name="Dictionary-Documents"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-File-Label" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Coding-Conventions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionaries" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Documents"></a>
<h3 class="subsection">2.6.11 Documents</h3>

<p>A dictionary may include an arbitrary number of lines of explanatory
text, called the dictionary&rsquo;s documents.  For compatibility, document
lines have a fixed width, and lines that are not exactly this width
are truncated or padded with spaces as necessary to bring them to the
correct width.
</p>
<p>PSPP users can use the DOCUMENT (see <a href="pspp.html#DOCUMENT">(pspp)DOCUMENT</a> section &lsquo;DOCUMENT&rsquo; in <cite>PSPP Users Guide</cite>), ADD DOCUMENT (see <a href="pspp.html#ADD-DOCUMENT">(pspp)ADD DOCUMENT</a> section &lsquo;ADD DOCUMENT&rsquo; in <cite>PSPP Users Guide</cite>), and DROP DOCUMENTS (see <a href="pspp.html#DROP-DOCUMENTS">(pspp)DROP DOCUMENTS</a> section &lsquo;DROP DOCUMENTS&rsquo; in <cite>PSPP Users Guide</cite>) commands to manipulate documents.
</p>
<dl>
<dt><a name="index-DOC_005fLINE_005fLENGTH"></a><u>Macro:</u> int <b>DOC_LINE_LENGTH</b></dt>
<dd><p>The fixed length of a document line, in bytes, defined to 80.
</p></dd></dl>

<p>The following functions work with whole sets of documents.  They
accept or return sets of documents formatted as null-terminated
strings that are an exact multiple of <code>DOC_LINE_LENGTH</code>
bytes in length.
</p>
<dl>
<dt><a name="index-dict_005fget_005fdocuments"></a><u>Function:</u> const char * <b>dict_get_documents</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the documents in <var>dict</var>, or a null pointer if <var>dict</var>
has no documents.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fset_005fdocuments"></a><u>Function:</u> void <b>dict_set_documents</b><i> (struct dictionary *<var>dict</var>, const char *<var>new_documents</var>)</i></dt>
<dd><p>Sets <var>dict</var>&rsquo;s documents to <var>new_documents</var>.  If
<var>new_documents</var> is a null pointer or an empty string, then
<var>dict</var>&rsquo;s documents are cleared.  The caller retains ownership of
<var>new_documents</var>.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fclear_005fdocuments"></a><u>Function:</u> void <b>dict_clear_documents</b><i> (struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Clears the documents from <var>dict</var>.
</p></dd></dl>

<p>The following functions work with individual lines in a dictionary&rsquo;s
set of documents.
</p>
<dl>
<dt><a name="index-dict_005fadd_005fdocument_005fline"></a><u>Function:</u> void <b>dict_add_document_line</b><i> (struct dictionary *<var>dict</var>, const char *<var>content</var>)</i></dt>
<dd><p>Appends <var>content</var> to the documents in <var>dict</var>.  The text in
<var>content</var> will be truncated or padded with spaces as necessary to
make it exactly <code>DOC_LINE_LENGTH</code> bytes long.  The caller retains
ownership of <var>content</var>.
</p>
<p>If <var>content</var> is over <code>DOC_LINE_LENGTH</code>, this function also
issues a warning using <code>msg</code>.  To suppress the warning, enclose a
call to one of this function in a <code>msg_disable</code>/<code>msg_enable</code>
pair.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fdocument_005fline_005fcnt"></a><u>Function:</u> size_t <b>dict_get_document_line_cnt</b><i> (const struct dictionary *<var>dict</var>)</i></dt>
<dd><p>Returns the number of line of documents in <var>dict</var>.  If the
dictionary contains no documents, returns 0.
</p></dd></dl>

<dl>
<dt><a name="index-dict_005fget_005fdocument_005fline"></a><u>Function:</u> void <b>dict_get_document_line</b><i> (const struct dictionary *<var>dict</var>, size_t <var>idx</var>, struct string *<var>content</var>)</i></dt>
<dd><p>Replaces the text in <var>content</var> (which must already have been
initialized by the caller) by the document line in <var>dict</var> numbered
<var>idx</var>, which must be less than the number of lines of documents in
<var>dict</var>.  Any trailing white space in the document line is trimmed,
so that <var>content</var> will have a length between 0 and
<code>DOC_LINE_LENGTH</code>.
</p></dd></dl>

<hr size="6">
<a name="Coding-Conventions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Dictionary-Documents" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Cases" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Coding-Conventions-1"></a>
<h2 class="section">2.7 Coding Conventions</h2>

<p>Every &lsquo;<tt>.c</tt>&rsquo; file should have &lsquo;<samp>#include &lt;config.h&gt;</samp>&rsquo; as its
first non-comment line.  No &lsquo;<tt>.h</tt>&rsquo; file should include
&lsquo;<tt>config.h</tt>&rsquo;.
</p>
<p>This section needs to be finished.
</p>
<hr size="6">
<a name="Cases"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Coding-Conventions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Data-Sets" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Cases-1"></a>
<h2 class="section">2.8 Cases</h2>

<p>This section needs to be written.
</p>
<hr size="6">
<a name="Data-Sets"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Cases" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Pools" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Data-Sets-1"></a>
<h2 class="section">2.9 Data Sets</h2>

<p>This section needs to be written.
</p>
<hr size="6">
<a name="Pools"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Data-Sets" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Pools-1"></a>
<h2 class="section">2.10 Pools</h2>

<p>This section needs to be written.
</p>
<hr size="6">
<a name="Parsing-Command-Syntax"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Pools" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Processing-Data" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Basic-Concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Processing-Data" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Parsing-Command-Syntax-1"></a>
<h1 class="chapter">3. Parsing Command Syntax</h1>
<hr size="6">
<a name="Processing-Data"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Presenting-Output" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Parsing-Command-Syntax" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Presenting-Output" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Processing-Data-1"></a>
<h1 class="chapter">4. Processing Data</h1>

<p>Developer&rsquo;s Guide
</p>
<p>Proposed outline:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">* Introduction
* Basic concepts
** Data sets
** Variables
** Dictionaries
** Coding conventions
** Pools
* Syntax parsing
* Data processing
** Reading data
*** Casereaders generalities
*** Casereaders from data files
*** Casereaders from the active dataset
*** Other casereaders
** Writing data
*** Casewriters generally
*** Casewriters to data files
*** Modifying the active dataset
**** Modifying cases obtained from active dataset casereaders has no real effect
**** Transformations; procedures that transform
** Transforming data
*** Sorting and merging
*** Filtering
*** Grouping
**** Ordering and interaction of filtering and grouping
*** Multiple passes over data
*** Counting cases and case weights
** Best practices
*** Multiple passes with filters versus single pass with loops
*** Sequential versus random access
*** Managing memory
*** Passing cases around
*** Renaming casereaders
*** Avoiding excessive buffering
*** Propagating errors
*** Avoid static/global data
*** Don't worry about null filters, groups, etc.
*** Be aware of reference counting semantics for cases
</pre></td></tr></table>
<hr size="6">
<a name="Presenting-Output"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Processing-Data" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Processing-Data" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Presenting-Output-1"></a>
<h1 class="chapter">5. Presenting Output</h1>
<hr size="6">
<a name="Internationalisation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Presenting-Output" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-working-locales" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Presenting-Output" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Internationalisation-1"></a>
<h1 class="chapter">6. Internationalisation</h1>

<p>Internationalisation in pspp is complicated.
The most annoying aspect is that of character-encoding.
This chapter attempts to describe the problems and current ways 
in which they are addressed.
</p>

<hr size="6">
<a name="The-working-locales"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Internationalisation" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-user-interface-locale" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">6.1 The working locales</h2>
<p>Pspp has three &ldquo;working&rdquo; locales:
</p>
<ul>
<li> The locale of the user interface.
</li><li> The locale of the output.
</li><li> The locale of the data. Only the character encoding is relevant.
</li></ul>

<p>Each of these locales may, at different times take 
separate (or identical) values.
So for example, a French statistician can use pspp to prepare a report 
in the English language, using 
a datafile which has been created by a Japanese researcher hence 
uses a Japanese character set.
</p>
<p>It&rsquo;s rarely, if ever, necessary to interrogate the system to find out
the values of the 3 locales.
However it&rsquo;s important to be aware of the source (destination) locale
when reading (writing) string data.
When transfering data between a source and a destination, the appropriate
recoding must be performed.
</p>

<hr size="6">
<a name="The-user-interface-locale"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#The-working-locales" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-output-locale" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-working-locales" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">6.1.1 The user interface locale</h3>
<p>This is the locale which is visible to the person using pspp.
Error messages and confidence indications  are written in this locale.
For example &ldquo;Cannot open file&rdquo; will be written in the user interface locale.
</p>
<p>This locale is set from the environment of the user who starts pspp{ire} or
from the system locale if not set.
</p>
<hr size="6">
<a name="The-output-locale"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#The-user-interface-locale" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-data-locale" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-working-locales" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">6.1.2 The output locale</h3>
<p>This locale is the one that should be visible to the person reading a 
report generated by pspp.  Non-data related strings (Eg: &ldquo;Page number&rdquo;,
&ldquo;Standard Deviation&rdquo; etc.) will appear in this locale.
</p>
<hr size="6">
<a name="The-data-locale"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#The-output-locale" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-files" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-working-locales" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">6.1.3 The data locale</h3>
<p>This locale is the one associated with the data being analysed with pspp.
The only important aspect of this locale is the character encoding.
<a name="DOCF1" href="#FOOT1">(1)</a>
The dictionary pertaining to the data contains a field denoting the encoding.
Any string data stored in a <code>union value</code> will be encoded in the
dictionary&rsquo;s character set.
</p>

<hr size="6">
<a name="System-files"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#The-data-locale" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#GUI" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">6.2 System files</h2>
<p>&lsquo;<tt>*.sav</tt>&rsquo; files contain a field which is supposed to identify the encoding
of the data they contain (see section <a href="#Machine-Integer-Info-Record">Machine Integer Info Record</a>).  
However, many
files produced by early versions of spss set this to &ldquo;2&rdquo; (ASCII) regardless
of the encoding of the data.
Later versions contain an additional
record (see section <a href="#Character-Encoding-Record">Character Encoding Record</a>) describing the encoding.
When a system file is read, the dictionary&rsquo;s encoding is set using information 
gleened from the system file.
If the encoding cannot be determined or would be unreliable, then it 
remains unset.
</p>

<hr size="6">
<a name="GUI"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#System-files" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Filenames" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">6.3 GUI</h2>
<p>The psppire graphic user interface is written using the Gtk+ api, for which 
all strings must be encoded in UTF8.
All strings passed to the GTK+/GLib library functions (except for filenames)
must be UTF-8 encoded otherwise errors will occur.
Thus, for the purposes of the programming psppire, the user interface locale 
should be assumed to be UTF8, even if setlocale and/or nl_langinfo
indicates otherwise.
</p>
<hr size="6">
<a name="Filenames"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#GUI" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Existing-locale-handling-functions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#GUI" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">6.3.1 Filenames</h3>
<p>The GLib API has some special functions for dealing with filenames.
Strings returned from functions like gtk_file_chooser_dialog_get_name are not, 
in general, encoded in UTF8, but in &ldquo;filename&rdquo; encoding.
If that filename is passed to another GLib function which expects a filename, 
no conversion is necessary.
If it&rsquo;s passed to a function for the purposes of displaying it (eg. in a 
window&rsquo;s title-bar) it must be converted to UTF8 &mdash; there is a special 
function for this: g_filename_display_name or g_filename_basename.
If however, a filename needs to be passed outside of GTK+/GLib (for example to fopen) it must be converted to the local system encoding.
</p>

<hr size="6">
<a name="Existing-locale-handling-functions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Filenames" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Quirks" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">6.4 Existing locale handling functions</h2>
<p>The major aspect of locale handling which the programmer has to consider is
that of character encoding.
</p>
<p>The following function is used to recode strings:
</p>
<dl>
<dt><a name="index-_002a-2"></a><u>Function:</u> char <b>*</b><i> recode_string (const char *<var>to</var>, const char *<var>from</var>, const char *<var>text</var>, int <var>len</var>);</i></dt>
<dd>
<p>Converts the string <var>text</var>, which is encoded in <var>from</var> to a new string encoded in <var>to</var> encoding.
If <var>len</var> is not -1, then it must be the number of bytes in <var>text</var>.
It is the caller&rsquo;s responsibility to free the returned string when no 
longer required.
</p></dd></dl>

<p>In order to minimise the number of conversions required, and to simplify 
design, PSPP attempts to store all internal strings in UTF8 encoding.
Thus, when reading system and portable files (or any other data source),
the following items are immediately converted to UTF8 encoding:
</p><ul>
<li> Variable names
</li><li> Variable labels
</li><li> Value labels
</li></ul>
<p>Conversely, when writing system files, these are converted back to the
encoding of that system file.
</p>
<p>String data stored in union values are left in their original encoding.
These will be converted by the data_in/data_out functions.
</p>


<hr size="6">
<a name="Quirks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Existing-locale-handling-functions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">6.5 Quirks</h2>
<p>For historical reasons, not all locale handling follows posix conventions.
This makes it difficult (impossible?) to elegantly handle the issues.
For example, it would make sense for the gui&rsquo;s datasheet to display
numbers formatted according to the LC_NUMERIC category of the data locale.
Instead however there is the <code>data_out</code> function 
(see section <a href="#Obtaining-Properties-of-Format-Types">Obtaining Properties of Format Types</a>) which uses the
<code>settings_get_decimal_char</code> function instead of the decimal separator 
of the locale.  Similarly, formatting of monetary values is displayed 
in a pspp/spss specific fashion instead of using the LC_MONETARY category.
</p>



<hr size="6">
<a name="Function-Index"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Quirks" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Concept-Index" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Internationalisation" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Concept-Index" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Function-Index-1"></a>
<h1 class="chapter">7. Function Index</h1>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Function-Index-1_fn_symbol-1" class="summary-letter"><b>*</b></a>
 &nbsp; 
<br>
<a href="#Function-Index-1_fn_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
</td></tr></table>
<table border="0" class="index-fn">
<tr><td></td><th align="left">Index Entry</th><th align="left"> Section</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_symbol-1">*</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002a"><code>*</code></a></td><td valign="top"><a href="#Formatted-Data-Input-and-Output">2.2.5 Formatted Data Input and Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002a-1"><code>*</code></a></td><td valign="top"><a href="#Formatted-Data-Input-and-Output">2.2.5 Formatted Data Input and Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002a-2"><code>*</code></a></td><td valign="top"><a href="#Existing-locale-handling-functions">6.4 Existing locale handling functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002afmt_005fcreate"><code>*fmt_create</code></a></td><td valign="top"><a href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002afmt_005fdollar_005ftemplate"><code>*fmt_dollar_template</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002afmt_005fto_005fstring"><code>*fmt_to_string</code></a></td><td valign="top"><a href="#Format-Utility-Functions">2.2.2 Format Utility Functions</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-alignment"><code>alignment</code></a></td><td valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alignment_005fis_005fvalid"><code>alignment_is_valid</code></a></td><td valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-char"><code>char</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char-1"><code>char</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-data_005fin"><code>data_in</code></a></td><td valign="top"><a href="#Formatted-Data-Input-and-Output">2.2.5 Formatted Data Input and Output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fadd_005fdocument_005fline"><code>dict_add_document_line</code></a></td><td valign="top"><a href="#Dictionary-Documents">2.6.11 Documents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fclass_005ffrom_005fid"><code>dict_class_from_id</code></a></td><td valign="top"><a href="#Dictionary-Class">2.5.9 Dictionary Class</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fclass_005fto_005fname"><code>dict_class_to_name</code></a></td><td valign="top"><a href="#Dictionary-Class">2.5.9 Dictionary Class</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fclear_005fdocuments"><code>dict_clear_documents</code></a></td><td valign="top"><a href="#Dictionary-Documents">2.6.11 Documents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fclone_005fvar"><code>dict_clone_var</code></a></td><td valign="top"><a href="#Dictionary-Creating-Variables">2.6.2 Creating Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fclone_005fvar_005fas"><code>dict_clone_var_as</code></a></td><td valign="top"><a href="#Dictionary-Creating-Variables">2.6.2 Creating Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fclone_005fvar_005fassert"><code>dict_clone_var_assert</code></a></td><td valign="top"><a href="#Dictionary-Creating-Variables">2.6.2 Creating Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fclone_005fvar_005fas_005fassert"><code>dict_clone_var_as_assert</code></a></td><td valign="top"><a href="#Dictionary-Creating-Variables">2.6.2 Creating Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fcontains_005fvar"><code>dict_contains_var</code></a></td><td valign="top"><a href="#Dictionary-Variable-Access">2.6.1 Accessing Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fcreate_005fvar"><code>dict_create_var</code></a></td><td valign="top"><a href="#Dictionary-Creating-Variables">2.6.2 Creating Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fcreate_005fvar_005fassert"><code>dict_create_var_assert</code></a></td><td valign="top"><a href="#Dictionary-Creating-Variables">2.6.2 Creating Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fdelete_005fconsecutive_005fvars"><code>dict_delete_consecutive_vars</code></a></td><td valign="top"><a href="#Dictionary-Deleting-Variables">2.6.3 Deleting Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fdelete_005fscratch_005fvars"><code>dict_delete_scratch_vars</code></a></td><td valign="top"><a href="#Dictionary-Deleting-Variables">2.6.3 Deleting Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fdelete_005fvar"><code>dict_delete_var</code></a></td><td valign="top"><a href="#Dictionary-Deleting-Variables">2.6.3 Deleting Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fdelete_005fvars"><code>dict_delete_vars</code></a></td><td valign="top"><a href="#Dictionary-Deleting-Variables">2.6.3 Deleting Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fcase_005flimit"><code>dict_get_case_limit</code></a></td><td valign="top"><a href="#Dictionary-Case-Limit">2.6.8 Case Limit</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fcase_005fweight"><code>dict_get_case_weight</code></a></td><td valign="top"><a href="#Dictionary-Weight-Variable">2.6.6 Weight Variable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fdocuments"><code>dict_get_documents</code></a></td><td valign="top"><a href="#Dictionary-Documents">2.6.11 Documents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fdocument_005fline"><code>dict_get_document_line</code></a></td><td valign="top"><a href="#Dictionary-Documents">2.6.11 Documents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fdocument_005fline_005fcnt"><code>dict_get_document_line_cnt</code></a></td><td valign="top"><a href="#Dictionary-Documents">2.6.11 Documents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005ffilter"><code>dict_get_filter</code></a></td><td valign="top"><a href="#Dictionary-Filter-Variable">2.6.7 Filter Variable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005flabel"><code>dict_get_label</code></a></td><td valign="top"><a href="#Dictionary-File-Label">2.6.10 File Label</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fsplit_005fcnt"><code>dict_get_split_cnt</code></a></td><td valign="top"><a href="#Dictionary-Split-Variables">2.6.9 Split Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fsplit_005fvars"><code>dict_get_split_vars</code></a></td><td valign="top"><a href="#Dictionary-Split-Variables">2.6.9 Split Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fvar"><code>dict_get_var</code></a></td><td valign="top"><a href="#Dictionary-Variable-Access">2.6.1 Accessing Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fvars"><code>dict_get_vars</code></a></td><td valign="top"><a href="#Dictionary-Variable-Access">2.6.1 Accessing Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fvars_005fmutable"><code>dict_get_vars_mutable</code></a></td><td valign="top"><a href="#Dictionary-Variable-Access">2.6.1 Accessing Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fvar_005fcnt"><code>dict_get_var_cnt</code></a></td><td valign="top"><a href="#Dictionary-Variable-Access">2.6.1 Accessing Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fget_005fweight"><code>dict_get_weight</code></a></td><td valign="top"><a href="#Dictionary-Weight-Variable">2.6.6 Weight Variable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005flookup_005fvar"><code>dict_lookup_var</code></a></td><td valign="top"><a href="#Dictionary-Variable-Access">2.6.1 Accessing Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005flookup_005fvar_005fassert"><code>dict_lookup_var_assert</code></a></td><td valign="top"><a href="#Dictionary-Variable-Access">2.6.1 Accessing Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005frename_005fvar"><code>dict_rename_var</code></a></td><td valign="top"><a href="#Dictionary-Renaming-Variables">2.6.5 Renaming Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005frename_005fvars"><code>dict_rename_vars</code></a></td><td valign="top"><a href="#Dictionary-Renaming-Variables">2.6.5 Renaming Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005freorder_005fvar"><code>dict_reorder_var</code></a></td><td valign="top"><a href="#Dictionary-Reordering-Variables">2.6.4 Changing Variable Order</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005freorder_005fvars"><code>dict_reorder_vars</code></a></td><td valign="top"><a href="#Dictionary-Reordering-Variables">2.6.4 Changing Variable Order</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fset_005fcase_005flimit"><code>dict_set_case_limit</code></a></td><td valign="top"><a href="#Dictionary-Case-Limit">2.6.8 Case Limit</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fset_005fdocuments"><code>dict_set_documents</code></a></td><td valign="top"><a href="#Dictionary-Documents">2.6.11 Documents</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fset_005ffilter"><code>dict_set_filter</code></a></td><td valign="top"><a href="#Dictionary-Filter-Variable">2.6.7 Filter Variable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fset_005flabel"><code>dict_set_label</code></a></td><td valign="top"><a href="#Dictionary-File-Label">2.6.10 File Label</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fset_005fsplit_005fvars"><code>dict_set_split_vars</code></a></td><td valign="top"><a href="#Dictionary-Split-Variables">2.6.9 Split Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005fset_005fweight"><code>dict_set_weight</code></a></td><td valign="top"><a href="#Dictionary-Weight-Variable">2.6.6 Weight Variable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dict_005funset_005fsplit_005fvar"><code>dict_unset_split_var</code></a></td><td valign="top"><a href="#Dictionary-Split-Variables">2.6.9 Split Variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DOC_005fLINE_005fLENGTH"><code>DOC_LINE_LENGTH</code></a></td><td valign="top"><a href="#Dictionary-Documents">2.6.11 Documents</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005faffix_005fwidth"><code>fmt_affix_width</code></a></td><td valign="top"><a href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fcategory"><code>fmt_category</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fcheck"><code>fmt_check</code></a></td><td valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fcheck_005finput"><code>fmt_check_input</code></a></td><td valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fcheck_005foutput"><code>fmt_check_output</code></a></td><td valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fcheck_005ftype_005fcompat"><code>fmt_check_type_compat</code></a></td><td valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fcheck_005fwidth_005fcompat"><code>fmt_check_width_compat</code></a></td><td valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fdefault_005ffor_005fwidth"><code>fmt_default_for_width</code></a></td><td valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fdone"><code>fmt_done</code></a></td><td valign="top"><a href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fequal"><code>fmt_equal</code></a></td><td valign="top"><a href="#Format-Utility-Functions">2.2.2 Format Utility Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005ffor_005finput"><code>fmt_for_input</code></a></td><td valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005ffor_005foutput"><code>fmt_for_output</code></a></td><td valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005ffor_005foutput_005ffrom_005finput"><code>fmt_for_output_from_input</code></a></td><td valign="top"><a href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005ffrom_005fio"><code>fmt_from_io</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005ffrom_005fname"><code>fmt_from_name</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fget_005fstyle"><code>fmt_get_style</code></a></td><td valign="top"><a href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fis_005fnumeric"><code>fmt_is_numeric</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fis_005fstring"><code>fmt_is_string</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fmax_005finput_005fdecimals"><code>fmt_max_input_decimals</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fmax_005finput_005fwidth"><code>fmt_max_input_width</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fmax_005foutput_005fdecimals"><code>fmt_max_output_decimals</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fmax_005foutput_005fwidth"><code>fmt_max_output_width</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fmin_005finput_005fwidth"><code>fmt_min_input_width</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fmin_005foutput_005fwidth"><code>fmt_min_output_width</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fname"><code>fmt_name</code></a></td><td valign="top"><a href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fneg_005faffix_005fwidth"><code>fmt_neg_affix_width</code></a></td><td valign="top"><a href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fnumber_005fstyle_005fdestroy"><code>fmt_number_style_destroy</code></a></td><td valign="top"><a href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fnumber_005fstyle_005finit"><code>fmt_number_style_init</code></a></td><td valign="top"><a href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fresize"><code>fmt_resize</code></a></td><td valign="top"><a href="#Format-Utility-Functions">2.2.2 Format Utility Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fstep_005fwidth"><code>fmt_step_width</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005ftakes_005fdecimals"><code>fmt_takes_decimals</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fto_005fio"><code>fmt_to_io</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005ftype"><code>fmt_type</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fusable_005ffor_005finput"><code>fmt_usable_for_input</code></a></td><td valign="top"><a href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fmt_005fvar_005fwidth"><code>fmt_var_width</code></a></td><td valign="top"><a href="#Format-Utility-Functions">2.2.2 Format Utility Functions</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-HIGHEST"><code>HIGHEST</code></a></td><td valign="top"><a href="#Numeric-Values">2.1.1 Numeric Values</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ID_005fMAX_005fLEN"><code>ID_MAX_LEN</code></a></td><td valign="top"><a href="#Variable-Name">2.5.1 Variable Name</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-LOWEST"><code>LOWEST</code></a></td><td valign="top"><a href="#Numeric-Values">2.1.1 Numeric Values</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAX_005fSTRING-1"><code>MAX_STRING</code></a></td><td valign="top"><a href="#Values">2.1 Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-measure"><code>measure</code></a></td><td valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-measure_005fis_005fvalid"><code>measure_is_valid</code></a></td><td valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fadd_005fnum"><code>mv_add_num</code></a></td><td valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fadd_005frange"><code>mv_add_range</code></a></td><td valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fadd_005fstr"><code>mv_add_str</code></a></td><td valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fadd_005fvalue"><code>mv_add_value</code></a></td><td valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fclear"><code>mv_clear</code></a></td><td valign="top"><a href="#Creating-and-Destroying-User_002dMissing-Values">2.3.2 Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fcopy"><code>mv_copy</code></a></td><td valign="top"><a href="#Creating-and-Destroying-User_002dMissing-Values">2.3.2 Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fdestroy"><code>mv_destroy</code></a></td><td valign="top"><a href="#Creating-and-Destroying-User_002dMissing-Values">2.3.2 Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fget_005frange"><code>mv_get_range</code></a></td><td valign="top"><a href="#Inspecting-User_002dMissing-Value-Sets">2.3.4 Inspecting User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fget_005fvalue"><code>mv_get_value</code></a></td><td valign="top"><a href="#Inspecting-User_002dMissing-Value-Sets">2.3.4 Inspecting User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fget_005fwidth"><code>mv_get_width</code></a></td><td valign="top"><a href="#Inspecting-User_002dMissing-Value-Sets">2.3.4 Inspecting User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fhas_005frange"><code>mv_has_range</code></a></td><td valign="top"><a href="#Inspecting-User_002dMissing-Value-Sets">2.3.4 Inspecting User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fhas_005fvalue"><code>mv_has_value</code></a></td><td valign="top"><a href="#Inspecting-User_002dMissing-Value-Sets">2.3.4 Inspecting User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005finit"><code>mv_init</code></a></td><td valign="top"><a href="#Creating-and-Destroying-User_002dMissing-Values">2.3.2 Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fis_005facceptable"><code>mv_is_acceptable</code></a></td><td valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fis_005fempty"><code>mv_is_empty</code></a></td><td valign="top"><a href="#Inspecting-User_002dMissing-Value-Sets">2.3.4 Inspecting User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fis_005fnum_005fmissing"><code>mv_is_num_missing</code></a></td><td valign="top"><a href="#Testing-for-Missing-Values">2.3.1 Testing for Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fis_005fresizable"><code>mv_is_resizable</code></a></td><td valign="top"><a href="#Changing-User_002dMissing-Value-Set-Width">2.3.3 Changing User-Missing Value Set Width</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fis_005fstr_005fmissing"><code>mv_is_str_missing</code></a></td><td valign="top"><a href="#Testing-for-Missing-Values">2.3.1 Testing for Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fis_005fvalue_005fmissing"><code>mv_is_value_missing</code></a></td><td valign="top"><a href="#Testing-for-Missing-Values">2.3.1 Testing for Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MV_005fMAX_005fSTRING"><code>MV_MAX_STRING</code></a></td><td valign="top"><a href="#User_002dMissing-Values">2.3 User-Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fn_005fvalues"><code>mv_n_values</code></a></td><td valign="top"><a href="#Inspecting-User_002dMissing-Value-Sets">2.3.4 Inspecting User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fpop_005frange"><code>mv_pop_range</code></a></td><td valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fpop_005fvalue"><code>mv_pop_value</code></a></td><td valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005freplace_005fvalue"><code>mv_replace_value</code></a></td><td valign="top"><a href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-mv_005fresize"><code>mv_resize</code></a></td><td valign="top"><a href="#Changing-User_002dMissing-Value-Set-Width">2.3.3 Changing User-Missing Value Set Width</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-SHORT_005fNAME_005fLEN"><code>SHORT_NAME_LEN</code></a></td><td valign="top"><a href="#Variable-Short-Names">2.5.11 Variable Short Names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SYSMIS"><code>SYSMIS</code></a></td><td valign="top"><a href="#Numeric-Values">2.1.1 Numeric Values</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_fn_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fcompare_005f3way"><code>value_compare_3way</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fcopy"><code>value_copy</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fdestroy"><code>value_destroy</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fequal"><code>value_equal</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fhash"><code>value_hash</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005finit"><code>value_init</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fis_005fresizable"><code>value_is_resizable</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fneeds_005finit"><code>value_needs_init</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fnum"><code>value_num</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fresize"><code>value_resize</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fset_005fmissing"><code>value_set_missing</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fstr"><code>value_str</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-value_005fstr_005frw"><code>value_str_rw</code></a></td><td valign="top"><a href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fadd"><code>val_labs_add</code></a></td><td valign="top"><a href="#Value-Labels-Adding-and-Removing-Labels">2.4.3 Adding and Removing Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fcan_005fset_005fwidth"><code>val_labs_can_set_width</code></a></td><td valign="top"><a href="#Value-Labels-Properties">2.4.2 Value Labels Properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fclear"><code>val_labs_clear</code></a></td><td valign="top"><a href="#Value-Labels-Creation-and-Destruction">2.4.1 Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fclone"><code>val_labs_clone</code></a></td><td valign="top"><a href="#Value-Labels-Creation-and-Destruction">2.4.1 Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fcount"><code>val_labs_count</code></a></td><td valign="top"><a href="#Value-Labels-Properties">2.4.2 Value Labels Properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fcreate"><code>val_labs_create</code></a></td><td valign="top"><a href="#Value-Labels-Creation-and-Destruction">2.4.1 Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fdestroy"><code>val_labs_destroy</code></a></td><td valign="top"><a href="#Value-Labels-Creation-and-Destruction">2.4.1 Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005ffind"><code>val_labs_find</code></a></td><td valign="top"><a href="#Value-Labels">2.4 Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005ffirst"><code>val_labs_first</code></a></td><td valign="top"><a href="#Value-Labels-Iteration">2.4.4 Iterating through Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fnext"><code>val_labs_next</code></a></td><td valign="top"><a href="#Value-Labels-Iteration">2.4.4 Iterating through Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fremove"><code>val_labs_remove</code></a></td><td valign="top"><a href="#Value-Labels-Adding-and-Removing-Labels">2.4.3 Adding and Removing Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005freplace"><code>val_labs_replace</code></a></td><td valign="top"><a href="#Value-Labels-Adding-and-Removing-Labels">2.4.3 Adding and Removing Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fset_005fwidth"><code>val_labs_set_width</code></a></td><td valign="top"><a href="#Value-Labels-Properties">2.4.2 Value Labels Properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flabs_005fsorted"><code>val_labs_sorted</code></a></td><td valign="top"><a href="#Value-Labels-Iteration">2.4.4 Iterating through Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flab_005fget_005flabel"><code>val_lab_get_label</code></a></td><td valign="top"><a href="#Value-Labels-Iteration">2.4.4 Iterating through Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005flab_005fget_005fvalue"><code>val_lab_get_value</code></a></td><td valign="top"><a href="#Value-Labels-Iteration">2.4.4 Iterating through Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005ftype_005ffrom_005fwidth"><code>val_type_from_width</code></a></td><td valign="top"><a href="#Values">2.1 Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-val_005ftype_005fis_005fvalid"><code>val_type_is_valid</code></a></td><td valign="top"><a href="#Values">2.1 Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fadd_005fvalue_005flabel"><code>var_add_value_label</code></a></td><td valign="top"><a href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fappend_005fvalue_005fname"><code>var_append_value_name</code></a></td><td valign="top"><a href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fattach_005faux"><code>var_attach_aux</code></a></td><td valign="top"><a href="#Variable-Auxiliary-Data">2.5.13 Variable Auxiliary Data</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fclear_005faux"><code>var_clear_aux</code></a></td><td valign="top"><a href="#Variable-Auxiliary-Data">2.5.13 Variable Auxiliary Data</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fclear_005flabel"><code>var_clear_label</code></a></td><td valign="top"><a href="#Variable-Labels">2.5.6 Variable Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fclear_005fmissing_005fvalues"><code>var_clear_missing_values</code></a></td><td valign="top"><a href="#Variable-Missing-Values">2.5.3 Variable Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fclear_005fshort_005fname"><code>var_clear_short_name</code></a></td><td valign="top"><a href="#Variable-Short-Names">2.5.11 Variable Short Names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fclear_005fvalue_005flabels"><code>var_clear_value_labels</code></a></td><td valign="top"><a href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fclone"><code>var_clone</code></a></td><td valign="top"><a href="#Variable-Creation-and-Destruction">2.5.10 Variable Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fcreate"><code>var_create</code></a></td><td valign="top"><a href="#Variable-Creation-and-Destruction">2.5.10 Variable Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fdefault_005fdisplay_005fwidth"><code>var_default_display_width</code></a></td><td valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fdestroy"><code>var_destroy</code></a></td><td valign="top"><a href="#Variable-Creation-and-Destruction">2.5.10 Variable Creation and Destruction</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fdetach_005faux"><code>var_detach_aux</code></a></td><td valign="top"><a href="#Variable-Auxiliary-Data">2.5.13 Variable Auxiliary Data</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005faux"><code>var_get_aux</code></a></td><td valign="top"><a href="#Variable-Auxiliary-Data">2.5.13 Variable Auxiliary Data</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fcase_005findex"><code>var_get_case_index</code></a></td><td valign="top"><a href="#Variable-Relationships">2.5.12 Variable Relationships</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fdict_005fclass"><code>var_get_dict_class</code></a></td><td valign="top"><a href="#Variable-Name">2.5.1 Variable Name</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fdict_005findex"><code>var_get_dict_index</code></a></td><td valign="top"><a href="#Variable-Relationships">2.5.12 Variable Relationships</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fdisplay_005fwidth"><code>var_get_display_width</code></a></td><td valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005flabel"><code>var_get_label</code></a></td><td valign="top"><a href="#Variable-Labels">2.5.6 Variable Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fleave"><code>var_get_leave</code></a></td><td valign="top"><a href="#Variable-Leave-Status">2.5.8 Variable Leave Status</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fmissing_005fvalues"><code>var_get_missing_values</code></a></td><td valign="top"><a href="#Variable-Missing-Values">2.5.3 Variable Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fname"><code>var_get_name</code></a></td><td valign="top"><a href="#Variable-Name">2.5.1 Variable Name</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fobs_005fvals"><code>var_get_obs_vals</code></a></td><td valign="top"><a href="#Variable-Categorical-Values">2.5.14 Variable Categorical Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fprint_005fformat"><code>var_get_print_format</code></a></td><td valign="top"><a href="#Variable-Print-and-Write-Formats">2.5.5 Variable Print and Write Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fshort_005fname"><code>var_get_short_name</code></a></td><td valign="top"><a href="#Variable-Short-Names">2.5.11 Variable Short Names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005ftype"><code>var_get_type</code></a></td><td valign="top"><a href="#Variable-Type-and-Width">2.5.2 Variable Type and Width</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fvalue_005flabels"><code>var_get_value_labels</code></a></td><td valign="top"><a href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fwidth"><code>var_get_width</code></a></td><td valign="top"><a href="#Variable-Type-and-Width">2.5.2 Variable Type and Width</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fget_005fwrite_005fformat"><code>var_get_write_format</code></a></td><td valign="top"><a href="#Variable-Print-and-Write-Formats">2.5.5 Variable Print and Write Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fhas_005flabel"><code>var_has_label</code></a></td><td valign="top"><a href="#Variable-Labels">2.5.6 Variable Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fhas_005fmissing_005fvalues"><code>var_has_missing_values</code></a></td><td valign="top"><a href="#Variable-Missing-Values">2.5.3 Variable Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fhas_005fobs_005fvals"><code>var_has_obs_vals</code></a></td><td valign="top"><a href="#Variable-Categorical-Values">2.5.14 Variable Categorical Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fhas_005fvalue_005flabels"><code>var_has_value_labels</code></a></td><td valign="top"><a href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fis_005falpha"><code>var_is_alpha</code></a></td><td valign="top"><a href="#Variable-Type-and-Width">2.5.2 Variable Type and Width</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fis_005fnumeric"><code>var_is_numeric</code></a></td><td valign="top"><a href="#Variable-Type-and-Width">2.5.2 Variable Type and Width</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fis_005fnum_005fmissing"><code>var_is_num_missing</code></a></td><td valign="top"><a href="#Variable-Missing-Values">2.5.3 Variable Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fis_005fstr_005fmissing"><code>var_is_str_missing</code></a></td><td valign="top"><a href="#Variable-Missing-Values">2.5.3 Variable Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fis_005fvalue_005fmissing"><code>var_is_value_missing</code></a></td><td valign="top"><a href="#Variable-Missing-Values">2.5.3 Variable Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005flookup_005fvalue_005flabel"><code>var_lookup_value_label</code></a></td><td valign="top"><a href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fmust_005fleave"><code>var_must_leave</code></a></td><td valign="top"><a href="#Variable-Leave-Status">2.5.8 Variable Leave Status</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005freplace_005fvalue_005flabel"><code>var_replace_value_label</code></a></td><td valign="top"><a href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005falignment"><code>var_set_alignment</code></a></td><td valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fboth_005fformats"><code>var_set_both_formats</code></a></td><td valign="top"><a href="#Variable-Print-and-Write-Formats">2.5.5 Variable Print and Write Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fdisplay_005fwidth"><code>var_set_display_width</code></a></td><td valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005flabel"><code>var_set_label</code></a></td><td valign="top"><a href="#Variable-Labels">2.5.6 Variable Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fleave"><code>var_set_leave</code></a></td><td valign="top"><a href="#Variable-Leave-Status">2.5.8 Variable Leave Status</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fmeasure"><code>var_set_measure</code></a></td><td valign="top"><a href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fmissing_005fvalues"><code>var_set_missing_values</code></a></td><td valign="top"><a href="#Variable-Missing-Values">2.5.3 Variable Missing Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fname"><code>var_set_name</code></a></td><td valign="top"><a href="#Variable-Name">2.5.1 Variable Name</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fobs_005fvals"><code>var_set_obs_vals</code></a></td><td valign="top"><a href="#Variable-Categorical-Values">2.5.14 Variable Categorical Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fprint_005fformat"><code>var_set_print_format</code></a></td><td valign="top"><a href="#Variable-Print-and-Write-Formats">2.5.5 Variable Print and Write Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fshort_005fname"><code>var_set_short_name</code></a></td><td valign="top"><a href="#Variable-Short-Names">2.5.11 Variable Short Names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fvalue_005flabels"><code>var_set_value_labels</code></a></td><td valign="top"><a href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fwidth"><code>var_set_width</code></a></td><td valign="top"><a href="#Variable-Type-and-Width">2.5.2 Variable Type and Width</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fset_005fwrite_005fformat"><code>var_set_write_format</code></a></td><td valign="top"><a href="#Variable-Print-and-Write-Formats">2.5.5 Variable Print and Write Formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-var_005fto_005fstring"><code>var_to_string</code></a></td><td valign="top"><a href="#Variable-Labels">2.5.6 Variable Labels</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void"><code>void</code></a></td><td valign="top"><a href="#Variable-Auxiliary-Data">2.5.13 Variable Auxiliary Data</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Function-Index-1_fn_symbol-1" class="summary-letter"><b>*</b></a>
 &nbsp; 
<br>
<a href="#Function-Index-1_fn_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Function-Index-1_fn_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
</td></tr></table>
<hr size="6">
<a name="Concept-Index"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Function-Index" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Concept-Index-1"></a>
<h1 class="chapter">8. Concept Index</h1>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Concept-Index-1_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Concept-Index-1_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#Concept-Index-1_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Concept-Index-1_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#Concept-Index-1_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
</td></tr></table>
<table border="0" class="index-cp">
<tr><td></td><th align="left">Index Entry</th><th align="left"> Section</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAX_005fSTRING">MAX_STRING</a></td><td valign="top"><a href="#Values">2.1 Values</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MAX_005fSTRING-2">MAX_STRING</a></td><td valign="top"><a href="#String-Values">2.1.2 String Values</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-numeric-value">numeric value</a></td><td valign="top"><a href="#Values">2.1 Values</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-string-value">string value</a></td><td valign="top"><a href="#Values">2.1 Values</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-value">value</a></td><td valign="top"><a href="#Values">2.1 Values</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-width">width</a></td><td valign="top"><a href="#Values">2.1 Values</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#Concept-Index-1_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#Concept-Index-1_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#Concept-Index-1_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#Concept-Index-1_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#Concept-Index-1_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
</td></tr></table>

<hr size="6">
<a name="Portable-File-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Concept-Index" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Characters" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Concept-Index" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Portable-File-Format-1"></a>
<h1 class="appendix">A. Portable File Format</h1>

<p>These days, most computers use the same internal data formats for
integer and floating-point data, if one ignores little differences like
big- versus little-endian byte ordering.  However, occasionally it is
necessary to exchange data between systems with incompatible data
formats.  This is what portable files are designed to do.
</p>
<p><strong>Please note:</strong> This information is gleaned from examination of
ASCII-formatted portable files only, so some of it may be incorrect
for portable files formatted in EBCDIC or other character sets.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Portable-File-Characters">A.1 Portable File Characters</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Portable-File-Structure">A.2 Portable File Structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Portable-File-Header">A.3 Portable File Header</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Version-and-Date-Info-Record">A.4 Version and Date Info Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Identification-Records">A.5 Identification Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Count-Record">A.6 Variable Count Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Precision-Record">A.7 Precision Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Case-Weight-Variable-Record">A.8 Case Weight Variable Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Records">A.9 Variable Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Label-Records">A.10 Value Label Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Portable-File-Document-Record">A.11 Document Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Portable-File-Data">A.12 Portable File Data</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Portable-File-Characters"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Portable-File-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Structure" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Portable-File-Characters-1"></a>
<h2 class="section">A.1 Portable File Characters</h2>

<p>Portable files are arranged as a series of lines of 80
characters each.  Each line is terminated by a carriage-return,
line-feed sequence (&ldquo;new-lines&rdquo;).  New-lines are only used to avoid
line length limits imposed by some OSes; they are not meaningful.
</p>
<p>Most lines in portable files are exactly 80 characters long.  The only
exception is a line that ends in one or more spaces, in which the
spaces may optionally be omitted.  Thus, a portable file reader must
act as though a line shorter than 80 characters is padded to that
length with spaces.
</p>
<p>The file must be terminated with a &lsquo;<samp>Z</samp>&rsquo; character.  In addition, if
the final line in the file does not have exactly 80 characters, then it
is padded on the right with &lsquo;<samp>Z</samp>&rsquo; characters.  (The file contents may
be in any character set; the file contains a description of its own
character set, as explained in the next section.  Therefore, the
&lsquo;<samp>Z</samp>&rsquo; character is not necessarily an ASCII &lsquo;<samp>Z</samp>&rsquo;.)
</p>
<p>For the rest of the description of the portable file format, new-lines
and the trailing &lsquo;<samp>Z</samp>&rsquo;s will be ignored, as if they did not exist,
because they are not an important part of understanding the file
contents.
</p>
<hr size="6">
<a name="Portable-File-Structure"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Portable-File-Characters" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Header" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Portable-File-Structure-1"></a>
<h2 class="section">A.2 Portable File Structure</h2>

<p>Every portable file consists of the following records, in sequence:
</p>
<ul>
<li>
File header.

</li><li>
Version and date info.

</li><li>
Product identification.

</li><li>
Author identification (optional).

</li><li>
Subproduct identification (optional).

</li><li>
Variable count.

</li><li>
Case weight variable (optional).

</li><li>
Variables.  Each variable record may optionally be followed by a
missing value record and a variable label record.

</li><li>
Value labels (optional).

</li><li>
Documents (optional).

</li><li>
Data.
</li></ul>

<p>Most records are identified by a single-character tag code.  The file
header and version info record do not have a tag.
</p>
<p>Other than these single-character codes, there are three types of fields
in a portable file: floating-point, integer, and string.  Floating-point
fields have the following format:
</p>
<ul>
<li>
Zero or more leading spaces.

</li><li>
Optional asterisk (&lsquo;<samp>*</samp>&rsquo;), which indicates a missing value.  The
asterisk must be followed by a single character, generally a period
(&lsquo;<samp>.</samp>&rsquo;), but it appears that other characters may also be possible.
This completes the specification of a missing value.

</li><li>
Optional minus sign (&lsquo;<samp>-</samp>&rsquo;) to indicate a negative number.

</li><li>
A whole number, consisting of one or more base-30 digits: &lsquo;<samp>0</samp>&rsquo;
through &lsquo;<samp>9</samp>&rsquo; plus capital letters &lsquo;<samp>A</samp>&rsquo; through &lsquo;<samp>T</samp>&rsquo;.

</li><li>
Optional fraction, consisting of a radix point (&lsquo;<samp>.</samp>&rsquo;) followed by
one or more base-30 digits.

</li><li>
Optional exponent, consisting of a plus or minus sign (&lsquo;<samp>+</samp>&rsquo; or
&lsquo;<samp>-</samp>&rsquo;) followed by one or more base-30 digits.

</li><li>
A forward slash (&lsquo;<samp>/</samp>&rsquo;).
</li></ul>

<p>Integer fields take a form identical to floating-point fields, but they
may not contain a fraction.
</p>
<p>String fields take the form of a integer field having value <var>n</var>,
followed by exactly <var>n</var> characters, which are the string content.
</p>
<hr size="6">
<a name="Portable-File-Header"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Portable-File-Structure" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Version-and-Date-Info-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Portable-File-Header-1"></a>
<h2 class="section">A.3 Portable File Header</h2>

<p>Every portable file begins with a 464-byte header, consisting of a
200-byte collection of vanity splash strings, followed by a 256-byte
character set translation table, followed by an 8-byte tag string.
</p>
<p>The 200-byte segment is divided into five 40-byte sections, each of
which represents the string <code><var>charset</var> SPSS PORT FILE</code> in a
different character set encoding, where <var>charset</var> is the name of
the character set used in the file, e.g. <code>ASCII</code> or
<code>EBCDIC</code>.  Each string is padded on the right with spaces in its
respective character set.
</p>
<p>It appears that these strings exist only to inform those who might view
the file on a screen, and that they are not parsed by SPSS products.
Thus, they can be safely ignored.  For those interested, the strings are
supposed to be in the following character sets, in the specified order:
EBCDIC, 7-bit ASCII, CDC 6-bit ASCII, 6-bit ASCII, Honeywell 6-bit
ASCII.
</p>
<p>The 256-byte segment describes a mapping from the character set used in
the portable file to an arbitrary character set having characters at the
following positions:
</p>
<dl compact="compact">
<dt> 0&ndash;60</dt>
<dd>
<p>Control characters.  Not important enough to describe in full here.
</p>
</dd>
<dt> 61&ndash;63</dt>
<dd>
<p>Reserved.
</p>
</dd>
<dt> 64&ndash;73</dt>
<dd>
<p>Digits &lsquo;<samp>0</samp>&rsquo; through &lsquo;<samp>9</samp>&rsquo;.
</p>
</dd>
<dt> 74&ndash;99</dt>
<dd>
<p>Capital letters &lsquo;<samp>A</samp>&rsquo; through &lsquo;<samp>Z</samp>&rsquo;.
</p>
</dd>
<dt> 100&ndash;125</dt>
<dd>
<p>Lowercase letters &lsquo;<samp>a</samp>&rsquo; through &lsquo;<samp>z</samp>&rsquo;.
</p>
</dd>
<dt> 126</dt>
<dd>
<p>Space.
</p>
</dd>
<dt> 127&ndash;130</dt>
<dd>
<p>Symbols <code>.&lt;(+</code>
</p>
</dd>
<dt> 131</dt>
<dd>
<p>Solid vertical pipe.
</p>
</dd>
<dt> 132&ndash;142</dt>
<dd>
<p>Symbols <code>&amp;[]!$*);^-/</code>
</p>
</dd>
<dt> 143</dt>
<dd>
<p>Broken vertical pipe.
</p>
</dd>
<dt> 144&ndash;150</dt>
<dd>
<p>Symbols <code>,%_&gt;</code>?<code>`:</code>   </p>
</dd>
<dt> 151</dt>
<dd>
<p>British pound symbol.
</p>
</dd>
<dt> 152&ndash;155</dt>
<dd>
<p>Symbols <code>@'=&quot;</code>.
</p>
</dd>
<dt> 156</dt>
<dd>
<p>Less than or equal symbol.
</p>
</dd>
<dt> 157</dt>
<dd>
<p>Empty box.
</p>
</dd>
<dt> 158</dt>
<dd>
<p>Plus or minus.
</p>
</dd>
<dt> 159</dt>
<dd>
<p>Filled box.
</p>
</dd>
<dt> 160</dt>
<dd>
<p>Degree symbol.
</p>
</dd>
<dt> 161</dt>
<dd>
<p>Dagger.
</p>
</dd>
<dt> 162</dt>
<dd>
<p>Symbol &lsquo;<samp>~</samp>&rsquo;.
</p>
</dd>
<dt> 163</dt>
<dd>
<p>En dash.
</p>
</dd>
<dt> 164</dt>
<dd>
<p>Lower left corner box draw.
</p>
</dd>
<dt> 165</dt>
<dd>
<p>Upper left corner box draw.
</p>
</dd>
<dt> 166</dt>
<dd>
<p>Greater than or equal symbol.
</p>
</dd>
<dt> 167&ndash;176</dt>
<dd>
<p>Superscript &lsquo;<samp>0</samp>&rsquo; through &lsquo;<samp>9</samp>&rsquo;.
</p>
</dd>
<dt> 177</dt>
<dd>
<p>Lower right corner box draw.
</p>
</dd>
<dt> 178</dt>
<dd>
<p>Upper right corner box draw.
</p>
</dd>
<dt> 179</dt>
<dd>
<p>Not equal symbol.
</p>
</dd>
<dt> 180</dt>
<dd>
<p>Em dash.
</p>
</dd>
<dt> 181</dt>
<dd>
<p>Superscript &lsquo;<samp>(</samp>&rsquo;.
</p>
</dd>
<dt> 182</dt>
<dd>
<p>Superscript &lsquo;<samp>)</samp>&rsquo;.
</p>
</dd>
<dt> 183</dt>
<dd>
<p>Horizontal dagger (?).
</p>
</dd>
<dt> 184&ndash;186</dt>
<dd>
<p>Symbols &lsquo;<samp>{}\</samp>&rsquo;.
</p></dd>
<dt> 187</dt>
<dd>
<p>Cents symbol.
</p>
</dd>
<dt> 188</dt>
<dd>
<p>Centered dot, or bullet.
</p>
</dd>
<dt> 189&ndash;255</dt>
<dd>
<p>Reserved.
</p></dd>
</dl>

<p>Symbols that are not defined in a particular character set are set to
the same value as symbol 64; i.e., to &lsquo;<samp>0</samp>&rsquo;.
</p>
<p>The 8-byte tag string consists of the exact characters <code>SPSSPORT</code>
in the portable file&rsquo;s character set, which can be used to verify that
the file is indeed a portable file.
</p>
<hr size="6">
<a name="Version-and-Date-Info-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Portable-File-Header" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Identification-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Version-and-Date-Info-Record-1"></a>
<h2 class="section">A.4 Version and Date Info Record</h2>

<p>This record does not have a tag code.  It has the following structure:
</p>
<ul>
<li>
A single character identifying the file format version.  The letter A
represents version 0, and so on.

</li><li>
An 8-character string field giving the file creation date in the format
YYYYMMDD.

</li><li>
A 6-character string field giving the file creation time in the format
HHMMSS.
</li></ul>

<hr size="6">
<a name="Identification-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Version-and-Date-Info-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Count-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Identification-Records-1"></a>
<h2 class="section">A.5 Identification Records</h2>

<p>The product identification record has tag code &lsquo;<samp>1</samp>&rsquo;.  It consists of
a single string field giving the name of the product that wrote the
portable file.
</p>
<p>The author identification record has tag code &lsquo;<samp>2</samp>&rsquo;.  It is
optional.  If present, it consists of a single string field giving the
name of the person who caused the portable file to be written.
</p>
<p>The subproduct identification record has tag code &lsquo;<samp>3</samp>&rsquo;.  It is
optional.  If present, it consists of a single string field giving
additional information on the product that wrote the portable file.
</p>
<hr size="6">
<a name="Variable-Count-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Identification-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Precision-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Count-Record-1"></a>
<h2 class="section">A.6 Variable Count Record</h2>

<p>The variable count record has tag code &lsquo;<samp>4</samp>&rsquo;.  It consists of a
single integer field giving the number of variables in the file
dictionary.
</p>
<hr size="6">
<a name="Precision-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Count-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Case-Weight-Variable-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Precision-Record-1"></a>
<h2 class="section">A.7 Precision Record</h2>

<p>The precision record has tag code &lsquo;<samp>5</samp>&rsquo;.  It consists of a single
integer field specifying the maximum number of base-30 digits used in
data in the file.
</p>
<hr size="6">
<a name="Case-Weight-Variable-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Precision-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Case-Weight-Variable-Record-1"></a>
<h2 class="section">A.8 Case Weight Variable Record</h2>

<p>The case weight variable record is optional.  If it is present, it
indicates the variable used for weighting cases; if it is absent,
cases are unweighted.  It has tag code &lsquo;<samp>6</samp>&rsquo;.  It consists of a
single string field that names the weighting variable.
</p>
<hr size="6">
<a name="Variable-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Case-Weight-Variable-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Label-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Records-1"></a>
<h2 class="section">A.9 Variable Records</h2>

<p>Each variable record represents a single variable.  Variable records
have tag code &lsquo;<samp>7</samp>&rsquo;.  They have the following structure:
</p>
<ul>
<li>
Width (integer).  This is 0 for a numeric variable, and a number between 1
and 255 for a string variable.

</li><li>
Name (string).  1&ndash;8 characters long.  Must be in all capitals.

<p>A few portable files that contain duplicate variable names have been
spotted in the wild.  PSPP handles these by renaming the duplicates
with numeric extensions: <code><var>var</var>_1</code>, <code><var>var</var>_2</code>, and
so on.
</p>
</li><li>
Print format.  This is a set of three integer fields:

<ul class="toc">
<li>-
Format type (see section <a href="#Variable-Record">Variable Record</a>).

</li><li>-
Format width.  1&ndash;40.

</li><li>-
Number of decimal places.  1&ndash;40.
</li></ul>

<p>A few portable files with invalid format types or formats that are not
of the appropriate width for their variables have been spotted in the
wild.  PSPP assigns a default F or A format to a variable with an
invalid format.
</p>
</li><li>
Write format.  Same structure as the print format described above.
</li></ul>

<p>Each variable record can optionally be followed by a missing value
record, which has tag code &lsquo;<samp>8</samp>&rsquo;.  A missing value record has one
field, the missing value itself (a floating-point or string, as
appropriate).  Up to three of these missing value records can be used.
</p>
<p>There is also a record for missing value ranges, which has tag code
&lsquo;<samp>B</samp>&rsquo;.  It is followed by two fields representing the range, which
are floating-point or string as appropriate.  If a missing value range
is present, it may be followed by a single missing value record.
</p>
<p>Tag codes &lsquo;<samp>9</samp>&rsquo; and &lsquo;<samp>A</samp>&rsquo; represent <code>LO THRU <var>x</var></code> and
<code><var>x</var> THRU HI</code> ranges, respectively.  Each is followed by a
single field representing <var>x</var>.  If one of the ranges is present, it
may be followed by a single missing value record.
</p>
<p>In addition, each variable record can optionally be followed by a
variable label record, which has tag code &lsquo;<samp>C</samp>&rsquo;.  A variable label
record has one field, the variable label itself (string).
</p>
<hr size="6">
<a name="Value-Label-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Document-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Value-Label-Records-1"></a>
<h2 class="section">A.10 Value Label Records</h2>

<p>Value label records have tag code &lsquo;<samp>D</samp>&rsquo;.  They have the following
format:
</p>
<ul>
<li>
Variable count (integer).

</li><li>
List of variables (strings).  The variable count specifies the number in
the list.  Variables are specified by their names.  All variables must
be of the same type (numeric or string), but string variables do not
necessarily have the same width.

</li><li>
Label count (integer).

</li><li>
List of (value, label) tuples.  The label count specifies the number of
tuples.  Each tuple consists of a value, which is numeric or string as
appropriate to the variables, followed by a label (string).
</li></ul>

<p>A few portable files that specify duplicate value labels, that is, two
different labels for a single value of a single variable, have been
spotted in the wild.  PSPP uses the last value label specified in
these cases.
</p>
<hr size="6">
<a name="Portable-File-Document-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Label-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Data" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Document-Record-1"></a>
<h2 class="section">A.11 Document Record</h2>

<p>One document record may optionally follow the value label record.  The
document record consists of tag code &lsquo;<samp>E</samp>&rsquo;, following by the number
of document lines as an integer, followed by that number of strings,
each of which represents one document line.  Document lines must be 80
bytes long or shorter.
</p>
<hr size="6">
<p>Data elements are output in the same order as the variable records
describing them.  String variables are output as string fields, and
numeric variables are output as floating-point fields.
</p><hr size="6">
<a name="System-File-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Portable-File-Data" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Record-Structure" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Portable-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="System-File-Format-1"></a>
<h1 class="appendix">B. System File Format</h1>

<p>A system file encapsulates a set of cases and dictionary information
that describes how they may be interpreted.  This chapter describes
the format of a system file.
</p>
<p>System files use four data types: 8-bit characters, 32-bit integers,
64-bit integers, 
and 64-bit floating points, called here <code>char</code>, <code>int32</code>,
<code>int64</code>, and
<code>flt64</code>, respectively.  Data is not necessarily aligned on a word
or double-word boundary: the long variable name record (see section <a href="#Long-Variable-Names-Record">Long Variable Names Record</a>) and very long string records (see section <a href="#Very-Long-String-Record">Very Long String Record</a>) have arbitrary byte length and can therefore cause all
data coming after them in the file to be misaligned.
</p>
<p>Integer data in system files may be big-endian or little-endian.  A
reader may detect the endianness of a system file by examining
<code>layout_code</code> in the file header record
(see <a href="#layout_005fcode"><code>layout_code</code></a>).
</p>
<p>Floating-point data in system files may nominally be in IEEE 754, IBM,
or VAX formats.  A reader may detect the floating-point format in use
by examining <code>bias</code> in the file header record
(see <a href="#bias"><code>bias</code></a>).
</p>
<p>PSPP detects big-endian and little-endian integer formats in system
files and translates as necessary.  PSPP also detects the
floating-point format in use, as well as the endianness of IEEE 754
floating-point numbers, and translates as needed.  However, only IEEE
754 numbers with the same endianness as integer data in the same file
have actually been observed in system files, and it is likely that
other formats are obsolete or were never used.
</p>
<p>System files use a few floating point values for special purposes:
</p>
<dl compact="compact">
<dt> SYSMIS</dt>
<dd><p>The system-missing value is represented by the largest possible
negative number in the floating point format (<code>-DBL_MAX</code>).
</p>
</dd>
<dt> HIGHEST</dt>
<dd><p>HIGHEST is used as the high end of a missing value range with an
unbounded maximum.  It is represented by the largest possible positive
number (<code>DBL_MAX</code>).
</p>
</dd>
<dt> LOWEST</dt>
<dd><p>LOWEST is used as the low end of a missing value range with an
unbounded minimum.  It was originally represented by the
second-largest negative number (in IEEE 754 format,
<code>0xffeffffffffffffe</code>).  System files written by SPSS 21 and later
instead use the largest negative number (<code>-DBL_MAX</code>), the same
value as SYSMIS.  This does not lead to ambiguity because LOWEST
appears in system files only in missing value ranges, which never
contain SYSMIS.
</p></dd>
</dl>

<p>System files may use most character encodings based on an 8-bit unit.
UTF-16 and UTF-32, based on wider units, appear to be unacceptable.
<code>rec_type</code> in the file header record is sufficient to distinguish
between ASCII and EBCDIC based encodings.  The best way to determine
the specific encoding in use is to consult the character encoding
record (see section <a href="#Character-Encoding-Record">Character Encoding Record</a>), if present, and failing
that the <code>character_code</code> in the machine integer info record
(see section <a href="#Machine-Integer-Info-Record">Machine Integer Info Record</a>).  The same encoding should be
used for the dictionary and the data in the file, although it is
possible to artificially synthesize files that use different encodings
(see section <a href="#Character-Encoding-Record">Character Encoding Record</a>).
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#System-File-Record-Structure">B.1 System File Record Structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#File-Header-Record">B.2 File Header Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Record">B.3 Variable Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-Labels-Records">B.4 Value Labels Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Document-Record">B.5 Document Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Machine-Integer-Info-Record">B.6 Machine Integer Info Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Machine-Floating_002dPoint-Info-Record">B.7 Machine Floating-Point Info Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Multiple-Response-Sets-Records">B.8 Multiple Response Sets Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Extra-Product-Info-Record">B.9 Extra Product Info Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Variable-Display-Parameter-Record">B.10 Variable Display Parameter Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Long-Variable-Names-Record">B.11 Long Variable Names Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Very-Long-String-Record">B.12 Very Long String Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Character-Encoding-Record">B.13 Character Encoding Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Long-String-Value-Labels-Record">B.14 Long String Value Labels Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Long-String-Missing-Values-Record">B.15 Long String Missing Values Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Data-File-and-Variable-Attributes-Records">B.16 Data File and Variable Attributes Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Extended-Number-of-Cases-Record">B.17 Extended Number of Cases Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Other-Informational-Records">B.18 Other Informational Records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Dictionary-Termination-Record">B.19 Dictionary Termination Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Data-Record">B.20 Data Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="System-File-Record-Structure"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#System-File-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#File-Header-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="System-File-Record-Structure-1"></a>
<h2 class="section">B.1 System File Record Structure</h2>

<p>System files are divided into records with the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               type;
char                data[];
</pre></td></tr></table>

<p>This header does not identify the length of the <code>data</code> or any
information about what it contains, so the system file reader must
understand the format of <code>data</code> based on <code>type</code>.  However,
records with type 7, called <em>extension records</em>, have a stricter
format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               type;
int32               subtype;
int32               size;
int32               count;
char                data[size * count];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  This value identifies a particular kind of extension
record.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each piece of data that follows the header, in bytes.
Known extension records use 1, 4, or 8, for <code>char</code>, <code>int32</code>,
and <code>flt64</code> format data, respectively.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The number of pieces of data that follow the header.
</p>
</dd>
<dt> <code>char data[size * count];</code></dt>
<dd><p>Data, whose format and interpretation depend on the subtype.
</p></dd>
</dl>

<p>An extension record contains exactly <code>size * count</code> bytes of
data, which allows a reader that does not understand an extension
record to skip it.  Extension records provide only nonessential
information, so this allows for files written by newer software to
preserve backward compatibility with older or less capable readers.
</p>
<p>Records in a system file must appear in the following order:
</p>
<ul>
<li>
File header record.

</li><li>
Variable records.

</li><li>
All pairs of value labels records and value label variables records,
if present.

</li><li>
Document record, if present.

</li><li>
Extension (type 7) records, in ascending numerical order of their
subtypes.

<p>System files written by SPSS include at most one of each kind of
extension record.  This is generally true of system files written by
other software as well, with known exceptions noted below in the
individual sections about each type of record.
</p>
</li><li>
Dictionary termination record.

</li><li>
Data record.
</li></ul>

<p>We advise authors of programs that read system files to tolerate
format variations.  Various kinds of misformatting and corruption have
been observed in system files written by SPSS and other software
alike.  In particular, because extension records provide nonessential
information, it is generally better to ignore an extension record
entirely than to refuse to read a system file.
</p>
<p>The following sections describe the known kinds of records.
</p>
<hr size="6">
<a name="File-Header-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#System-File-Record-Structure" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="File-Header-Record-1"></a>
<h2 class="section">B.2 File Header Record</h2>

<p>A system file begins with the file header, with the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">char                rec_type[4];
char                prod_name[60];
int32               layout_code;
int32               nominal_case_size;
int32               compression;
int32               weight_index;
int32               ncases;
flt64               bias;
char                creation_date[9];
char                creation_time[8];
char                file_label[64];
char                padding[3];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>char rec_type[4];</code></dt>
<dd><p>Record type code, either &lsquo;<samp>$FL2</samp>&rsquo; for system files with
uncompressed data or data compressed with simple bytecode compression,
or &lsquo;<samp>$FL3</samp>&rsquo; for system files with ZLIB compressed data.
</p>
<p>This is truly a character field that uses the character encoding as
other strings.  Thus, in a file with an ASCII-based character encoding
this field contains <code>24 46 4c 32</code> or <code>24 46 4c 33</code>, and in a
file with an EBCDIC-based encoding this field contains <code>5b c6 d3
f2</code>.  (No EBCDIC-based ZLIB-compressed files have been observed.)
</p>
</dd>
<dt> <code>char prod_name[60];</code></dt>
<dd><p>Product identification string.  This always begins with the characters
&lsquo;<samp>@(#) SPSS DATA FILE</samp>&rsquo;.  PSPP uses the remaining characters to
give its version and the operating system name; for example, &lsquo;<samp>GNU
pspp 0.1.4 - sparc-sun-solaris2.5.2</samp>&rsquo;.  The string is truncated if it
would be longer than 60 characters; otherwise it is padded on the right
with spaces.
</p>
<p><a name="layout_005fcode"></a>
</p></dd>
<dt> <code>int32 layout_code;</code></dt>
<dd><p>Normally set to 2, although a few system files have been spotted in
the wild with a value of 3 here.  PSPP use this value to determine the
file&rsquo;s integer endianness (see section <a href="#System-File-Format">System File Format</a>).
</p>
</dd>
<dt> <code>int32 nominal_case_size;</code></dt>
<dd><p>Number of data elements per case.  This is the number of variables,
except that long string variables add extra data elements (one for every
8 characters after the first 8).  However, string variables do not
contribute to this value beyond the first 255 bytes.   Further, system
files written by some systems set this value to -1.  In general, it is
unsafe for systems reading system files to rely upon this value.
</p>
</dd>
<dt> <code>int32 compression;</code></dt>
<dd><p>Set to 0 if the data in the file is not compressed, 1 if the data is
compressed with simple bytecode compression, 2 if the data is ZLIB
compressed.  This field has value 2 if and only if <code>rec_type</code> is
&lsquo;<samp>$FL3</samp>&rsquo;.
</p>
</dd>
<dt> <code>int32 weight_index;</code></dt>
<dd><p>If one of the variables in the data set is used as a weighting
variable, set to the dictionary index of that variable, plus 1
(see <a href="#Dictionary-Index">Dictionary Index</a>).  Otherwise, set to 0.
</p>
</dd>
<dt> <code>int32 ncases;</code></dt>
<dd><p>Set to the number of cases in the file if it is known, or -1 otherwise.
</p>
<p>In the general case it is not possible to determine the number of cases
that will be output to a system file at the time that the header is
written.  The way that this is dealt with is by writing the entire
system file, including the header, then seeking back to the beginning of
the file and writing just the <code>ncases</code> field.  For files in which
this is not valid, the seek operation fails.  In this case,
<code>ncases</code> remains -1.
</p>
<p><a name="bias"></a>
</p></dd>
<dt> <code>flt64 bias;</code></dt>
<dd><p>Compression bias, ordinarily set to 100.  Only integers between
<code>1 - bias</code> and <code>251 - bias</code> can be compressed.
</p>
<p>By assuming that its value is 100, PSPP uses <code>bias</code> to determine
the file&rsquo;s floating-point format and endianness (see section <a href="#System-File-Format">System File Format</a>).  If the compression bias is not 100, PSPP cannot auto-detect
the floating-point format and assumes that it is IEEE 754 format with
the same endianness as the system file&rsquo;s integers, which is correct
for all known system files.
</p>
</dd>
<dt> <code>char creation_date[9];</code></dt>
<dd><p>Date of creation of the system file, in &lsquo;<samp>dd mmm yy</samp>&rsquo;
format, with the month as standard English abbreviations, using an
initial capital letter and following with lowercase.  If the date is not
available then this field is arbitrarily set to &lsquo;<samp>01 Jan 70</samp>&rsquo;.
</p>
</dd>
<dt> <code>char creation_time[8];</code></dt>
<dd><p>Time of creation of the system file, in &lsquo;<samp>hh:mm:ss</samp>&rsquo;
format and using 24-hour time.  If the time is not available then this
field is arbitrarily set to &lsquo;<samp>00:00:00</samp>&rsquo;.
</p>
</dd>
<dt> <code>char file_label[64];</code></dt>
<dd><p>File label declared by the user, if any (see <a href="pspp.html#FILE-LABEL">(pspp)FILE LABEL</a> section &lsquo;FILE LABEL&rsquo; in <cite>PSPP Users Guide</cite>).  Padded on the right with spaces.
</p>
<p>A product that identifies itself as <code>VOXCO INTERVIEWER 4.3</code> uses
CR-only line ends in this field, rather than the more usual LF-only or
CR LF line ends.
</p>
</dd>
<dt> <code>char padding[3];</code></dt>
<dd><p>Ignored padding bytes to make the structure a multiple of 32 bits in
length.  Set to zeros.
</p></dd>
</dl>

<hr size="6">
<a name="Variable-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#File-Header-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Value-Labels-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Record-1"></a>
<h2 class="section">B.3 Variable Record</h2>

<p>There must be one variable record for each numeric variable and each
string variable with width 8 bytes or less.  String variables wider
than 8 bytes have one variable record for each 8 bytes, rounding up.
The first variable record for a long string specifies the variable&rsquo;s
correct dictionary information.  Subsequent variable records for a
long string are filled with dummy information: a type of -1, no
variable label or missing values, print and write formats that are
ignored, and an empty string as name.  A few system files have been
encountered that include a variable label on dummy variable records,
so readers should take care to parse dummy variable records in the
same way as other variable records.
</p>
<p><a name="Dictionary-Index"></a>
The <em>dictionary index</em> of a variable is its offset in the set of
variable records, including dummy variable records for long string
variables.  The first variable record has a dictionary index of 0, the
second has a dictionary index of 1, and so on.
</p>
<p>The system file format does not directly support string variables
wider than 255 bytes.  Such very long string variables are represented
by a number of narrower string variables.  See section <a href="#Very-Long-String-Record">Very Long String Record</a>, for details.
</p>
<p>A system file should contain at least one variable and thus at least
one variable record, but system files have been observed in the wild
without any variables (thus, no data either).
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               type;
int32               has_var_label;
int32               n_missing_values;
int32               print;
int32               write;
char                name[8];

/* <span class="roman">Present only if <code>has_var_label</code> is 1.</span> */
int32               label_len;
char                label[];

/* <span class="roman">Present only if <code>n_missing_values</code> is nonzero</span>. */
flt64               missing_values[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type code.  Always set to 2.
</p>
</dd>
<dt> <code>int32 type;</code></dt>
<dd><p>Variable type code.  Set to 0 for a numeric variable.  For a short
string variable or the first part of a long string variable, this is set
to the width of the string.  For the second and subsequent parts of a
long string variable, set to -1, and the remaining fields in the
structure are ignored.
</p>
</dd>
<dt> <code>int32 has_var_label;</code></dt>
<dd><p>If this variable has a variable label, set to 1; otherwise, set to 0.
</p>
</dd>
<dt> <code>int32 n_missing_values;</code></dt>
<dd><p>If the variable has no missing values, set to 0.  If the variable has
one, two, or three discrete missing values, set to 1, 2, or 3,
respectively.  If the variable has a range for missing variables, set to
-2; if the variable has a range for missing variables plus a single
discrete value, set to -3.
</p>
<p>A long string variable always has the value 0 here.  A separate record
indicates missing values for long string variables (see section <a href="#Long-String-Missing-Values-Record">Long String Missing Values Record</a>).
</p>
</dd>
<dt> <code>int32 print;</code></dt>
<dd><p>Print format for this variable.  See below.
</p>
</dd>
<dt> <code>int32 write;</code></dt>
<dd><p>Write format for this variable.  See below.
</p>
</dd>
<dt> <code>char name[8];</code></dt>
<dd><p>Variable name.  The variable name must begin with a capital letter or
the at-sign (&lsquo;<samp>@</samp>&rsquo;).  Subsequent characters may also be digits, octothorpes
(&lsquo;<samp>#</samp>&rsquo;), dollar signs (&lsquo;<samp>$</samp>&rsquo;), underscores (&lsquo;<samp>_</samp>&rsquo;), or full
stops (&lsquo;<samp>.</samp>&rsquo;).  The variable name is padded on the right with spaces.
</p>
<p>The &lsquo;<samp>name</samp>&rsquo; fields should be unique within a system file.  System
files written by SPSS that contain very long string variables with
similar names sometimes contain duplicate names that are later
eliminated by resolving the very long string names (see section <a href="#Very-Long-String-Record">Very Long String Record</a>).  PSPP handles duplicates by assigning them new,
unique names.
</p>
</dd>
<dt> <code>int32 label_len;</code></dt>
<dd><p>This field is present only if <code>has_var_label</code> is set to 1.  It is
set to the length, in characters, of the variable label.  The
documented maximum length varies from 120 to 255 based on SPSS
version, but some files have been seen with longer labels.  PSPP
accepts labels of any length.
</p>
</dd>
<dt> <code>char label[];</code></dt>
<dd><p>This field is present only if <code>has_var_label</code> is set to 1.  It has
length <code>label_len</code>, rounded up to the nearest multiple of 32 bits.
The first <code>label_len</code> characters are the variable&rsquo;s variable label.
</p>
</dd>
<dt> <code>flt64 missing_values[];</code></dt>
<dd><p>This field is present only if <code>n_missing_values</code> is nonzero.  It
has the same number of 8-byte elements as the absolute value of
<code>n_missing_values</code>.  Each element is interpreted as a number for
numeric variables (with HIGHEST and LOWEST indicated as described in
the chapter introduction).  For string variables of width less than 8
bytes, elements are right-padded with spaces; for string variables
wider than 8 bytes, only the first 8 bytes of each missing value are
specified, with the remainder implicitly all spaces.
</p>
<p>For discrete missing values, each element represents one missing
value.  When a range is present, the first element denotes the minimum
value in the range, and the second element denotes the maximum value
in the range.  When a range plus a value are present, the third
element denotes the additional discrete missing value.
</p></dd>
</dl>

<p><a name="System-File-Output-Formats"></a>
The <code>print</code> and <code>write</code> members of sysfile_variable are output
formats coded into <code>int32</code> types.  The least-significant byte
of the <code>int32</code> represents the number of decimal places, and the
next two bytes in order of increasing significance represent field width
and format type, respectively.  The most-significant byte is not
used and should be set to zero.
</p>
<p>Format types are defined as follows:
</p>
<blockquote><table>
<thead><tr><th>Value</th><th>Meaning</th></tr></thead>
<tr><td>0</td><td>Not used.</td></tr>
<tr><td>1</td><td><code>A</code></td></tr>
<tr><td>2</td><td><code>AHEX</code></td></tr>
<tr><td>3</td><td><code>COMMA</code></td></tr>
<tr><td>4</td><td><code>DOLLAR</code></td></tr>
<tr><td>5</td><td><code>F</code></td></tr>
<tr><td>6</td><td><code>IB</code></td></tr>
<tr><td>7</td><td><code>PIBHEX</code></td></tr>
<tr><td>8</td><td><code>P</code></td></tr>
<tr><td>9</td><td><code>PIB</code></td></tr>
<tr><td>10</td><td><code>PK</code></td></tr>
<tr><td>11</td><td><code>RB</code></td></tr>
<tr><td>12</td><td><code>RBHEX</code></td></tr>
<tr><td>13</td><td>Not used.</td></tr>
<tr><td>14</td><td>Not used.</td></tr>
<tr><td>15</td><td><code>Z</code></td></tr>
<tr><td>16</td><td><code>N</code></td></tr>
<tr><td>17</td><td><code>E</code></td></tr>
<tr><td>18</td><td>Not used.</td></tr>
<tr><td>19</td><td>Not used.</td></tr>
<tr><td>20</td><td><code>DATE</code></td></tr>
<tr><td>21</td><td><code>TIME</code></td></tr>
<tr><td>22</td><td><code>DATETIME</code></td></tr>
<tr><td>23</td><td><code>ADATE</code></td></tr>
<tr><td>24</td><td><code>JDATE</code></td></tr>
<tr><td>25</td><td><code>DTIME</code></td></tr>
<tr><td>26</td><td><code>WKDAY</code></td></tr>
<tr><td>27</td><td><code>MONTH</code></td></tr>
<tr><td>28</td><td><code>MOYR</code></td></tr>
<tr><td>29</td><td><code>QYR</code></td></tr>
<tr><td>30</td><td><code>WKYR</code></td></tr>
<tr><td>31</td><td><code>PCT</code></td></tr>
<tr><td>32</td><td><code>DOT</code></td></tr>
<tr><td>33</td><td><code>CCA</code></td></tr>
<tr><td>34</td><td><code>CCB</code></td></tr>
<tr><td>35</td><td><code>CCC</code></td></tr>
<tr><td>36</td><td><code>CCD</code></td></tr>
<tr><td>37</td><td><code>CCE</code></td></tr>
<tr><td>38</td><td><code>EDATE</code></td></tr>
<tr><td>39</td><td><code>SDATE</code></td></tr>
</table>
</blockquote>

<p>A few system files have been observed in the wild with invalid
<code>write</code> fields, in particular with value 0.  Readers should
probably treat invalid <code>print</code> or <code>write</code> fields as some
default format.
</p>
<hr size="6">
<a name="Value-Labels-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Document-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Value-Labels-Records-1"></a>
<h2 class="section">B.4 Value Labels Records</h2>

<p>The value label records documented in this section are used for
numeric and short string variables only.  Long string variables may
have value labels, but their value labels are recorded using a
different record type (see section <a href="#Long-String-Value-Labels-Record">Long String Value Labels Record</a>).
</p>
<p>The value label record has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               label_count;

/* <span class="roman">Repeated <code>label_cnt</code> times</span>. */
char                value[8];
char                label_len;
char                label[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 3.
</p>
</dd>
<dt> <code>int32 label_count;</code></dt>
<dd><p>Number of value labels present in this record.
</p></dd>
</dl>

<p>The remaining fields are repeated <code>count</code> times.  Each
repetition specifies one value label.
</p>
<dl compact="compact">
<dt> <code>char value[8];</code></dt>
<dd><p>A numeric value or a short string value padded as necessary to 8 bytes
in length.  Its type and width cannot be determined until the
following value label variables record (see below) is read.
</p>
</dd>
<dt> <code>char label_len;</code></dt>
<dd><p>The label&rsquo;s length, in bytes.  The documented maximum length varies
from 60 to 120 based on SPSS version.  PSPP supports value labels up
to 255 bytes long.
</p>
</dd>
<dt> <code>char label[];</code></dt>
<dd><p><code>label_len</code> bytes of the actual label, followed by up to 7 bytes
of padding to bring <code>label</code> and <code>label_len</code> together to a
multiple of 8 bytes in length.
</p></dd>
</dl>

<p>The value label record is always immediately followed by a value label
variables record with the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               var_count;
int32               vars[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 4.
</p>
</dd>
<dt> <code>int32 var_count;</code></dt>
<dd><p>Number of variables that the associated value labels from the value
label record are to be applied.
</p>
</dd>
<dt> <code>int32 vars[];</code></dt>
<dd><p>A list of dictionary indexes of variables to which to apply the value
labels (see <a href="#Dictionary-Index">Dictionary Index</a>).  There are <code>var_count</code>
elements.
</p>
<p>String variables wider than 8 bytes may not be specified in this list.
</p></dd>
</dl>

<hr size="6">
<a name="Document-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-Labels-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Machine-Integer-Info-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Document-Record-2"></a>
<h2 class="section">B.5 Document Record</h2>

<p>The document record, if present, has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               n_lines;
char                lines[][80];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 6.
</p>
</dd>
<dt> <code>int32 n_lines;</code></dt>
<dd><p>Number of lines of documents present.
</p>
</dd>
<dt> <code>char lines[][80];</code></dt>
<dd><p>Document lines.  The number of elements is defined by <code>n_lines</code>.
Lines shorter than 80 characters are padded on the right with spaces.
</p></dd>
</dl>

<hr size="6">
<a name="Machine-Integer-Info-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Document-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Machine-Floating_002dPoint-Info-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Machine-Integer-Info-Record-1"></a>
<h2 class="section">B.6 Machine Integer Info Record</h2>

<p>The integer info record, if present, has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Data.</span> */
int32               version_major;
int32               version_minor;
int32               version_revision;
int32               machine_code;
int32               floating_point_rep;
int32               compression_code;
int32               endianness;
int32               character_code;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 3.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Size of each piece of data in the data part, in bytes.  Always set to 4.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>Number of pieces of data in the data part.  Always set to 8.
</p>
</dd>
<dt> <code>int32 version_major;</code></dt>
<dd><p>PSPP major version number.  In version <var>x</var>.<var>y</var>.<var>z</var>, this
is <var>x</var>.
</p>
</dd>
<dt> <code>int32 version_minor;</code></dt>
<dd><p>PSPP minor version number.  In version <var>x</var>.<var>y</var>.<var>z</var>, this
is <var>y</var>.
</p>
</dd>
<dt> <code>int32 version_revision;</code></dt>
<dd><p>PSPP version revision number.  In version <var>x</var>.<var>y</var>.<var>z</var>,
this is <var>z</var>.
</p>
</dd>
<dt> <code>int32 machine_code;</code></dt>
<dd><p>Machine code.  PSPP always set this field to value to -1, but other
values may appear.
</p>
</dd>
<dt> <code>int32 floating_point_rep;</code></dt>
<dd><p>Floating point representation code.  For IEEE 754 systems this is 1.
IBM 370 sets this to 2, and DEC VAX E to 3.
</p>
</dd>
<dt> <code>int32 compression_code;</code></dt>
<dd><p>Compression code.  Always set to 1, regardless of whether or how the
file is compressed.
</p>
</dd>
<dt> <code>int32 endianness;</code></dt>
<dd><p>Machine endianness.  1 indicates big-endian, 2 indicates little-endian.
</p>
</dd>
<dt> <code>int32 character_code;</code></dt>
<dd><p><a name="character_002dcode"></a> Character code.  The following values have
been actually observed in system files:
</p>
<dl compact="compact">
<dt> 1</dt>
<dd><p>EBCDIC.
</p>
</dd>
<dt> 2</dt>
<dd><p>7-bit ASCII.
</p>
</dd>
<dt> 1250</dt>
<dd><p>The <code>windows-1250</code> code page for Central European and Eastern
European languages.
</p>
</dd>
<dt> 1252</dt>
<dd><p>The <code>windows-1252</code> code page for Western European languages.
</p>
</dd>
<dt> 28591</dt>
<dd><p>ISO 8859-1.
</p>
</dd>
<dt> 65001</dt>
<dd><p>UTF-8.
</p></dd>
</dl>

<p>The following additional values are known to be defined:
</p>
<dl compact="compact">
<dt> 3</dt>
<dd><p>8-bit &ldquo;ASCII&rdquo;.
</p>
</dd>
<dt> 4</dt>
<dd><p>DEC Kanji.
</p></dd>
</dl>

<p>Other Windows code page numbers are known to be generally valid.
</p>
<p>Old versions of SPSS for Unix and Windows always wrote value 2 in this
field, regardless of the encoding in use.  Newer versions also write
the character encoding as a string (see <a href="#Character-Encoding-Record">Character Encoding Record</a>).
</p></dd>
</dl>

<hr size="6">
<a name="Machine-Floating_002dPoint-Info-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Machine-Integer-Info-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Multiple-Response-Sets-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Machine-Floating_002dPoint-Info-Record-1"></a>
<h2 class="section">B.7 Machine Floating-Point Info Record</h2>

<p>The floating-point info record, if present, has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Data.</span> */
flt64               sysmis;
flt64               highest;
flt64               lowest;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 4.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Size of each piece of data in the data part, in bytes.  Always set to 8.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>Number of pieces of data in the data part.  Always set to 3.
</p>
</dd>
<dt> <code>flt64 sysmis;</code></dt>
<dt> <code>flt64 highest;</code></dt>
<dt> <code>flt64 lowest;</code></dt>
<dd><p>The system missing value, the value used for HIGHEST in missing
values, and the value used for LOWEST in missing values, respectively.
See section <a href="#System-File-Format">System File Format</a>, for more information.
</p>
<p>The SPSSWriter library in PHP, which identifies itself as <code>FOM
SPSS 1.0.0</code> in the file header record <code>prod_name</code> field, writes
unexpected values to these fields, but it uses the same values
consistently throughout the rest of the file.
</p></dd>
</dl>

<hr size="6">
<a name="Multiple-Response-Sets-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Machine-Floating_002dPoint-Info-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Extra-Product-Info-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Multiple-Response-Sets-Records-1"></a>
<h2 class="section">B.8 Multiple Response Sets Records</h2>

<p>The system file format has two different types of records that
represent multiple response sets (see <a href="pspp.html#MRSETS">(pspp)MRSETS</a> section &lsquo;MRSETS&rsquo; in <cite>PSPP Users Guide</cite>).  The first type of record describes multiple response sets
that can be understood by SPSS before version 14.  The second type of
record, with a closely related format, is used for multiple dichotomy
sets that use the CATEGORYLABELS=COUNTEDVALUES feature added in
version 14.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                mrsets[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Set to 7 for records that describe multiple response
sets understood by SPSS before version 14, or to 19 for records that
describe dichotomy sets that use the CATEGORYLABELS=COUNTEDVALUES
feature added in version 14.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>mrsets</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>mrsets</code>.
</p>
</dd>
<dt> <code>char mrsets[];</code></dt>
<dd><p>Zero or more line feeds (byte 0x0a), followed by a series of multiple
response sets, each of which consists of the following:
</p>
<ul>
<li>
The set&rsquo;s name (an identifier that begins with &lsquo;<samp>$</samp>&rsquo;), in mixed
upper and lower case.

</li><li>
An equals sign (&lsquo;<samp>=</samp>&rsquo;).

</li><li>
&lsquo;<samp>C</samp>&rsquo; for a multiple category set, &lsquo;<samp>D</samp>&rsquo; for a multiple
dichotomy set with CATEGORYLABELS=VARLABELS, or &lsquo;<samp>E</samp>&rsquo; for a
multiple dichotomy set with CATEGORYLABELS=COUNTEDVALUES.

</li><li>
For a multiple dichotomy set with CATEGORYLABELS=COUNTEDVALUES, a
space, followed by a number expressed as decimal digits, followed by a
space.  If LABELSOURCE=VARLABEL was specified on MRSETS, then the
number is 11; otherwise it is 1.<a name="DOCF2" href="#FOOT2">(2)</a>

</li><li>
For either kind of multiple dichotomy set, the counted value, as a
positive integer count specified as decimal digits, followed by a
space, followed by as many string bytes as specified in the count.  If
the set contains numeric variables, the string consists of the counted
integer value expressed as decimal digits.  If the set contains string
variables, the string contains the counted string value.  Either way,
the string may be padded on the right with spaces (older versions of
SPSS seem to always pad to a width of 8 bytes; newer versions don&rsquo;t).

</li><li>
A space.

</li><li>
The multiple response set&rsquo;s label, using the same format as for the
counted value for multiple dichotomy sets.  A string of length 0 means
that the set does not have a label.  A string of length 0 is also
written if LABELSOURCE=VARLABEL was specified.

</li><li>
A space.

</li><li>
The short names of the variables in the set, converted to lowercase,
each separated from the previous by a single space.

<p>Even though a multiple response set must have at least two variables,
some system files contain multiple response sets with no variables or
one variable.  The source and meaning of these multiple response sets is
unknown.  (Perhaps they arise from creating a multiple response set
then deleting all the variables that it contains?)
</p>
</li><li>
One line feed (byte 0x0a).  Sometimes multiple, even hundreds, of line
feeds are present.
</li></ul>
</dd>
</dl>

<p>Example: Given appropriate variable definitions, consider the
following MRSETS command:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">MRSETS /MCGROUP NAME=$a LABEL='my mcgroup' VARIABLES=a b c
       /MDGROUP NAME=$b VARIABLES=g e f d VALUE=55
       /MDGROUP NAME=$c LABEL='mdgroup #2' VARIABLES=h i j VALUE='Yes'
       /MDGROUP NAME=$d LABEL='third mdgroup' CATEGORYLABELS=COUNTEDVALUES
        VARIABLES=k l m VALUE=34
       /MDGROUP NAME=$e CATEGORYLABELS=COUNTEDVALUES LABELSOURCE=VARLABEL
        VARIABLES=n o p VALUE='choice'.
</pre></td></tr></table>

<p>The above would generate the following multiple response set record of
subtype 7:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$a=C 10 my mcgroup a b c
$b=D2 55 0  g e f d
$c=D3 Yes 10 mdgroup #2 h i j
</pre></td></tr></table>

<p>It would also generate the following multiple response set record with
subtype 19:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">$d=E 1 2 34 13 third mdgroup k l m
$e=E 11 6 choice 0  n o p
</pre></td></tr></table>

<hr size="6">
<a name="Extra-Product-Info-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Multiple-Response-Sets-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Display-Parameter-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Extra-Product-Info-Record-1"></a>
<h2 class="section">B.9 Extra Product Info Record</h2>

<p>This optional record appears to contain a text string that describes
the program that wrote the file and the source of the data.  (This is
redundant with the file label and product info found in the file
header record.)
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                info[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 10.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>info</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>info</code>.
</p>
</dd>
<dt> <code>char info[];</code></dt>
<dd><p>A text string.  A product that identifies itself as <code>VOXCO
INTERVIEWER 4.3</code> uses CR-only line ends in this field, rather than the
more usual LF-only or CR LF line ends.
</p></dd>
</dl>

<hr size="6">
<a name="Variable-Display-Parameter-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Extra-Product-Info-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Long-Variable-Names-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Display-Parameter-Record-1"></a>
<h2 class="section">B.10 Variable Display Parameter Record</h2>

<p>The variable display parameter record, if present, has the following
format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Repeated <code>count</code> times</span>. */
int32               measure;
int32               width;           /* <span class="roman">Not always present.</span> */
int32               alignment;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 11.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of <code>int32</code>.  Always set to 4.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The number of sets of variable display parameters (ordinarily the
number of variables in the dictionary), times 2 or 3.
</p></dd>
</dl>

<p>The remaining members are repeated <code>count</code> times, in the same
order as the variable records.  No element corresponds to variable
records that continue long string variables.  The meanings of these
members are as follows:
</p>
<dl compact="compact">
<dt> <code>int32 measure;</code></dt>
<dd><p>The measurement type of the variable:
</p><dl compact="compact">
<dt> 1</dt>
<dd><p>Nominal Scale
</p></dd>
<dt> 2</dt>
<dd><p>Ordinal Scale
</p></dd>
<dt> 3</dt>
<dd><p>Continuous Scale
</p></dd>
</dl>

<p>SPSS sometimes writes a <code>measure</code> of 0.  PSPP interprets this as
nominal scale.
</p>
</dd>
<dt> <code>int32 width;</code></dt>
<dd><p>The width of the display column for the variable in characters.
</p>
<p>This field is present if <var>count</var> is 3 times the number of
variables in the dictionary.  It is omitted if <var>count</var> is 2 times
the number of variables.
</p>
</dd>
<dt> <code>int32 alignment;</code></dt>
<dd><p>The alignment of the variable for display purposes:
</p>
<dl compact="compact">
<dt> 0</dt>
<dd><p>Left aligned
</p></dd>
<dt> 1</dt>
<dd><p>Right aligned
</p></dd>
<dt> 2</dt>
<dd><p>Centre aligned
</p></dd>
</dl>
</dd>
</dl>

<hr size="6">
<a name="Long-Variable-Names-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Display-Parameter-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Very-Long-String-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Long-Variable-Names-Record-1"></a>
<h2 class="section">B.11 Long Variable Names Record</h2>

<p>If present, the long variable names record has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                var_name_pairs[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 13.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>var_name_pairs</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>var_name_pairs</code>.
</p>
</dd>
<dt> <code>char var_name_pairs[];</code></dt>
<dd><p>A list of <var>key</var>&ndash;<var>value</var> tuples, where <var>key</var> is the name
of a variable, and <var>value</var> is its long variable name.
The <var>key</var> field is at most 8 bytes long and must match the
name of a variable which appears in the variable record (see section <a href="#Variable-Record">Variable Record</a>).
The <var>value</var> field is at most 64 bytes long.
The <var>key</var> and <var>value</var> fields are separated by a &lsquo;<samp>=</samp>&rsquo; byte.
Each tuple is separated by a byte whose value is 09.  There is no
trailing separator following the last tuple.
The total length is <code>count</code> bytes.
</p></dd>
</dl>

<hr size="6">
<a name="Very-Long-String-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Long-Variable-Names-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Character-Encoding-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Very-Long-String-Record-1"></a>
<h2 class="section">B.12 Very Long String Record</h2>

<p>Old versions of SPSS limited string variables to a width of 255 bytes.
For backward compatibility with these older versions, the system file
format represents a string longer than 255 bytes, called a <em>very
long string</em>, as a collection of strings no longer than 255 bytes
each.  The strings concatenated to make a very long string are called
its <em>segments</em>; for consistency, variables other than very long
strings are considered to have a single segment.
</p>
<p>A very long string with a width of <var>w</var> has <var>n</var> =
(<var>w</var> + 251) / 252 segments, that is, one segment for every
252 bytes of width, rounding up.  It would be logical, then, for each
of the segments except the last to have a width of 252 and the last
segment to have the remainder, but this is not the case.  In fact,
each segment except the last has a width of 255 bytes.  The last
segment has width <var>w</var> - (<var>n</var> - 1) * 252; some versions
of SPSS make it slightly wider, but not wide enough to make the last
segment require another 8 bytes of data.
</p>
<p>Data is packed tightly into segments of a very long string, 255 bytes
per segment.  Because 255 bytes of segment data are allocated for
every 252 bytes of the very long string&rsquo;s width (approximately), some
unused space is left over at the end of the allocated segments.  Data
in unused space is ignored.
</p>
<p>Example: Consider a very long string of width 20,000.  Such a very
long string has 20,000 / 252 = 80 (rounding up) segments.  The first
79 segments have width 255; the last segment has width 20,000 - 79 *
252 = 92 or slightly wider (up to 96 bytes, the next multiple of 8).
The very long string&rsquo;s data is actually stored in the 19,890 bytes in
the first 78 segments, plus the first 110 bytes of the 79th segment
(19,890 + 110 = 20,000).  The remaining 145 bytes of the 79th segment
and all 92 bytes of the 80th segment are unused.
</p>
<p>The very long string record explains how to stitch together segments
to obtain very long string data.  For each of the very long string
variables in the dictionary, it specifies the name of its first
segment&rsquo;s variable and the very long string variable&rsquo;s actual width.
The remaining segments immediately follow the named variable in the
system file&rsquo;s dictionary.
</p>
<p>The very long string record, which is present only if the system file
contains very long string variables, has the following format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                string_lengths[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 14.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>string_lengths</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>string_lengths</code>.
</p>
</dd>
<dt> <code>char string_lengths[];</code></dt>
<dd><p>A list of <var>key</var>&ndash;<var>value</var> tuples, where <var>key</var> is the name
of a variable, and <var>value</var> is its length.
The <var>key</var> field is at most 8 bytes long and must match the
name of a variable which appears in the variable record (see section <a href="#Variable-Record">Variable Record</a>).
The <var>value</var> field is exactly 5 bytes long. It is a zero-padded,
ASCII-encoded string that is the length of the variable.
The <var>key</var> and <var>value</var> fields are separated by a &lsquo;<samp>=</samp>&rsquo; byte.
Tuples are delimited by a two-byte sequence {00, 09}.
After the last tuple, there may be a single byte 00, or {00, 09}.
The total length is <code>count</code> bytes.
</p></dd>
</dl>

<hr size="6">
<a name="Character-Encoding-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Very-Long-String-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Long-String-Value-Labels-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Character-Encoding-Record-1"></a>
<h2 class="section">B.13 Character Encoding Record</h2>

<p>This record, if present, indicates the character encoding for string data,
long variable names, variable labels, value labels and other strings in the
file.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                encoding[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 20.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>encoding</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>encoding</code>.
</p>
</dd>
<dt> <code>char encoding[];</code></dt>
<dd><p>The name of the character encoding.  Normally this will be an official
IANA character set name or alias.
See <a href="http://www.iana.org/assignments/character-sets">http://www.iana.org/assignments/character-sets</a>.
Character set names are not case-sensitive, but SPSS appears to write
them in all-uppercase.
</p></dd>
</dl>

<p>This record is not present in files generated by older software.  See
also the <code>character_code</code> field in the machine integer info
record (see <a href="#character_002dcode">character-code</a>).
</p>
<p>When the character encoding record and the machine integer info record
are both present, all system files observed in practice indicate the
same character encoding, e.g. 1252 as <code>character_code</code> and
<code>windows-1252</code> as <code>encoding</code>, 65001 and <code>UTF-8</code>, etc.
</p>
<p>If, for testing purposes, a file is crafted with different
<code>character_code</code> and <code>encoding</code>, it seems that
<code>character_code</code> controls the encoding for all strings in the
system file before the dictionary termination record, including
strings in data (e.g. string missing values), and <code>encoding</code>
controls the encoding for strings following the dictionary termination
record.
</p>
<hr size="6">
<a name="Long-String-Value-Labels-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Character-Encoding-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Long-String-Missing-Values-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Long-String-Value-Labels-Record-1"></a>
<h2 class="section">B.14 Long String Value Labels Record</h2>

<p>This record, if present, specifies value labels for long string
variables.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Repeated up to exactly <code>count</code> bytes.</span> */
int32               var_name_len;
char                var_name[];
int32               var_width;
int32               n_labels;
long_string_label   labels[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 21.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The number of bytes following the header until the next header.
</p>
</dd>
<dt> <code>int32 var_name_len;</code></dt>
<dt> <code>char var_name[];</code></dt>
<dd><p>The number of bytes in the name of the variable that has long string
value labels, plus the variable name itself, which consists of exactly
<code>var_name_len</code> bytes.  The variable name is not padded to any
particular boundary, nor is it null-terminated.
</p>
</dd>
<dt> <code>int32 var_width;</code></dt>
<dd><p>The width of the variable, in bytes, which will be between 9 and
32767.
</p>
</dd>
<dt> <code>int32 n_labels;</code></dt>
<dt> <code>long_string_label labels[];</code></dt>
<dd><p>The long string labels themselves.  The <code>labels</code> array contains
exactly <code>n_labels</code> elements, each of which has the following
substructure:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               value_len;
char                value[];
int32               label_len;
char                label[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 value_len;</code></dt>
<dt> <code>char value[];</code></dt>
<dd><p>The string value being labeled.  <code>value_len</code> is the number of
bytes in <code>value</code>; it is equal to <code>var_width</code>.  The
<code>value</code> array is not padded or null-terminated.
</p>
</dd>
<dt> <code>int32 label_len;</code></dt>
<dt> <code>char label[];</code></dt>
<dd><p>The label for the string value.  <code>label_len</code>, which must be
between 0 and 120, is the number of bytes in <code>label</code>.  The
<code>label</code> array is not padded or null-terminated.
</p></dd>
</dl>
</dd>
</dl>

<hr size="6">
<a name="Long-String-Missing-Values-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Long-String-Value-Labels-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Data-File-and-Variable-Attributes-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Long-String-Missing-Values-Record-1"></a>
<h2 class="section">B.15 Long String Missing Values Record</h2>

<p>This record, if present, specifies missing values for long string
variables.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Repeated up to exactly <code>count</code> bytes.</span> */
int32               var_name_len;
char                var_name[];
char                n_missing_values;
long_string_missing_value   values[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 22.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The number of bytes following the header until the next header.
</p>
</dd>
<dt> <code>int32 var_name_len;</code></dt>
<dt> <code>char var_name[];</code></dt>
<dd><p>The number of bytes in the name of the long string variable that has
missing values, plus the variable name itself, which consists of
exactly <code>var_name_len</code> bytes.  The variable name is not padded to
any particular boundary, nor is it null-terminated.
</p>
</dd>
<dt> <code>char n_missing_values;</code></dt>
<dd><p>The number of missing values, either 1, 2, or 3.  (This is, unusually,
a single byte instead of a 32-bit number.)
</p>
</dd>
<dt> <code>long_string_missing_value values[];</code></dt>
<dd><p>The missing values themselves.  This array contains exactly
<code>n_missing_values</code> elements, each of which has the following
substructure:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               value_len;
char                value[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 value_len;</code></dt>
<dd><p>The length of the missing value string, in bytes.  This value should
be 8, because long string variables are at least 8 bytes wide (by
definition), only the first 8 bytes of a long string variable&rsquo;s
missing values are allowed to be non-spaces, and any spaces within the
first 8 bytes are included in the missing value here.
</p>
</dd>
<dt> <code>char value[];</code></dt>
<dd><p>The missing value string, exactly <code>value_len</code> bytes, without
any padding or null terminator.
</p></dd>
</dl>
</dd>
</dl>

<hr size="6">
<a name="Data-File-and-Variable-Attributes-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Long-String-Missing-Values-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Variable-Roles" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Data-File-and-Variable-Attributes-Records-1"></a>
<h2 class="section">B.16 Data File and Variable Attributes Records</h2>

<p>The data file and variable attributes records represent custom
attributes for the system file or for individual variables in the
system file, as defined on the DATAFILE ATTRIBUTE (see <a href="pspp.html#DATAFILE-ATTRIBUTE">(pspp)DATAFILE ATTRIBUTE</a> section &lsquo;DATAFILE ATTRIBUTE&rsquo; in <cite>PSPP Users Guide</cite>) and VARIABLE ATTRIBUTE commands
(see <a href="pspp.html#VARIABLE-ATTRIBUTE">(pspp)VARIABLE ATTRIBUTE</a> section &lsquo;VARIABLE ATTRIBUTE&rsquo; in <cite>PSPP Users Guide</cite>), respectively.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">/* <span class="roman">Header.</span> */
int32               rec_type;
int32               subtype;
int32               size;
int32               count;

/* <span class="roman">Exactly <code>count</code> bytes of data.</span> */
char                attributes[];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 17 for a data file attribute record or
to 18 for a variable attributes record.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>The size of each element in the <code>attributes</code> member. Always set to 1.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>The total number of bytes in <code>attributes</code>.
</p>
</dd>
<dt> <code>char attributes[];</code></dt>
<dd><p>The attributes, in a text-based format.
</p>
<p>In record subtype 17, this field contains a single attribute set.  An
attribute set is a sequence of one or more attributes concatenated
together.  Each attribute consists of a name, which has the same
syntax as a variable name, followed by, inside parentheses, a sequence
of one or more values.  Each value consists of a string enclosed in
single quotes (<code>'</code>) followed by a line feed (byte 0x0a).  A value
may contain single quote characters, which are not themselves escaped
or quoted or required to be present in pairs.  There is no apparent
way to embed a line feed in a value.  There is no distinction between
an attribute with a single value and an attribute array with one
element.
</p>
<p>In record subtype 18, this field contains a sequence of one or more
variable attribute sets.  If more than one variable attribute set is
present, each one after the first is delimited from the previous by
<code>/</code>.  Each variable attribute set consists of a long
variable name,
followed by <code>:</code>, followed by an attribute set with the same
syntax as on record subtype 17.
</p>
<p>System files written by <code>Stata 14.1/-savespss- 1.77 by
S.Radyakin</code> may include multiple records with subtype 18, one per
variable that has variable attributes.
</p>
<p>The total length is <code>count</code> bytes.
</p></dd>
</dl>

<a name="Example"></a>
<h3 class="subheading">Example</h3>

<p>A system file produced with the following VARIABLE ATTRIBUTE commands
in effect:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">VARIABLE ATTRIBUTE VARIABLES=dummy ATTRIBUTE=fred[1]('23') fred[2]('34').
VARIABLE ATTRIBUTE VARIABLES=dummy ATTRIBUTE=bert('123').
</pre></td></tr></table>

<p>will contain a variable attribute record with the following contents:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">0000  07 00 00 00 12 00 00 00  01 00 00 00 22 00 00 00  |............&quot;...|
0010  64 75 6d 6d 79 3a 66 72  65 64 28 27 32 33 27 0a  |dummy:fred('23'.|
0020  27 33 34 27 0a 29 62 65  72 74 28 27 31 32 33 27  |'34'.)bert('123'|
0030  0a 29                                             |.)              |
</pre></td></tr></table>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Variable-Roles">B.16.1 Variable Roles</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Variable-Roles"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Data-File-and-Variable-Attributes-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Extended-Number-of-Cases-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Data-File-and-Variable-Attributes-Records" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Variable-Roles-1"></a>
<h3 class="subsection">B.16.1 Variable Roles</h3>

<p>A variable&rsquo;s role is represented as an attribute named <code>$@Role</code>.
This attribute has a single element whose values and their meanings
are:
</p>
<dl compact="compact">
<dt> <code>0</code></dt>
<dd><p>Input.  This, the default, is the most common role.
</p></dd>
<dt> <code>1</code></dt>
<dd><p>Output.
</p></dd>
<dt> <code>2</code></dt>
<dd><p>Both.
</p></dd>
<dt> <code>3</code></dt>
<dd><p>None.
</p></dd>
<dt> <code>4</code></dt>
<dd><p>Partition.
</p></dd>
<dt> <code>5</code></dt>
<dd><p>Split.
</p></dd>
</dl>

<hr size="6">
<a name="Extended-Number-of-Cases-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Variable-Roles" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Informational-Records" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Extended-Number-of-Cases-Record-1"></a>
<h2 class="section">B.17 Extended Number of Cases Record</h2>

<p>The file header record expresses the number of cases in the system
file as an int32 (see section <a href="#File-Header-Record">File Header Record</a>).  This record allows the
number of cases in the system file to be expressed as a 64-bit number.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               subtype;
int32               size;
int32               count;
int64               unknown;
int64               ncases64;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 7.
</p>
</dd>
<dt> <code>int32 subtype;</code></dt>
<dd><p>Record subtype.  Always set to 16.
</p>
</dd>
<dt> <code>int32 size;</code></dt>
<dd><p>Size of each element.  Always set to 8.
</p>
</dd>
<dt> <code>int32 count;</code></dt>
<dd><p>Number of pieces of data in the data part.  Alway set to 2.
</p>
</dd>
<dt> <code>int64 unknown;</code></dt>
<dd><p>Meaning unknown.  Always set to 1.
</p>
</dd>
<dt> <code>int64 ncases64;</code></dt>
<dd><p>Number of cases in the file as a 64-bit integer.  Presumably this
could be -1 to indicate that the number of cases is unknown, for the
same reason as <code>ncases</code> in the file header record, but this has
not been observed in the wild.
</p></dd>
</dl>

<hr size="6">
<a name="Other-Informational-Records"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Extended-Number-of-Cases-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Dictionary-Termination-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Other-Informational-Records-1"></a>
<h2 class="section">B.18 Other Informational Records</h2>

<p>This chapter documents many specific types of extension records are
documented here, but others are known to exist.  PSPP ignores unknown
extension records when reading system files.
</p>
<p>The following extension record subtypes have also been observed, with
the following believed meanings:
</p>
<dl compact="compact">
<dt> 5</dt>
<dd><p>A set of grouped variables (according to Aapi H&auml;m&auml;l&auml;inen).
</p>
</dd>
<dt> 6</dt>
<dd><p>Date info, probably related to USE (according to Aapi H&auml;m&auml;l&auml;inen).
</p>
</dd>
<dt> 12</dt>
<dd><p>A UUID in the format described in RFC 4122.  Only two examples
observed, both written by SPSS 13, and in each case the UUID contained
both upper and lower case.
</p>
</dd>
<dt> 24</dt>
<dd><p>XML that describes how data in the file should be displayed on-screen.
</p></dd>
</dl>

<hr size="6">
<a name="Dictionary-Termination-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Other-Informational-Records" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Data-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Dictionary-Termination-Record-1"></a>
<h2 class="section">B.19 Dictionary Termination Record</h2>

<p>The dictionary termination record separates all other records from the
data records.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">int32               rec_type;
int32               filler;
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>int32 rec_type;</code></dt>
<dd><p>Record type.  Always set to 999.
</p>
</dd>
<dt> <code>int32 filler;</code></dt>
<dd><p>Ignored padding.  Should be set to 0.
</p></dd>
</dl>

<hr size="6">
<hr size="6">
<a name="SPSS_002fPC_002b-System-File-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Data-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Record-0-Main-Header-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="SPSS_002fPC_002b-System-File-Format-1"></a>
<h1 class="appendix">C. SPSS/PC+ System File Format</h1>

<p>SPSS/PC+, first released in 1984, was a simplified version of SPSS for
IBM PC and compatible computers.  It used a data file format related
to the one described in the previous chapter, but simplified and
incompatible.  The SPSS/PC+ software became obsolete in the 1990s, so
files in this format are rarely encountered today.  Nevertheless, for
completeness, and because it is not very difficult, it seems
worthwhile to support at least reading these files.  This chapter
documents this format, based on examination of a corpus of about 60
files from a variety of sources.
</p>
<p>System files use four data types: 8-bit characters, 16-bit unsigned
integers, 32-bit unsigned integers, and 64-bit floating points, called
here <code>char</code>, <code>uint16</code>, <code>uint32</code>, and <code>flt64</code>,
respectively.  Data is not necessarily aligned on a word or
double-word boundary.
</p>
<p>SPSS/PC+ ran only on IBM PC and compatible computers.  Therefore,
values in these files are always in little-endian byte order.
Floating-point numbers are always in IEEE 754 format.
</p>
<p>SPSS/PC+ system files represent the system-missing value as -1.66e308,
or <code>f5 1e 26 02 8a 8c ed ff</code> expressed as hexadecimal.  (This is
an unusual choice: it is close to, but not equal to, the largest
negative 64-bit IEEE 754, which is about -1.8e308.)
</p>
<p>Text in SPSS/PC+ system file is encoded in ASCII-based 8-bit MS DOS
codepages.  The corpus used for investigating the format were all
ASCII-only.
</p>
<p>An SPSS/PC+ system file begins with the following 256-byte directory:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">uint32              two;
uint32              zero;
struct {
    uint32          ofs;
    uint32          len;
} records[15];
char                filename[128];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>uint32 two;</code></dt>
<dt> <code>uint32 zero;</code></dt>
<dd><p>Always set to 2 and 0, respectively.
</p>
<p>These fields could be used as a signature for the file format, but the
<code>product</code> field in record 0 seems more likely to be unique
(see section <a href="#Record-0-Main-Header-Record">Record 0: Main Header Record</a>).
</p>
</dd>
<dt> <code>struct { &hellip; } records[15];</code></dt>
<dd><p>Each of the elements in this array identifies a record in the system
file.  The <code>ofs</code> is a byte offset, from the beginning of the
file, that identifies the start of the record.  <code>len</code> specifies
the length of the record, in bytes.  Many records are optional or not
used.  If a record is not present, <code>ofs</code> and <code>len</code> for that
record are both are zero.
</p>
</dd>
<dt> <code>char filename[128];</code></dt>
<dd><p>In most files in the corpus, this field is entirely filled with
spaces.  In one file, it contains a file name, followed by a null
bytes, followed by spaces to fill the remainder of the field.  The
meaning is unknown.
</p></dd>
</dl>

<p>The following sections describe the contents of each record,
identified by the index into the <code>records</code> array.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Record-0-Main-Header-Record">C.1 Record 0: Main Header Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Record-1-Variables-Record">C.2 Record 1: Variables Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Record-2-Labels-Record">C.3 Record 2: Labels Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Record-3-Data-Record">C.4 Record 3: Data Record</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Records-4-and-5-Data-Entry">C.5 Records 4 and 5: Data Entry</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Record-0-Main-Header-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Record-1-Variables-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Record-0_003a-Main-Header-Record"></a>
<h2 class="section">C.1 Record 0: Main Header Record</h2>

<p>All files in the corpus have this record at offset 0x100 with length
0xb0 (but readers should find this record, like the others, via the
<code>records</code> table in the directory).  Its format is:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">uint16              one0;
char                product[62];
flt64               sysmis;
uint32              zero0;
uint32              zero1;
uint16              one1;
uint16              compressed;
uint16              nominal_case_size;
uint16              n_cases0;
uint16              weight_index;
uint16              zero2;
uint16              n_cases1;
uint16              zero3;
char                creation_date[8];
char                creation_time[8];
char                label[64];
</pre></td></tr></table>

<dl compact="compact">
<dt> <code>uint16 one0;</code></dt>
<dt> <code>uint16 one1;</code></dt>
<dd><p>Always set to 1.
</p>
</dd>
<dt> <code>uint32 zero0;</code></dt>
<dt> <code>uint32 zero1;</code></dt>
<dt> <code>uint16 zero2;</code></dt>
<dt> <code>uint16 zero3;</code></dt>
<dd><p>Always set to 0.
</p>
<p>It seems likely that one of these variables is set to 1 if weighting
is enabled, but none of the files in the corpus is weighted.
</p>
</dd>
<dt> <code>char product[62];</code></dt>
<dd><p>Name of the program that created the file.  Only the following unique
values have been observed, in each case padded on the right with
spaces:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">DESPSS/PC+ System File Written by Data Entry II
PCSPSS SYSTEM FILE.  IBM PC DOS, SPSS/PC+
PCSPSS SYSTEM FILE.  IBM PC DOS, SPSS/PC+ V3.0
PCSPSS SYSTEM FILE.  IBM PC DOS, SPSS for Windows
</pre></td></tr></table>

<p>Thus, it is reasonable to use the presence of the string &lsquo;<samp>SPSS</samp>&rsquo;
at offset 0x104 as a simple test for an SPSS/PC+ data file.
</p>
</dd>
<dt> <code>flt64 sysmis;</code></dt>
<dd><p>The system-missing value, as described previously (see section <a href="#SPSS_002fPC_002b-System-File-Format">SPSS/PC+ System File Format</a>).
</p>
</dd>
<dt> <code>uint16 compressed;</code></dt>
<dd><p>Set to 0 if the data in the file is not compressed, 1 if the data is
compressed with simple bytecode compression.
</p>
</dd>
<dt> <code>uint16 nominal_case_size;</code></dt>
<dd><p>Number of data elements per case.  This is the number of variables,
except that long string variables add extra data elements (one for
every 8 bytes after the first 8).  String variables in SPSS/PC+ system
files are limited to 255 bytes.
</p>
</dd>
<dt> <code>uint16 n_cases0;</code></dt>
<dt> <code>uint16 n_cases1;</code></dt>
<dd><p>The number of cases in the data record.  Both values are the same.
Some files in the corpus contain data for the number of cases noted
here, followed by garbage that somewhat resembles data.
</p>
</dd>
<dt> <code>uint16 weight_index;</code></dt>
<dd><p>0, if the file is unweighted, otherwise a 1-based index into the data
record of the weighting variable, e.g. 4 for the first variable
after the 3 system-defined variables.
</p>
</dd>
<dt> <code>char creation_date[8];</code></dt>
<dd><p>The date that the file was created, in &lsquo;<samp>mm/dd/yy</samp>&rsquo; format.
Single-digit days and months are not prefixed by zeros.  The string is
padded with spaces on right or left or both, e.g. &lsquo;<samp>_2/4/93_</samp>&rsquo;,
&lsquo;<samp>10/5/87_</samp>&rsquo;, and &lsquo;<samp>_1/11/88</samp>&rsquo; (with &lsquo;<samp>_</samp>&rsquo; standing in for a
space) are all actual examples from the corpus.
</p>
</dd>
<dt> <code>char creation_time[8];</code></dt>
<dd><p>The time that the file was created, in &lsquo;<samp>HH:MM:SS</samp>&rsquo; format.
Single-digit hours are padded on a left with a space.  Minutes and
seconds are always written as two digits.
</p>
</dd>
<dt> <code>char file_label[64];</code></dt>
<dd><p>File label declared by the user, if any (see <a href="pspp.html#FILE-LABEL">(pspp)FILE LABEL</a> section &lsquo;FILE LABEL&rsquo; in <cite>PSPP Users Guide</cite>).  Padded on the right with spaces.
</p></dd>
</dl>

<hr size="6">
<a name="Record-1-Variables-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Record-0-Main-Header-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Record-2-Labels-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Record-1_003a-Variables-Record"></a>
<h2 class="section">C.2 Record 1: Variables Record</h2>

<p>The variables record most commonly starts at offset 0x1b0, but it can
be placed elsewhere.  The record contains instances of the following
32-byte structure:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">uint32              value_label_start;
uint32              value_label_end;
uint32              var_label_ofs;
uint32              format;
char                name[8];
union {
    flt64           f;
    char            s[8];
} missing;
</pre></td></tr></table>

<p>The number of instances is the <code>nominal_case_size</code> specified in
the main header record.  There is one instance for each numeric
variable and each string variable with width 8 bytes or less.  String
variables wider than 8 bytes have one instance for each 8 bytes,
rounding up.  The first instance for a long string specifies the
variable&rsquo;s correct dictionary information.  Subsequent instances for a
long string are generally filled with all-zero bytes, although the
<code>missing</code> field contains the numeric system-missing value, and
some writers also fill in <code>var_label_ofs</code>, <code>format</code>, and
<code>name</code>, sometimes filling the latter with the numeric
system-missing value rather than a text string.  Regardless of the
values used, readers should ignore the contents of these additional
instances for long strings.
</p>
<dl compact="compact">
<dt> <code>uint32 value_label_start;</code></dt>
<dt> <code>uint32 value_label_end;</code></dt>
<dd><p>For a variable with value labels, these specify offsets into the label
record of the start and end of this variable&rsquo;s value labels,
respectively.  See section <a href="#Record-2-Labels-Record">Record 2: Labels Record</a>, for more information.
</p>
<p>For a variable without any value labels, these are both zero.
</p>
<p>A long string variable may not have value labels.
</p>
</dd>
<dt> <code>uint32 var_label_ofs;</code></dt>
<dd><p>For a variable with a variable label, this specifies an offset into
the label record.  See section <a href="#Record-2-Labels-Record">Record 2: Labels Record</a>, for more
information.
</p>
<p>For a variable without a variable label, this is zero.
</p>
</dd>
<dt> <code>uint32 format;</code></dt>
<dd><p>The variable&rsquo;s output format, in the same format used in system files.
See <a href="#System-File-Output-Formats">System File Output Formats</a>, for details.  SPSS/PC+ system files
only use format types 5 (F, for numeric variables) and 1 (A, for
string variables).
</p>
</dd>
<dt> <code>char name[8];</code></dt>
<dd><p>The variable&rsquo;s name, padded on the right with spaces.
</p>
</dd>
<dt> <code>union { &hellip; } missing;</code></dt>
<dd><p>A user-missing value.  For numeric variables, <code>missing.f</code> is the
variable&rsquo;s user-missing value.  For string variables, <code>missing.s</code>
is a string missing value.  A variable without a user-missing value is
indicated with <code>missing.f</code> set to the system-missing value, even
for string variables (!).  A Long string variable may not have a
missing value.
</p></dd>
</dl>

<p>In addition to the user-defined variables, every SPSS/PC+ system file
contains, as its first three variables, the following system-defined
variables, in the following order.  The system-defined variables have
no variable label, value labels, or missing values.
</p>
<dl compact="compact">
<dt> <code>$CASENUM</code></dt>
<dd><p>A numeric variable with format F8.0.  Most of the time this is a
sequence number, starting with 1 for the first case and counting up
for each subsequent case.  Some files skip over values, which probably
reflects cases that were deleted.
</p>
</dd>
<dt> <code>$DATE</code></dt>
<dd><p>A string variable with format A8.  Same format (including varying
padding) as the <code>creation_date</code> field in the main header record
(see section <a href="#Record-0-Main-Header-Record">Record 0: Main Header Record</a>).  The actual date can differ
from <code>creation_date</code> and from record to record.  This may reflect
when individual cases were added or updated.
</p>
</dd>
<dt> <code>$WEIGHT</code></dt>
<dd><p>A numeric variable with format F8.2.  This represents the case&rsquo;s
weight; SPSS/PC+ files do not have a user-defined weighting variable.
If weighting has not been enabled, every case has value 1.0.
</p></dd>
</dl>

<hr size="6">
<a name="Record-2-Labels-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Record-1-Variables-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Record-3-Data-Record" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Record-2_003a-Labels-Record"></a>
<h2 class="section">C.3 Record 2: Labels Record</h2>

<p>The labels record holds value labels and variable labels.  Unlike the
other records, it is not meant to be read directly and sequentially.
Instead, this record must be interpreted one piece at a time, by
following pointers from the variables record.
</p>
<p>The <code>value_label_start</code>, <code>value_label_end</code>, and
<code>var_label_ofs</code> fields in a variable record are all offsets
relative to the beginning of the labels record, with an additional
7-byte offset.  That is, if the labels record starts at byte offset
<code>labels_ofs</code> and a variable has a given <code>var_label_ofs</code>,
then the variable label begins at byte offset <em><code>labels_ofs</code>
+ <code>var_label_ofs</code> + 7</em> in the file.
</p>
<p>A variable label, starting at the offset indicated by
<code>var_label_ofs</code>, consists of a one-byte length followed by the
specified number of bytes of the variable label string, like this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">uint8               length;
char                s[length];
</pre></td></tr></table>

<p>A set of value labels, extending from <code>value_label_start</code> to
<code>value_label_end</code> (exclusive), consists of a numeric or string
value followed by a string in the format just described.  String
values are padded on the right with spaces to fill the 8-byte field,
like this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">union {
    flt64           f;
    char            s[8];
} value;
uint8               length;
char                s[length];
</pre></td></tr></table>

<p>The labels record begins with a pair of uint32 values.  The first of
these is always 3.  The second is between 8 and 16 less than the
number of bytes in the record.  Neither value is important for
interpreting the file.
</p>
<hr size="6">
<a name="Record-3-Data-Record"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Record-2-Labels-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Records-4-and-5-Data-Entry" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Record-3_003a-Data-Record"></a>
<h2 class="section">C.4 Record 3: Data Record</h2>

<p>The format of the data record varies depending on the value of
<code>compressed</code> in the file header record:
</p>
<dl compact="compact">
<dt> 0: no compression</dt>
<dd><p>Data is arranged as a series of 8-byte elements, one per variable
instance variable in the variable record (see section <a href="#Record-1-Variables-Record">Record 1: Variables Record</a>).  Numeric values are given in <code>flt64</code> format; string
values are literal characters string, padded on the right with spaces
when necessary to fill out 8-byte units.
</p>
</dd>
<dt> 1: bytecode compression</dt>
<dd><p>The first 8 bytes of the data record is divided into a series of
1-byte command codes.  These codes have meanings as described below:
</p>
<dl compact="compact">
<dt> 0</dt>
<dd><p>The system-missing value.
</p>
</dd>
<dt> 1</dt>
<dd><p>A numeric or string value that is not
compressible.  The value is stored in the 8 bytes following the
current block of command bytes.  If this value appears twice in a block
of command bytes, then it indicates the second group of 8 bytes following the
command bytes, and so on.
</p>
</dd>
<dt> 2 through 255</dt>
<dd><p>A number with value <var>code</var> - 100, where <var>code</var> is the value of
the compression code.  For example, code 105 indicates a numeric
variable of value 5.
</p></dd>
</dl>

<p>The end of the 8-byte group of bytecodes is followed by any 8-byte
blocks of non-compressible values indicated by code 1.  After that
follows another 8-byte group of bytecodes, then those bytecodes&rsquo;
non-compressible values.  The pattern repeats up to the number of
cases specified by the main header record have been seen.
</p>
<p>The corpus does not contain any files with command codes 2 through 95,
so it is possible that some of these codes are used for special
purposes.
</p></dd>
</dl>

<p>Cases of data often, but not always, fill the entire data record.
Readers should stop reading after the number of cases specified in the
main header record.  Otherwise, readers may try to interpret garbage
following the data as additional cases.
</p>
<hr size="6">
<a name="Records-4-and-5-Data-Entry"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Record-3-Data-Record" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Records-4-and-5_003a-Data-Entry"></a>
<h2 class="section">C.5 Records 4 and 5: Data Entry</h2>

<p>Records 4 and 5 appear to be related to SPSS/PC+ Data Entry.
</p><hr size="6">
<a name="SPSS-Viewer-File-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Records-4-and-5-Data-Entry" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS_002fPC_002b-System-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="SPSS-Viewer-File-Format-1"></a>
<h1 class="chapter">D. SPSS Viewer File Format</h1>

<p>SPSS Viewer or &lsquo;<tt>.spv</tt>&rsquo; files, here called SPV files, are written
by SPSS 16 and later to represent the contents of its output editor.
This chapter documents the format, based on examination of a corpus of
about 500 files from a variety of sources.  This description is
detailed enough to read SPV files, but probably not enough to write
them.
</p>
<p>SPSS 15 and earlier versions use a completely different output format
based on the Microsoft Compound Document Format.  This format is not
documented here.
</p>
<p>An SPV file is a Zip archive that can be read with <code>zipinfo</code>
and <code>unzip</code> and similar programs.  The final member in the Zip
archive is a file named &lsquo;<tt>META-INF/MANIFEST.MF</tt>&rsquo;.  This structure
makes SPV files resemble Java &ldquo;JAR&rdquo; files (and ODF files), but
whereas a JAR manifest contains a sequence of colon-delimited
key/value pairs, an SPV manifest contains the string
&lsquo;<samp>allowPivoting=true</samp>&rsquo;, without a new-line.  (This string may be
the best way to identify an SPV file; it is invariant across the
corpus.)
</p>
<p>The rest of the members in an SPV file&rsquo;s Zip archive fall into two
categories: <em>structure</em> and <em>detail</em> members.  Structure
member names begin with &lsquo;<tt>outputViewer<var>nnnnnnnnnn</var></tt>&rsquo;, where
each <var>n</var> is a decimal digit, and end with &lsquo;<tt>.xml</tt>&rsquo;, and often
include the string &lsquo;<tt>_heading</tt>&rsquo; in between.  Each of these members
represents some kind of output item (a table, a heading, a block of
text, etc.) or a group of them.  The member whose output goes at the
beginning of the document is numbered 0, the next member in the output
is numbered 1, and so on.
</p>
<p>Structure members contain XML.  This XML is sometimes self-contained,
but it often references detail members in the Zip archive, which are
named as follows:
</p>
<dl compact="compact">
<dt> &lsquo;<tt><var>prefix</var>_table.xml</tt>&rsquo; and &lsquo;<tt><var>prefix</var>_tableData.bin</tt>&rsquo;</dt>
<dt> &lsquo;<tt><var>prefix</var>_lightTableData.bin</tt>&rsquo;</dt>
<dd><p>The structure of a table plus its data.  Older SPV files pair a
&lsquo;<tt><var>prefix</var>_table.xml</tt>&rsquo; file that describes the table&rsquo;s
structure with a binary &lsquo;<tt><var>prefix</var>_tableData.bin</tt>&rsquo; file that
gives its data.  Newer SPV files (the majority of those in the corpus)
instead include a single &lsquo;<tt><var>prefix</var>_lightTableData.bin</tt>&rsquo; file
that incorporates both into a single binary format.
</p>
</dd>
<dt> &lsquo;<tt><var>prefix</var>_warning.xml</tt>&rsquo; and &lsquo;<tt><var>prefix</var>_warningData.bin</tt>&rsquo;</dt>
<dt> &lsquo;<tt><var>prefix</var>_lightWarningData.bin</tt>&rsquo;</dt>
<dd><p>Same format used for tables, with a different name.
</p>
</dd>
<dt> &lsquo;<tt><var>prefix</var>_notes.xml</tt>&rsquo; and &lsquo;<tt><var>prefix</var>_notesData.bin</tt>&rsquo;</dt>
<dt> &lsquo;<tt><var>prefix</var>_lightNotesData.bin</tt>&rsquo;</dt>
<dd><p>Same format used for tables, with a different name.
</p>
</dd>
<dt> &lsquo;<tt><var>prefix</var>_chartData.bin</tt>&rsquo; and &lsquo;<tt><var>prefix</var>_chart.xml</tt>&rsquo;</dt>
<dd><p>The structure of a chart plus its data.  Charts do not have a
&ldquo;light&rdquo; format.
</p>
</dd>
<dt> &lsquo;<tt><var>prefix</var>_pmml.scf</tt>&rsquo;</dt>
<dt> &lsquo;<tt><var>prefix</var>_stats.scf</tt>&rsquo;</dt>
<dt> &lsquo;<tt><var>prefix</var>_model.xml</tt>&rsquo;</dt>
<dd><p>Not yet investigated.  The corpus contains few examples.
</p></dd>
</dl>

<p>The &lsquo;<tt><var>prefix</var></tt>&rsquo; in the names of the detail members is
typically an 11-digit decimal number that increases for each item,
tending to skip values.  Older SPV files use different naming
conventions.  Structure member refer to detail members by name, and so
their exact names do not matter to readers as long as they are unique.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SPV-Structure-Member-Format">D.1 Structure Member Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Detail-Member-Format">D.2 Light Detail Member Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Legacy-Detail-Member-Binary-Format">D.3 Legacy Detail Member Binary Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Legacy-Detail-Member-XML-Format">D.4 Legacy Detail Member XML Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="SPV-Structure-Member-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-heading-Element" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Structure-Member-Format"></a>
<h2 class="section">D.1 Structure Member Format</h2>

<p>Structure members&rsquo; XML files claim conformance with a collection of
XML Schemas.  These schemas are distributed, under a nonfree license,
with SPSS binaries.  Fortunately, the schemas are not necessary to
understand the structure members.  To a degree, the schemas can even
be deceptive because they document elements and attributes that are
not in the corpus and do not document elements and attributes that are
commonly found there.
</p>
<p>Structure members use a different XML namespace for each schema, but
these namespaces are not entirely consistent.  In some SPV files, for
example, the <code>viewer-tree</code> schema is associated with namespace
&lt;<code>http://xml.spss.com/spss/viewer-tree</code>&gt; and in others with
&lt;<code>http://xml.spss.com/spss/viewer/viewer-tree</code>&gt; (note the
additional &lsquo;<tt>viewer/</tt>&rsquo;).  Under either name, the schema URIs are
not resolvable to obtain the schemas themselves.
</p>
<p>One may ignore all of the above in interpreting a structure member.
The actual XML has a simple and straightforward form that does not
require a reader to take schemas or namespaces into account.
</p>
<p>The elements found in structure members are documented below.  For
each element, we note the possible parent elements and the element&rsquo;s
contents.  The contents are specified as pseudo-regular expressions
with the following conventions:
</p>
<dl compact="compact">
<dt> text</dt>
<dd><p>XML text content.
</p>
</dd>
<dt> CDATA</dt>
<dd><p>XML CDATA content.
</p>
</dd>
<dt> <code>element</code></dt>
<dd><p>The named element.
</p>
</dd>
<dt> (&hellip;)</dt>
<dd><p>Grouping multiple elements.
</p>
</dd>
<dt> [<var>x</var>]</dt>
<dd><p>An optional <var>x</var>.
</p>
</dd>
<dt> <var>a</var> <em>|</em> <var>b</var></dt>
<dd><p>A choice between <var>a</var> and <var>b</var>.
</p>
</dd>
<dt> <var>x</var>*</dt>
<dd><p>Zero or more <var>x</var>.
</p></dd>
</dl>

<p>For a diagram illustrating the hierarchy of elements within an SPV
structure member, please refer to a PDF version of the manual.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SPV-heading-Element">D.1.1 The <code>heading</code> Element</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-label-Element">D.1.2 The <code>label</code> Element</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-container-Element">D.1.3 The <code>container</code> Element</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-text-Element-_0028Inside-container_0029">D.1.4 The <code>text</code> Element (Inside <code>container</code>)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-html-Element">D.1.5 The <code>html</code> Element</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-table-Element">D.1.6 The <code>table</code> Element</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-tableStructure-Element">D.1.7 The <code>tableStructure</code> Element</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-dataPath-Element">D.1.8 The <code>dataPath</code> Element</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-pageSetup-Element">D.1.9 The <code>pageSetup</code> Element</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-pageHeader-and-pageFooter-Elements">D.1.10 The <code>pageHeader</code> and <code>pageFooter</code> Elements</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-pageParagraph-Element">D.1.11 The <code>pageParagraph</code> Element</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-text-Element-_0028Inside-pageParagraph_0029">D.1.12 The <code>text</code> Element (Inside <code>pageParagraph</code>)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="SPV-heading-Element"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-label-Element" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-heading-Element"></a>
<h3 class="subsection">D.1.1 The <code>heading</code> Element</h3>

<p>Parent: Document root or <code>heading</code> <br>
Contents: [<code>pageSetup</code>] <code>label</code> (<code>container</code> <em>|</em> <code>heading</code>)*
</p>
<p>The root of a structure member is a <code>heading</code>, which represents a
section of output beginning with a title (the <code>label</code>) and
ordinarily followed by content containers or further nested
(sub)-sections of output.
</p>
<p>The document root heading, only, may also contain a <code>pageSetup</code>
element.
</p>
<p>The following attributes have been observed on both document root and
nested <code>heading</code> elements.
</p>
<dl>
<dt><a name="index-creator_002dversion"></a><u>Optional:</u> <b>creator-version</b></dt>
<dd><p>The version of the software that created this SPV file.  A string of
the form <code>xxyyzzww</code> represents software version xx.yy.zz.ww,
e.g. <code>21000001</code> is version 21.0.0.1.  Trailing pairs of zeros
are sometimes omitted, so that <code>21</code>, <code>210000</code>, and
<code>21000000</code> are all version 21.0.0.0 (and the corpus contains all
three of those forms).
</p></dd></dl>

<p>The following attributes have been observed on document root
<code>heading</code> elements only:
</p>
<dl>
<dt><a name="index-creator"></a><u>Optional:</u> <b><code>creator</code></b></dt>
<dd><p>The directory in the file system of the software that created this SPV
file.
</p></dd></dl>

<dl>
<dt><a name="index-creation_002ddate_002dtime"></a><u>Optional:</u> <b><code>creation-date-time</code></b></dt>
<dd><p>The date and time at which the SPV file was written, in a
locale-specific format, e.g. <code>Friday, May 16, 2014 6:47:37 PM
PDT</code> or <code>lunedì 17 marzo 2014 3.15.48 CET</code> or even <code>Friday,
December 5, 2014 5:00:19 o'clock PM EST</code>.
</p></dd></dl>

<dl>
<dt><a name="index-lockReader"></a><u>Optional:</u> <b><code>lockReader</code></b></dt>
<dd><p>Whether a reader should be allowed to edit the output.  The possible
values are <code>true</code> and <code>false</code>, but the corpus only contains
<code>false</code>.
</p></dd></dl>

<dl>
<dt><a name="index-schemaLocation"></a><u>Optional:</u> <b><code>schemaLocation</code></b></dt>
<dd><p>This is actually an XML Namespace attribute.  A reader may ignore it.
</p></dd></dl>

<p>The following attributes have been observed only on nested
<code>heading</code> elements:
</p>
<dl>
<dt><a name="index-commandName"></a><u>Required:</u> <b><code>commandName</code></b></dt>
<dd><p>The locale-invariant name of the command that produced the output,
e.g. <code>Frequencies</code>, <code>T-Test</code>, <code>Non Par Corr</code>.
</p></dd></dl>

<dl>
<dt><a name="index-visibility"></a><u>Optional:</u> <b><code>visibility</code></b></dt>
<dd><p>To what degree the output represented by the element is visible.  The
only observed value is <code>collapsed</code>.
</p></dd></dl>

<dl>
<dt><a name="index-locale"></a><u>Optional:</u> <b><code>locale</code></b></dt>
<dd><p>The locale used for output, in Windows format, which is similar to the
format used in Unix with the underscore replaced by a hyphen, e.g.
<code>en-US</code>, <code>en-GB</code>, <code>el-GR</code>, <code>sr-Cryl-RS</code>.
</p></dd></dl>

<dl>
<dt><a name="index-olang"></a><u>Optional:</u> <b><code>olang</code></b></dt>
<dd><p>The output language, e.g. <code>en</code>, <code>it</code>, <code>es</code>,
<code>de</code>, <code>pt-BR</code>.
</p></dd></dl>

<hr size="6">
<a name="SPV-label-Element"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-heading-Element" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-container-Element" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-label-Element"></a>
<h3 class="subsection">D.1.2 The <code>label</code> Element</h3>

<p>Parent: <code>heading</code> or <code>container</code> <br>
Contents: text
</p>
<p>Every <code>heading</code> and <code>container</code> holds a <code>label</code> as its
first child.  The root <code>heading</code> in a structure member always
contains the string &ldquo;Output&rdquo;.  Otherwise, the text in <code>label</code>
describes what it labels, often by naming the statistical procedure
that was executed, e.g. &ldquo;Frequencies&rdquo; or &ldquo;T-Test&rdquo;.  Labels are
often very generic, especially within a <code>container</code>, e.g.
&ldquo;Title&rdquo; or &ldquo;Warnings&rdquo; or &ldquo;Notes&rdquo;.  Label text is localized
according to the output language, e.g. in Italian a frequency table
procedure is labeled &ldquo;Frequenze&rdquo;.
</p>
<p>The corpus contains one example of an empty label, one that contains
no text.
</p>
<p>This element has no attributes.
</p>
<hr size="6">
<a name="SPV-container-Element"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-label-Element" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-text-Element-_0028Inside-container_0029" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-container-Element"></a>
<h3 class="subsection">D.1.3 The <code>container</code> Element</h3>

<p>Parent: <code>heading</code> <br>
Contents: <code>label</code> [<code>table</code> <em>|</em> <code>text</code>]
</p>
<p>A <code>container</code> serves to label a <code>table</code> or a <code>text</code>
item.
</p>
<p>This element has the following attributes.
</p>
<dl>
<dt><a name="index-visibility-1"></a><u>Required:</u> <b><code>visibility</code></b></dt>
<dd><p>Either <code>visible</code> or <code>hidden</code>, this indicates whether the
container&rsquo;s content is displayed.
</p></dd></dl>

<dl>
<dt><a name="index-text_002dalign"></a><u>Optional:</u> <b><code>text-align</code></b></dt>
<dd><p>Presumably indicates the alignment of text within the container.  The
only observed value is <code>left</code>.  Observed with nested <code>table</code>
and <code>text</code> elements.
</p></dd></dl>

<dl>
<dt><a name="index-width-1"></a><u>Optional:</u> <b><code>width</code></b></dt>
<dd><p>The width of the container in the form <code><var>n</var>px</code>, e.g.
<code>1097px</code>.
</p></dd></dl>

<hr size="6">
<a name="SPV-text-Element-_0028Inside-container_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-container-Element" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-html-Element" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-text-Element-_0028Inside-container_0029"></a>
<h3 class="subsection">D.1.4 The <code>text</code> Element (Inside <code>container</code>)</h3>

<p>Parent: <code>container</code> <br>
Contents: <code>html</code>
</p>
<p>This <code>text</code> element is nested inside a <code>container</code>.  There
is a different <code>text</code> element that is nested inside a
<code>pageParagraph</code>.
</p>
<p>This element has the following attributes.
</p>
<dl>
<dt><a name="index-type"></a><u>Required:</u> <b><code>type</code></b></dt>
<dd><p>One of <code>title</code>, <code>log</code>, or <code>text</code>.
</p></dd></dl>

<dl>
<dt><a name="index-commandName-1"></a><u>Optional:</u> <b><code>commandName</code></b></dt>
<dd><p>As on the <code>heading</code> element.  For output not specific to a
command, this is simply <code>log</code>.  The corpus contains one example
of where <code>commandName</code> is present but set to the empty string.
</p></dd></dl>

<dl>
<dt><a name="index-creator_002dversion-1"></a><u>Optional:</u> <b><code>creator-version</code></b></dt>
<dd><p>As on the <code>heading</code> element.
</p></dd></dl>

<hr size="6">
<a name="SPV-html-Element"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-text-Element-_0028Inside-container_0029" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-table-Element" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-html-Element"></a>
<h3 class="subsection">D.1.5 The <code>html</code> Element</h3>

<p>Parent: <code>text</code> <br>
Contents: CDATA
</p>
<p>The CDATA contains an HTML document.  In some cases, the document
starts with <code>&lt;html&gt;</code> and ends with <code>&lt;/html</code>; in others the
<code>html</code> element is implied.  Generally the HTML includes a
<code>head</code> element with a CSS stylesheet.  The HTML body often begins
with <code>&lt;BR&gt;</code>.  The actual content ranges from trivial to simple:
just discarding the CSS and tags yields readable results.
</p>
<p>This element has the following attributes.
</p>
<dl>
<dt><a name="index-lang"></a><u>Required:</u> <b><code>lang</code></b></dt>
<dd><p>This always contains <code>en</code> in the corpus.
</p></dd></dl>

<hr size="6">
<a name="SPV-table-Element"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-html-Element" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-tableStructure-Element" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-table-Element"></a>
<h3 class="subsection">D.1.6 The <code>table</code> Element</h3>

<p>Parent: <code>container</code> <br>
Contents: <code>tableStructure</code>
</p>
<p>This element has the following attributes.
</p>
<dl>
<dt><a name="index-commandName-2"></a><u>Required:</u> <b><code>commandName</code></b></dt>
<dd><p>As on the <code>heading</code> element.
</p></dd></dl>

<dl>
<dt><a name="index-type-1"></a><u>Required:</u> <b><code>type</code></b></dt>
<dd><p>One of <code>table</code>, <code>note</code>, or <code>warning</code>.
</p></dd></dl>

<dl>
<dt><a name="index-subType"></a><u>Required:</u> <b><code>subType</code></b></dt>
<dd><p>The locale-invariant name for the particular kind of output that this
table represents in the procedure.  This can be the same as
<code>commandName</code> e.g. <code>Frequencies</code>, or different, e.g.
<code>Case Processing Summary</code>.  Generic subtypes <code>Notes</code> and
<code>Warnings</code> are often used.
</p></dd></dl>

<dl>
<dt><a name="index-tableId"></a><u>Required:</u> <b><code>tableId</code></b></dt>
<dd><p>A number that uniquely identifies the table within the SPV file,
typically a large negative number such as <code>-4147135649387905023</code>.
</p></dd></dl>

<dl>
<dt><a name="index-creator_002dversion-2"></a><u>Optional:</u> <b><code>creator-version</code></b></dt>
<dd><p>As on the <code>heading</code> element.  In the corpus, this is only present
for version 21 and up and always includes all 8 digits.
</p></dd></dl>

<hr size="6">
<a name="SPV-tableStructure-Element"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-table-Element" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-dataPath-Element" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-tableStructure-Element"></a>
<h3 class="subsection">D.1.7 The <code>tableStructure</code> Element</h3>

<p>Parent: <code>table</code> <br>
Contents: <code>dataPath</code>
</p>
<p>This element has no attributes.
</p>
<hr size="6">
<a name="SPV-dataPath-Element"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-tableStructure-Element" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-pageSetup-Element" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-dataPath-Element"></a>
<h3 class="subsection">D.1.8 The <code>dataPath</code> Element</h3>

<p>Parent: <code>tableStructure</code> <br>
Contents: text
</p>
<p>Contains the name of the Zip member that holds the table details,
e.g. <code>0000000001437_lightTableData.bin</code>.
</p>
<p>This element has no attributes.
</p>
<hr size="6">
<a name="SPV-pageSetup-Element"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-dataPath-Element" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-pageHeader-and-pageFooter-Elements" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-pageSetup-Element"></a>
<h3 class="subsection">D.1.9 The <code>pageSetup</code> Element</h3>

<p>Parent: <code>heading</code> <br>
Contents: <code>pageHeader</code> <code>pageFooter</code>
</p>
<p>This element has the following attributes.
</p>
<dl>
<dt><a name="index-initial_002dpage_002dnumber"></a><u>Required:</u> <b><code>initial-page-number</code></b></dt>
<dd><p>Always <code>1</code>.
</p></dd></dl>

<dl>
<dt><a name="index-chart_002dsize"></a><u>Optional:</u> <b><code>chart-size</code></b></dt>
<dd><p>Always <code>as-is</code> or a localization (!) of it (e.g. <code>dimensione
attuale</code>, <code>Wie vorgegeben</code>).
</p></dd></dl>

<dl>
<dt><a name="index-margin_002dleft"></a><u>Optional:</u> <b><code>margin-left</code></b></dt>
<dt><a name="index-margin_002dright"></a><u>Optional:</u> <b><code>margin-right</code></b></dt>
<dt><a name="index-margin_002dtop"></a><u>Optional:</u> <b><code>margin-top</code></b></dt>
<dt><a name="index-margin_002dbottom"></a><u>Optional:</u> <b><code>margin-bottom</code></b></dt>
<dd><p>Margin sizes in the form <code><var>size</var>in</code>, e.g. <code>0.25in</code>.
</p></dd></dl>

<dl>
<dt><a name="index-paper_002dheight"></a><u>Optional:</u> <b><code>paper-height</code></b></dt>
<dt><a name="index-paper_002dwidth"></a><u>Optional:</u> <b><code>paper-width</code></b></dt>
<dd><p>Paper sizes in the form <code><var>size</var>in</code>, e.g. <code>8.5in</code> by
<code>11in</code> for letter paper or <code>8.267in</code> by <code>11.692in</code> for
A4 paper.
</p></dd></dl>

<dl>
<dt><a name="index-reference_002dorientation"></a><u>Optional:</u> <b><code>reference-orientation</code></b></dt>
<dd><p>Always <code>0deg</code>.
</p></dd></dl>

<dl>
<dt><a name="index-space_002dafter"></a><u>Optional:</u> <b><code>space-after</code></b></dt>
<dd><p>Always <code>12pt</code>.
</p></dd></dl>

<hr size="6">
<a name="SPV-pageHeader-and-pageFooter-Elements"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-pageSetup-Element" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-pageParagraph-Element" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-pageHeader-and-pageFooter-Elements"></a>
<h3 class="subsection">D.1.10 The <code>pageHeader</code> and <code>pageFooter</code> Elements</h3>

<p>Parent: <code>pageSetup</code> <br>
Contents: <code>pageParagraph</code>*
</p>
<p>This element has no attributes.
</p>
<hr size="6">
<a name="SPV-pageParagraph-Element"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-pageHeader-and-pageFooter-Elements" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-text-Element-_0028Inside-pageParagraph_0029" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-pageParagraph-Element"></a>
<h3 class="subsection">D.1.11 The <code>pageParagraph</code> Element</h3>

<p>Parent: <code>pageHeader</code> or <code>pageFooter</code> <br>
Contents: <code>text</code>
</p>
<p>Text to go at the top or bottom of a page, respectively.
</p>
<p>This element has no attributes.
</p>
<hr size="6">
<a name="SPV-text-Element-_0028Inside-pageParagraph_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-pageParagraph-Element" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Structure-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="The-text-Element-_0028Inside-pageParagraph_0029"></a>
<h3 class="subsection">D.1.12 The <code>text</code> Element (Inside <code>pageParagraph</code>)</h3>

<p>Parent: <code>pageParagraph</code> <br>
Contents: [CDATA]
</p>
<p>This <code>text</code> element is nested inside a <code>pageParagraph</code>.  There
is a different <code>text</code> element that is nested inside a
<code>container</code>.
</p>
<p>The element is either empty, or contains CDATA that holds almost-XHTML
text: in the corpus, either an <code>html</code> or <code>p</code> element.  It is
<em>almost</em>-XHTML because the <code>html</code> element designates the
default namespace as
<code>http://xml.spss.com/spss/viewer/viewer-tree</code> instead of an XHTML
namespace, and because the CDATA can contain substitution variables:
<code>&amp;[Page]</code> for the page number and <code>&amp;[PageTitle]</code> for the
page title.
</p>
<p>Typical contents (indented for clarity):
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;html xmlns=&quot;http://xml.spss.com/spss/viewer/viewer-tree&quot;&gt;
    &lt;head&gt;&lt;/head&gt;
    &lt;body&gt;
        &lt;p style=&quot;text-align:right; margin-top: 0&quot;&gt;Page &amp;[Page]&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</pre></td></tr></table>

<p>This element has the following attributes.
</p>
<dl>
<dt><a name="index-type-2"></a><u>Required:</u> <b><code>type</code></b></dt>
<dd><p>Always <code>text</code>.
</p></dd></dl>

<hr size="6">
<a name="SPV-Light-Detail-Member-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-text-Element-_0028Inside-pageParagraph_0029" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-Header" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Light-Detail-Member-Format"></a>
<h2 class="section">D.2 Light Detail Member Format</h2>

<p>This section describes the format of &ldquo;light&rdquo; detail &lsquo;<tt>.bin</tt>&rsquo;
members.  These members have a binary format which we describe here in
terms of a context-free grammar using the following conventions:
</p>
<dl compact="compact">
<dt> NonTerminal &rArr; &hellip;</dt>
<dd><p>Nonterminals have CamelCaps names, and &rArr; indicates a
production.  The right-hand side of a production is often broken
across multiple lines.  Break points are chosen for aesthetics only
and have no semantic significance.
</p>
</dd>
<dt> 00, 01, &hellip;, ff.</dt>
<dd><p>Bytes with fixed values are written in hexadecimal:
</p>
</dd>
<dt> i0, i1, &hellip;, i9, i10, i11, &hellip;</dt>
<dd><p>32-bit integers with fixed values are written in decimal, prefixed by
&lsquo;<samp>i</samp>&rsquo;.
</p>
</dd>
<dt> byte</dt>
<dd><p>An arbitrary byte.
</p>
</dd>
<dt> int</dt>
<dd><p>An arbitrary 32-bit integer.
</p>
</dd>
<dt> double</dt>
<dd><p>An arbitrary 64-bit IEEE floating-point number.
</p>
</dd>
<dt> string</dt>
<dd><p>A 32-bit integer followed by the specified number of bytes of
character data.  (The encoding is indicated by the Formats
nonterminal.)
</p>
</dd>
<dt> <var>x</var>?</dt>
<dd><p><var>x</var> is optional, e.g. 00? is an optional zero byte.
</p>
</dd>
<dt> <var>x</var>*<var>n</var></dt>
<dd><p><var>x</var> is repeated <var>n</var> times, e.g. byte*10 for ten arbitrary bytes.
</p>
</dd>
<dt> <var>x</var>[<var>name</var>]</dt>
<dd><p>Gives <var>x</var> the specified <var>name</var>.  Names are used in textual
explanations.  They are also used, also bracketed, to indicate counts,
e.g. int[<tt>n</tt>] byte*[<tt>n</tt>] for a 32-bit integer followed by the
specified number of arbitrary bytes.
</p>
</dd>
<dt> <var>a</var> <em>|</em> <var>b</var></dt>
<dd><p>Either <var>a</var> or <var>b</var>.
</p>
</dd>
<dt> (<var>x</var>)</dt>
<dd><p>Parentheses are used for grouping to make precedence clear, especially
in the presence of <em>|</em>, e.g. in 00 (01 <em>|</em> 02 <em>|</em> 03)
00.
</p>
</dd>
<dt> count(<var>x</var>)</dt>
<dd><p>A 32-bit integer that indicates the number of bytes in <var>x</var>,
followed by <var>x</var> itself.
</p>
</dd>
<dt> v1(<var>x</var>)</dt>
<dd><p>In a version 1 &lsquo;<tt>.bin</tt>&rsquo; member, <var>x</var>; in version 3, nothing.
(The &lsquo;<tt>.bin</tt>&rsquo; header indicates the version.)
</p>
</dd>
<dt> v3(<var>x</var>)</dt>
<dd><p>In a version 3 &lsquo;<tt>.bin</tt>&rsquo; member, <var>x</var>; in version 1, nothing.
</p></dd>
</dl>

<p>All integer and floating-point values in this format use little-endian
byte order.
</p>
<p>A &ldquo;light&rdquo; detail member &lsquo;<tt>.bin</tt>&rsquo; consists of a number of sections
concatenated together, terminated by a byte 01:
</p>
<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">LightMember &rArr; Header Title Caption Footnotes Fonts Formats Dimensions Data 01
</pre></td></tr></table>
</td></tr></table>

<p>The following sections go into more detail.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-Header">D.2.1 Header</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-Title">D.2.2 Title</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#PSV-Light-Member-Caption">D.2.3 Caption</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-Footnotes">D.2.4 Footnotes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-Fonts">D.2.5 Fonts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-Formats">D.2.6 Formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-Dimensions">D.2.7 Dimensions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-Categories">D.2.8 Categories</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-Data">D.2.9 Data</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-Value">D.2.10 Value</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Light-Member-ValueMod">D.2.11 ValueMod</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="SPV-Light-Member-Header"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-Title" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Header"></a>
<h3 class="subsection">D.2.1 Header</h3>

<p>An SPV file begins with an 39-byte header:
</p>
<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Header &rArr;
    01 00
    (i1 <em>|</em> i3)[<tt>version</tt>]
    01 (00 <em>|</em> 01) byte*21 00 00
    int[<tt>table-id</tt>] byte*4
</pre></td></tr></table>
</td></tr></table>

<p><code>version</code> is a version number that affects the interpretation of
some of the other data in the member.  We will refer to &ldquo;version 1&rdquo;
and &ldquo;version 3&rdquo; later on and use v1(&hellip;) and v3(&hellip;) for
version-specific formatting (as described previously).
</p>
<p><code>table-id</code> is a binary version of the <code>tableId</code> attribute in
the structure member that refers to the detail member.  For example,
if <code>tableId</code> is <code>-4154297861994971133</code>, then <code>table-id</code>
would be 0xdca00003.
</p>
<p>The meaning of the other variable parts of the header is not known.
</p>
<hr size="6">
<a name="SPV-Light-Member-Title"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-Header" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PSV-Light-Member-Caption" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Title"></a>
<h3 class="subsection">D.2.2 Title</h3>

<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Title &rArr;
    Value[<tt>title1</tt>] 01?
    Value[<tt>c</tt>] 01? 31
    Value[<tt>title2</tt>] 01? 00? 58
</pre></td></tr></table>
</td></tr></table>

<p>The Title, which follows the Header, specifies the pivot table&rsquo;s title
twice, as <code>title1</code> and <code>title2</code>.  In the corpus, they are
always the same.
</p>
<p>Whereas the Value in <code>title1</code> and in <code>title2</code> are
appropriate for presentation, and localized to the user&rsquo;s language,
<code>c</code> is in English, sometimes less specific, and sometimes less
well formatted.  For example, for a frequency table, <code>title1</code> and
<code>title2</code> name the variable and <code>c</code> is simply &ldquo;Frequencies&rdquo;.
</p>
<hr size="6">
<a name="PSV-Light-Member-Caption"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-Title" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-Footnotes" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Caption"></a>
<h3 class="subsection">D.2.3 Caption</h3>

<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Caption &rArr; 58 <em>|</em> 31 Value[<tt>caption</tt>]
</pre></td></tr></table>
</td></tr></table>

<p>The <code>caption</code>, if presented, is shown below the table.
</p>
<hr size="6">
<a name="SPV-Light-Member-Footnotes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#PSV-Light-Member-Caption" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-Fonts" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Footnotes"></a>
<h3 class="subsection">D.2.4 Footnotes</h3>

<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Footnotes &rArr; int[<tt>n</tt>] Footnote*[<tt>n</tt>]
Footnote &rArr; Value[<tt>text</tt>] (58 <em>|</em> 31 Value[<tt>marker</tt>]) byte*4
</pre></td></tr></table>
</td></tr></table>

<p>Each footnote has <code>text</code> and an optional customer <code>marker</code>
(such as &lsquo;<samp>*</samp>&rsquo;).
</p>
<hr size="6">
<a name="SPV-Light-Member-Fonts"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-Footnotes" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-Formats" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Fonts"></a>
<h3 class="subsection">D.2.5 Fonts</h3>

<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Fonts &rArr; 00 Font*8
Font &rArr;
    byte[<tt>index</tt>] 31 string[<tt>typeface</tt>] 00 00
    (10 <em>|</em> 20 <em>|</em> 40 <em>|</em> 50 <em>|</em> 70 <em>|</em> 80)[<tt>f1</tt>] 41
    (i0 <em>|</em> i1 <em>|</em> i2)[<tt>f2</tt>] 00
    (i0 <em>|</em> i2 <em>|</em> i64173)[<tt>f3</tt>]
    (i0 <em>|</em> i1 <em>|</em> i2 <em>|</em> i3)[<tt>f4</tt>]
    string[<tt>fgcolor</tt>] string[<tt>bgcolor</tt>] i0 i0 00
    v3(int[<tt>f5</tt>] int[<tt>f6</tt>] int[<tt>f7</tt>] int[<tt>f8</tt>]))
</pre></td></tr></table>
</td></tr></table>

<p>Each Font represents the font style for a different element, in the
following order: title, caption, footnote, row labels, column labels,
corner labels, data, and layers.
</p>
<p><code>index</code> is the 1-based index of the Font, i.e. 1 for the first
Font, through 8 for the final Font.
</p>
<p><code>typeface</code> is the string name of the font.  In the corpus, this
is <code>SansSerif</code> in over 99% of instances and <code>Times New
Roman</code> in the rest.
</p>
<p><code>fgcolor</code> and <code>bgcolor</code> are the foreground color and
background color, respectively.  In the corpus, these are always
<code>#000000</code> and <code>#ffffff</code>, respectively.
</p>
<p>The meaning of the remaining data is unknown.  It seems likely to
include font sizes, horizontal and vertical alignment, attributes such
as bold or italic, and margins.
</p>
<p>The table below lists the values observed in the corpus.  When a cell
contains a single value, then 99<em>+</em>% of the corpus contains that value.
When a cell contains a pair of values, then the first value is seen in
about two-thirds of the corpus and the second value in about the
remaining one-third.  In fonts that include multiple pairs, values are
correlated, that is, for font 3, f5 = 24, f6 = 24, f7 = 2 appears
about two-thirds of the time, as does the combination of f4 = 0, f6 =
10 for font 7.
</p>
<table>
<thead><tr><th>font</th><th>f1</th><th>f2</th><th>f3</th><th>f4</th><th>f5</th><th>f6</th><th>f7</th><th>f8</th></tr></thead>
<tr><td>1</td><td>40</td><td>1</td><td>0</td><td>0</td><td>8</td><td>10/11</td><td>1</td><td>8</td></tr>
<tr><td>2</td><td>40</td><td>0</td><td>2</td><td>1</td><td>8</td><td>10/11</td><td>1</td><td>1</td></tr>
<tr><td>3</td><td>40</td><td>0</td><td>2</td><td>1</td><td>24/11</td><td>24/ 8</td><td>2/3</td><td>4</td></tr>
<tr><td>4</td><td>40</td><td>0</td><td>2</td><td>3</td><td>8</td><td>10/11</td><td>1</td><td>1</td></tr>
<tr><td>5</td><td>40</td><td>0</td><td>0</td><td>1</td><td>8</td><td>10/11</td><td>1</td><td>4</td></tr>
<tr><td>6</td><td>40</td><td>0</td><td>2</td><td>1</td><td>8</td><td>10/11</td><td>1</td><td>4</td></tr>
<tr><td>7</td><td>40</td><td>0</td><td>64173</td><td>0/1</td><td>8</td><td>10/11</td><td>1</td><td>1</td></tr>
<tr><td>8</td><td>40</td><td>0</td><td>2</td><td>3</td><td>8</td><td>10/11</td><td>1</td><td>4</td></tr>
</table>

<hr size="6">
<a name="SPV-Light-Member-Formats"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-Fonts" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-Dimensions" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Formats"></a>
<h3 class="subsection">D.2.6 Formats</h3>

<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Formats &rArr;
    int[<tt>n1</tt>] byte*[<tt>n1</tt>]
    int[<tt>n2</tt>] byte*[<tt>n2</tt>]
    int[<tt>n3</tt>] byte*[<tt>n3</tt>]
    int[<tt>n4</tt>] int*[<tt>n4</tt>]
    string[<tt>encoding</tt>]
    (i0 <em>|</em> i-1) (00 <em>|</em> 01) 00 (00 <em>|</em> 01)
    int
    byte[<tt>decimal</tt>] byte[<tt>grouping</tt>]
    int[<tt>n-ccs</tt>] string*[<tt>n-ccs</tt>]
    v1(i0)
    v3(count(count(X5) count(X6)))

X5 &rArr; byte*33 int[<tt>n</tt>] int*[<tt>n</tt>]
X6 &rArr;
    01 00 (03 <em>|</em> 04) 00 00 00
    string[<tt>command</tt>] string[<tt>subcommand</tt>]
    string[<tt>language</tt>] string[<tt>charset</tt>] string[<tt>locale</tt>]
    (00 <em>|</em> 01) 00 (00 <em>|</em> 01) (00 <em>|</em> 01)
    int
    byte[<tt>decimal</tt>] byte[<tt>grouping</tt>]
    byte*8 01
    (string[<tt>dataset</tt>] string[<tt>datafile</tt>] i0 int i0)?
    int[<tt>n-ccs</tt>] string*[<tt>n-ccs</tt>]
    2e (00 <em>|</em> 01) (i2000000 i0)?
</pre></td></tr></table>
</td></tr></table>

<p>In every example in the corpus, <code>n1</code> is 240.  The meaning of the
bytes that follow it is unknown.
</p>
<p>In every example in the corpus, <code>n2</code> is 18 and the bytes that
follow it are <code>00 00 00 01 00 00 00 00 00 00 00 00 00 02 00 00 00
00</code>.  The meaning of these bytes is unknown.
</p>
<p>In every example in the corpus for version 1, <code>n3</code> is 16 and the
bytes that follow it are <code>00 00 00 01 00 00 00 01 00 00 00 00 01
01 01 01</code>.  In version 3, observed <code>n3</code> varies from 117 to 150,
and its bytes include a 1-byte count at offset 0x34.  When the count
is nonzero, a text string of that length at offset 0x35 is the name of
a &ldquo;TableLook&rdquo;, e.g. &ldquo;Default&rdquo; or &ldquo;Academic&rdquo;.
</p>
<p>Observed values of <code>n4</code> vary from 0 to 17.  Out of 7,060 examples
in the corpus, it is nonzero only 36 times.
</p>
<p><code>encoding</code> is a character encoding, usually a Windows code page
such as <code>en_US.windows-1252</code> or <code>it_IT.windows-1252</code>.  The
rest of the character strings in the member use this encoding.  The
encoding string is itself encoded in US-ASCII.
</p>
<p><code>decimal</code> is the decimal point character.  The observed values
are &lsquo;<samp>.</samp>&rsquo; and &lsquo;<samp>,</samp>&rsquo;.
</p>
<p><code>grouping</code> is the grouping character.  Usually, it is &lsquo;<samp>,</samp>&rsquo; if
<code>decimal</code> is &lsquo;<samp>.</samp>&rsquo;, and vice versa.  Other observed values are
&lsquo;<samp>'</samp>&rsquo; (apostrophe), &lsquo;<samp> </samp>&rsquo; (space), and zero (presumably
indicating that digits should not be grouped).
</p>
<p><code>n-ccs</code> is observed as either 0 or 5.  When it is 5, the
following strings are CCA through CCE format strings.  See <a href="pspp.html#Custom-Currency-Formats">(pspp)Custom Currency Formats</a> section &lsquo;Custom Currency Formats&rsquo; in <cite>PSPP</cite>.  Most commonly these are all
<code>-,,,</code> but other strings occur.
</p>
<hr size="6">
<a name="SPV-Light-Member-Dimensions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-Formats" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-Categories" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Dimensions"></a>
<h3 class="subsection">D.2.7 Dimensions</h3>

<p>A pivot table presents multidimensional data.  A Dimension identifies
the categories associated with each dimension.
</p>
<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Dimensions &rArr; int[<tt>n-dims</tt>] Dimension*[<tt>n-dims</tt>]
Dimension &rArr; Value[<tt>name</tt>] DimUnknown int[<tt>n-categories</tt>] Category*[<tt>n-categories</tt>]
DimUnknown &rArr;
    byte[<tt>d1</tt>]
    (00 <em>|</em> 01 <em>|</em> 02)[<tt>d2</tt>]
    (i0 <em>|</em> i2)[<tt>d3</tt>]
    (00 <em>|</em> 01)[<tt>d4</tt>]
    (00 <em>|</em> 01)[<tt>d5</tt>]
    01
    int[<tt>d6</tt>]
</pre></td></tr></table>
</td></tr></table>

<p><code>name</code> is the name of the dimension, e.g. <code>Variables</code>,
<code>Statistics</code>, or a variable name.
</p>
<p><code>d1</code> is usually 0 but many other values have been observed.
</p>
<p><code>d3</code> is 2 over 99% of the time.
</p>
<p><code>d5</code> is 0 over 99% of the time.
</p>
<p><code>d6</code> is either -1 or the 0-based index of the dimension, e.g. 0
for the first dimension, 1 for the second, and so on.  The latter is
the case 98% of the time in the corpus.
</p>
<hr size="6">
<a name="SPV-Light-Member-Categories"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-Dimensions" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-Data" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Categories"></a>
<h3 class="subsection">D.2.8 Categories</h3>

<p>Categories are arranged in a tree.  Only the leaf nodes in the tree
are really categories; the others just serve as grouping constructs.
</p>
<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Category &rArr; Value[<tt>name</tt>] (Leaf <em>|</em> Group)
Leaf &rArr; 00 00 00 i2 int[<tt>index</tt>] i0
Group &rArr;
    (00 <em>|</em> 01)[<tt>merge</tt>] 00 01 (i0 <em>|</em> i2)[<tt>data</tt>]
    i-1 int[<tt>n-subcategories</tt>] Category*[<tt>n-subcategories</tt>]
</pre></td></tr></table>
</td></tr></table>

<p><code>name</code> is the name of the category (or group).
</p>
<p>A Leaf represents a leaf category.  The Leaf&rsquo;s <code>index</code> is a
nonnegative integer less than <code>n-categories</code> in the Dimension in
which the Category is nested (directly or indirectly).
</p>
<p>A Group represents a Group of nested categories.  Usually a Group
contains at least one Category, so that <code>n-subcategories</code> is
positive, but a few Groups with <code>n-subcategories</code> 0 has been
observed.
</p>
<p>If a Group&rsquo;s <code>merge</code> is 00, the most common value, then the group
is really a distinct group that should be represented as such in the
visual representation and user interface.  If <code>merge</code> is 01, the
categories in this group should be shown and treated as if they were
direct children of the group&rsquo;s containing group (or if it has no
parent group, then direct children of the dimension), and this group&rsquo;s
name is irrelevant and should not be displayed.  (Merged groups can be
nested!)
</p>
<p>A Group&rsquo;s <code>data</code> appears to be i2 when all of the categories
within a group are leaf categories that directly represent data values
for a variable (e.g. in a frequency table or crosstabulation, a group
of values in a variable being tabulated) and i0 otherwise.
</p>
<hr size="6">
<a name="SPV-Light-Member-Data"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-Categories" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-Value" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Data"></a>
<h3 class="subsection">D.2.9 Data</h3>

<p>The final part of an SPV light member contains the actual data.
</p>
<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Data &rArr;
    int[<tt>layers</tt>] int[<tt>rows</tt>] int[<tt>columns</tt>] int*[<tt>n-dimensions</tt>]
    int[<tt>n-data</tt>] Datum*[<tt>n-data</tt>]
Datum &rArr; int64[<tt>index</tt>] v3(00?) Value
</pre></td></tr></table>
</td></tr></table>

<p>The values of <code>layers</code>, <code>rows</code>, and <code>columns</code> each
specifies the number of dimensions displayed in layers, rows, and
columns, respectively.  Any of them may be zero.  Their values sum to
<code>n-dimensions</code> from Dimensions (see section <a href="#SPV-Light-Member-Dimensions">Dimensions</a>).
</p>
<p>The <code>n-dimensions</code> integers are a permutation of the 0-based
dimension numbers.  The first <code>layers</code> integers specify each of
the dimensions represented by layers, the next <code>rows</code> integers
specify the dimensions represented by rows, and the final
<code>columns</code> integers specify the dimensions represented by columns.
When there is more than one dimension of a given kind, the inner
dimensions are given first.
</p>
<p>The format of a Datum varies slightly from version 1 to version 3: in
version 1 it allows for an extra optional 00 byte.
</p>
<p>A Datum consists of an <code>index</code> and a Value.  Suppose there are
<em>d</em> dimensions and dimension <em>i</em>, <em>0 \le i &lt; d</em>, has
<em>n_i</em> categories.  Consider the datum at coordinates <em>x_i</em>,
<em>0 \le i &lt; d</em>, and note that <em>0 \le x_i &lt; n_i</em>.  Then the
index is calculated by the following algorithm:
</p>
<table><tr><td>&nbsp;</td><td><pre class="display">let <i>index</i> = 0
for each <em>i</em> from 0 to <em>d - 1</em>:
    <i>index</i> = (<em>n_i \times</em> <i>index</i>) <em>+</em> <em>x_i</em>
</pre></td></tr></table>

<p>For example, suppose there are 3 dimensions with 3, 4, and 5
categories, respectively.  The datum at coordinates (1, 2, 3) has
index <em>5 \times (4 \times (3 \times 0 + 1) + 2) + 3 = 33</em>.
</p>
<hr size="6">
<a name="SPV-Light-Member-Value"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-Data" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Member-ValueMod" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Value"></a>
<h3 class="subsection">D.2.10 Value</h3>

<p>Value is used throughout the SPV light member format.  It boils down
to a number or a string.
</p>
<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Value &rArr; 00? 00? 00? 00? RawValue
RawValue &rArr;
    01 ValueMod int[<tt>format</tt>] double[<tt>x</tt>]
  <em>|</em> 02 ValueMod int[<tt>format</tt>] double[<tt>x</tt>]
    string[<tt>varname</tt>] string[<tt>vallab</tt>] (01 <em>|</em> 02 <em>|</em> 03)
  <em>|</em> 03 string[<tt>local</tt>] ValueMod string[<tt>id</tt>] string[<tt>c</tt>] (00 <em>|</em> 01)[<tt>type</tt>]
  <em>|</em> 04 ValueMod int[<tt>format</tt>] string[<tt>vallab</tt>] string[<tt>varname</tt>]
    (01 <em>|</em> 02 <em>|</em> 03) string[<tt>s</tt>]
  <em>|</em> 05 ValueMod string[<tt>varname</tt>] string[<tt>varlabel</tt>] (01 <em>|</em> 02 <em>|</em> 03)
  <em>|</em> ValueMod string[<tt>format</tt>] int[<tt>n-args</tt>] Argument*[<tt>n-args</tt>]
Argument &rArr;
    i0 Value
  <em>|</em> int[<tt>x</tt>] i0 Value*[<tt>x</tt><em>+</em>1]      /* <tt>x</tt> <em>&gt;</em> 0 */
</pre></td></tr></table>
</td></tr></table>

<p>There are several possible encodings, which one can distinguish by the
first nonzero byte in the encoding.
</p>
<dl compact="compact">
<dt> 01</dt>
<dd><p>The numeric value <code>x</code>, intended to be presented to the user
formatted according to <code>format</code>, which is in the format described
for system files.  See <a href="#System-File-Output-Formats">System File Output Formats</a>, for details.
Most commonly, <code>format</code> has width 40 (the maximum).
</p>
<p>An <code>x</code> with the maximum negative double value <code>-DBL_MAX</code>
represents the system-missing value SYSMIS.  (HIGHEST and LOWEST have
not been observed.)  See section <a href="#System-File-Format">System File Format</a>, for more about these
special values.
</p>
</dd>
<dt> 02</dt>
<dd><p>Similar to <code>01</code>, with the additional information that <code>x</code> is
a value of variable <code>varname</code> and has value label <code>vallab</code>.
Both <code>varname</code> and <code>vallab</code> can be the empty string, the
latter very commonly.
</p>
<p>The meaning of the final byte is unknown.  Possibly it is connected to
whether the value or the label should be displayed.
</p>
</dd>
<dt> 03</dt>
<dd><p>A text string, in two forms: <code>c</code> is in English, and sometimes
abbreviated or obscure, and <code>local</code> is localized to the user&rsquo;s
locale.  In an English-language locale, the two strings are often the
same, and in the cases where they differ, <code>local</code> is more
appropriate for a user interface, e.g. <code>c</code> of &ldquo;Not a PxP table
for MCN...&rdquo; versus <code>local</code> of &ldquo;Computed only for a PxP table,
where P must be greater than 1.&rdquo;
</p>
<p><code>c</code> and <code>local</code> are always either both empty or both
nonempty.
</p>
<p><code>id</code> is a brief identifying string whose form seems to resemble a
programming language identifier, e.g. <code>cumulative_percent</code> or
<code>factor_14</code>.  It is not unique.
</p>
<p><code>type</code> is 00 for text taken from user input, such as syntax
fragment, expressions, file names, data set names, and 01 for fixed
text strings such as names of procedures or statistics.  In the former
case, <code>id</code> is always the empty string; in the latter case,
<code>id</code> is still sometimes empty.
</p>
</dd>
<dt> 04</dt>
<dd><p>The string value <code>s</code>, intended to be presented to the user
formatted according to <code>format</code>.  The format for a string is not
too interesting, and the corpus contains many clearly invalid formats
like A16.39 or A255.127 or A134.1, so readers should probably ignore
the format entirely.
</p>
<p><code>s</code> is a value of variable <code>varname</code> and has value label
<code>vallab</code>.  <code>varname</code> is never empty but <code>vallab</code> is
commonly empty.
</p>
<p>The meaning of the final byte is unknown.
</p>
</dd>
<dt> 05</dt>
<dd><p>Variable <code>varname</code>, which is rarely observed as empty in the
corpus, with variable label <code>varlabel</code>, which is often empty.
</p>
<p>The meaning of the final byte is unknown.
</p>
</dd>
<dt> 31 or 58</dt>
<dd><p>(These bytes begin a ValueMod.)  A format string, analogous to
<code>printf</code>, followed by one or more Arguments, each of which has
one or more values.  The format string uses the following syntax:
</p>
<dl compact="compact">
<dt> <code>\%</code></dt>
<dt> <code>\:</code></dt>
<dt> <code>\[</code></dt>
<dt> <code>\]</code></dt>
<dd><p>Each of these expands to the character following &lsquo;<samp>\\</samp>&rsquo;, to escape
characters that have special meaning in format strings.  These are
effective inside and outside the <code>[&hellip;]</code>  syntax forms
described below.
</p>
</dd>
<dt> <code>\n</code></dt>
<dd><p>Expands to a new-line, inside or outside the <code>[&hellip;]</code> forms
described below.
</p>
</dd>
<dt> <code>^<var>i</var></code></dt>
<dd><p>Expands to a formatted version of argument <var>i</var>, which must have
only a single value.  For example, <code>^1</code> expands to the first
argument&rsquo;s <code>value</code>.
</p>
</dd>
<dt> <code>[:<var>a</var>:]<var>i</var></code></dt>
<dd><p>Expands <var>a</var> for each of the values in <var>i</var>.  <var>a</var>
should contain one or more <code>^<var>j</var></code> conversions, which are
drawn from the values for argument <var>i</var> in order.  Some examples
from the corpus:
</p>
<dl compact="compact">
<dt> <code>[:^1:]1</code></dt>
<dd><p>All of the values for the first argument, concatenated.
</p>
</dd>
<dt> <code>[:^1\n:]1</code></dt>
<dd><p>Expands to the values for the first argument, each followed by
a new-line.
</p>
</dd>
<dt> <code>[:^1 = ^2:]2</code></dt>
<dd><p>Expands to <code><var>x</var> = <var>y</var></code> where <var>x</var> is the second
argument&rsquo;s first value and <var>y</var> is its second value.  (This would
be used only if the argument has two values.  If there were more
values, the second and third values would be directly concatenated,
which would look funny.)
</p></dd>
</dl>

</dd>
<dt> <code>[<var>a</var>:<var>b</var>:]<var>i</var></code></dt>
<dd><p>This extends the previous form so that the first values are expanded
using <var>a</var> and later values are expanded using <var>b</var>.  For an
unknown reason, within <var>a</var> the <code>^<var>j</var></code> conversions are
instead written as <code>%<var>j</var></code>.  Some examples from the corpus:
</p>
<dl compact="compact">
<dt> <code>[%1:*^1:]1</code></dt>
<dd><p>Expands to all of the values for the first argument, separated by
&lsquo;<samp>*</samp>&rsquo;.
</p>
</dd>
<dt> <code>[%1 = %2:, ^1 = ^2:]1</code></dt>
<dd><p>Given appropriate values for the first argument, expands to <code>X =
1, Y = 2, Z = 3</code>.
</p>
</dd>
<dt> <code>[%1:, ^1:]1</code></dt>
<dd><p>Given appropriate values, expands to <code>1, 2, 3</code>.
</p></dd>
</dl>
</dd>
</dl>

<p>The format string is localized to the user&rsquo;s locale.
</p></dd>
</dl>

<hr size="6">
<a name="SPV-Light-Member-ValueMod"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-Value" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Legacy-Detail-Member-Binary-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Light-Detail-Member-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="ValueMod"></a>
<h3 class="subsection">D.2.11 ValueMod</h3>

<p>A ValueMod can specify special modifications to a Value.
</p>
<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">ValueMod &rArr;
    31 i0 (i0 <em>|</em> i1 string[<tt>subscript</tt>])
    v1(00 (i1 <em>|</em> i2) 00 00 int 00 00)
    v3(count(FormatString Style ValueModUnknown))
  <em>|</em> 31 i1 int[<tt>footnote-number</tt>] Format
  <em>|</em> 31 i2 (00 <em>|</em> 01 <em>|</em> 02) 00 (i1 <em>|</em> i2 <em>|</em> i3) Format
  <em>|</em> 31 i3 00 00 01 00 i2 Format
  <em>|</em> 58
Style &rArr; 58 <em>|</em> 31 01? 00? 00? 00? 01 string[<tt>fgcolor</tt>] string[<tt>bgcolor</tt>] string[<tt>typeface</tt>] byte
Format &rArr; 00 00 count(FormatString Style 58)
FormatString &rArr; count((i0 (58 <em>|</em> 31 string))?)
ValueModUnknown &rArr; 58 <em>|</em> 31 i0 i0 i0 i0 01 00 (01 <em>|</em> 02 <em>|</em> 08) 00 08 00 0a 00)
</pre></td></tr></table>
</td></tr></table>

<p>The <code>footnote-number</code>, if present, specifies a footnote that the
Value references.  The footnote&rsquo;s marker is shown appended to the main
text of the Value, as a superscript.
</p>
<p>The <code>subscript</code>, if present, specifies a string to append to the
main text of the Value, as a subscript.  The subscript text is a brief
indicator, e.g. &lsquo;<samp>a</samp>&rsquo; or &lsquo;<samp>a,b</samp>&rsquo;, with its meaning indicated
by the table caption.  In this usage, subscripts are similar to
footnotes; one apparent difference is that a Value can only reference
one footnote but a subscript can list more than one letter.
</p>
<p>The Format, if present, is a format string for substitutions using the
syntax explained previously.  It appears to be an English-language
version of the localized format string in the Value in which the
Format is nested.
</p>
<p>The Style, if present, changes the style for this individual Value.
</p>
<hr size="6">
<a name="SPV-Legacy-Detail-Member-Binary-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Light-Member-ValueMod" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Legacy-Member-Metadata" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Legacy-Detail-Member-Binary-Format"></a>
<h2 class="section">D.3 Legacy Detail Member Binary Format</h2>

<p>Whereas the light binary format represents everything about a given
pivot table, the legacy binary format conceptually consists of a
number of named sources, each of which consists of a number of named
series, each of which is a 1-dimensional array of numbers or strings
or a mix.  Thus, the legacy binary member format is quite simple.
</p>
<p>This section uses the same context-free grammar notation as in the
previous section, with the following additions:
</p>
<dl compact="compact">
<dt> vAF(<var>x</var>)</dt>
<dd><p>In a version 0xaf legacy member, <var>x</var>; in other versions, nothing.
(The legacy member header indicates the version; see below.)
</p>
</dd>
<dt> vB0(<var>x</var>)</dt>
<dd><p>In a version 0xb0 legacy member, <var>x</var>; in other versions, nothing.
</p></dd>
</dl>

<p>A legacy detail member &lsquo;<tt>.bin</tt>&rsquo; has the following overall format:
</p>
<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">LegacyBinary &rArr;
    00 byte[<tt>version</tt>] int16[<tt>n-sources</tt>] int[<tt>member-size</tt>]
    Metadata*[<tt>n-sources</tt>] Data*[<tt>n-sources</tt>]
</pre></td></tr></table>
</td></tr></table>

<p><code>version</code> is a version number that affects the interpretation of
some of the other data in the member.  Versions 0xaf and 0xb0 are
known.  We will refer to &ldquo;version 0xaf&rdquo; and &ldquo;version 0xb0&rdquo; members
later on.
</p>
<p>A legacy member consists of <code>n-sources</code> data sources, each of
which has Metadata and Data.
</p>
<p><code>member-size</code> is the size of the legacy binary member, in bytes.
</p>
<p>The following sections go into more detail.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SPV-Legacy-Member-Metadata">D.3.1 Metadata</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SPV-Legacy-Member-Data">D.3.2 Data</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="SPV-Legacy-Member-Metadata"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Legacy-Detail-Member-Binary-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Legacy-Member-Data" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Legacy-Detail-Member-Binary-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Metadata"></a>
<h3 class="subsection">D.3.1 Metadata</h3>

<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Metadata &rArr;
    int[<tt>per-series</tt>] int[<tt>n-series</tt>] int[<tt>offset</tt>]
    vAF(byte*32[<tt>source-name</tt>])
    vB0(byte*64[<tt>source-name</tt>] int[<tt>x</tt>])
</pre></td></tr></table>
</td></tr></table>

<p>A data source consists of <code>n-series</code> series of data, with
<code>per-series</code> data values per series.
</p>
<p><code>source-name</code> is a 32- or 64-byte string padded on the right with
zero bytes.  The names that appear in the corpus are very generic,
usually <code>tableData</code> or <code>source0</code>.
</p>
<p>A given Metadata&rsquo;s <code>offset</code> is the offset, in bytes, from the
beginning of the member to the start of the corresponding Data.  This
allows programs to skip to the beginning of the data for a particular
source; it is also important to determine whether a source includes
any string data (see section <a href="#SPV-Legacy-Member-Data">Data</a>).
</p>
<p>The meaning of <code>x</code> in version 0xb0 is unknown.
</p>
<hr size="6">
<a name="SPV-Legacy-Member-Data"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Legacy-Member-Metadata" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Legacy-Detail-Member-XML-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPV-Legacy-Detail-Member-Binary-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Data-1"></a>
<h3 class="subsection">D.3.2 Data</h3>

<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">Data &rArr; NumericData StringData?
NumericData &rArr; NumericSeries*[<tt>n-series</tt>]
NumericSeries &rArr; byte*288[<tt>series-name</tt>] double*[<tt>per-series</tt>]
</pre></td></tr></table>
</td></tr></table>

<p>Data follow the Metadata in the legacy binary format, with sources in
the same order.  Each NumericSeries begins with a <code>series-name</code>
that generally indicates its role in the pivot table, e.g. &ldquo;cell&rdquo;,
&ldquo;cellFormat&rdquo;, &ldquo;dimension0categories&rdquo;, &ldquo;dimension0group0&rdquo;,
followed by the numeric data, one double per element in the series.  A
double with the maximum negative double <code>-DBL_MAX</code> represents the
system-missing value SYSMIS.
</p>
<table class="cartouche" border="1"><tr><td>
<table><tr><td>&nbsp;</td><td><pre class="format">StringData &rArr; i1 string[<tt>source-name</tt>] Pairs Labels

Pairs &rArr; int[<tt>n-string-series</tt>] PairSeries*[<tt>n-string-series</tt>]
PairSeries &rArr; string[<tt>pair-series-name</tt>] int[<tt>n-pairs</tt>] Pair*[<tt>n-pairs</tt>]
Pair &rArr; int[<tt>i</tt>] int[<tt>j</tt>]

Labels &rArr; int[<tt>n-labels</tt>] Label*[<tt>n-labels</tt>]
Label &rArr; int[<tt>frequency</tt>] int[<tt>s</tt>]
</pre></td></tr></table>
</td></tr></table>

<p>A source may include a mix of numeric and string data values.  When a
source includes any string data, the data values that are strings are
set to SYSMIS in the NumericSeries, and StringData follows the
NumericData.  A source that contains no string data omits the
StringData.  To reliably determine whether a source includes
StringData, the reader should check whether the offset following the
NumericData is the offset of the next series, as indicated by its
Metadata (or the end of the member, in the case of the last source).
</p>
<p>StringData repeats the name of the source (from Metadata).
</p>
<p>The string data overlays the numeric data.  <code>n-string-series</code> is
the number of series within the source that include string data.  More
precisely, it is the 1-based index of the last series in the source
that includes any string data; thus, it would be 4 if there are 5
series and only the fourth one includes string data.
</p>
<p>Each PairSeries consists a sequence of 0 or more Pair nonterminals,
each of which maps from a 0-based index within series <code>i</code> to a
0-based label index <code>j</code>, e.g. pair <code>i</code> = 2, <code>j</code> = 3,
means that the third data value (with value SYSMIS) is to be replaced
by the string of the fourth Label.
</p>
<p>The labels themselves follow the pairs.  The valuable part of each
label is the string <code>s</code>.  Each label also includes a
<code>frequency</code> that reports the number of pairs that reference it
(although this is not useful).
</p>
<hr size="6">
<a name="SPV-Legacy-Detail-Member-XML-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Legacy-Member-Data" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Legacy-Detail-Member-XML-Format"></a>
<h2 class="section">D.4 Legacy Detail Member XML Format</h2>

<p>This format is still under investigation.
</p><hr size="6">
<a name="Encrypted-File-Wrappers"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SPV-Legacy-Detail-Member-XML-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Wrapper-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SPSS-Viewer-File-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Encrypted-File-Wrappers-1"></a>
<h1 class="chapter">E. Encrypted File Wrappers</h1>

<p>SPSS 21 and later can package multiple kinds of files inside an
encrypted wrapper.  The wrapper has a common format, regardless of the
kind of the file that it contains.
</p>
<blockquote><p><b>Warning:</b> The SPSS encryption wrapper is poorly designed.  It is much cheaper
and faster to decrypt a file encrypted this way than if a well
designed alternative were used.  If you must use this format, use a
10-byte randomly generated password.
</p></blockquote>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Common-Wrapper-Format">E.1 Common Wrapper Format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Password-Encoding">E.2 Password Encoding</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Common-Wrapper-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-System-Files" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Common-Wrapper-Format-1"></a>
<h2 class="section">E.1 Common Wrapper Format</h2>

<p>This section describes the general format of an SPSS encrypted file
wrapper.  The following sections describe the details for each kind of
encapsulated file.
</p>
<p>An encrypted file wrapper begins with the following 36-byte header,
where <i>xxx</i> identifies the type of file encapsulated, as described
in the following sections:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">0000  1c 00 00 00 00 00 00 00  45 4e 43 52 59 50 54 45  |........ENCRYPTE|
0010  44 <i>xx</i> <i>xx</i> <i>xx</i> 15 00 00 00  00 00 00 00 00 00 00 00  |D<i>xxx</i>............|
0020  00 00 00 00                                       |....|
</pre></td></tr></table>

<p>Following the fixed header is essentially the regular contents of the
encapsulated file in its usual format, with each 16-byte block
encrypted with AES-256 in ECB mode.  Each type of encapsulated file is
processed in a slightly different way before encryption, as described
in the following sections.  The AES-256 key is derived from a password
in the following way:
</p>
<ol>
<li>
Start from the literal password typed by the user.  Truncate it to at
most 10 bytes, then append as many null bytes as necessary until there
are exactly 32 bytes.  Call this <var>password</var>.

</li><li>
Let <var>constant</var> be the following 73-byte constant:

<table><tr><td>&nbsp;</td><td><pre class="example">0000  00 00 00 01 35 27 13 cc  53 a7 78 89 87 53 22 11
0010  d6 5b 31 58 dc fe 2e 7e  94 da 2f 00 cc 15 71 80
0020  0a 6c 63 53 00 38 c3 38  ac 22 f3 63 62 0e ce 85
0030  3f b8 07 4c 4e 2b 77 c7  21 f5 1a 80 1d 67 fb e1
0040  e1 83 07 d8 0d 00 00 01  00
</pre></td></tr></table>

</li><li>
Compute CMAC-AES-256(<var>password</var>, <var>constant</var>).  Call the
16-byte result <var>cmac</var>.

</li><li>
The 32-byte AES-256 key is <var>cmac</var> || <var>cmac</var>, that is,
<var>cmac</var> repeated twice.
</li></ol>

<a name="Example-1"></a>
<h3 class="subheading">Example</h3>

<p>Consider the password &lsquo;<samp>pspp</samp>&rsquo;.  <var>password</var> is:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">0000  70 73 70 70 00 00 00 00  00 00 00 00 00 00 00 00  |pspp............|
0010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
</pre></td></tr></table>

<p><var>cmac</var> is:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">0000  3e da 09 8e 66 04 d4 fd  f9 63 0c 2c a8 6f b0 45
</pre></td></tr></table>

<p>The AES-256 key is:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">0000  3e da 09 8e 66 04 d4 fd  f9 63 0c 2c a8 6f b0 45
0010  3e da 09 8e 66 04 d4 fd  f9 63 0c 2c a8 6f b0 45
</pre></td></tr></table>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Encrypted-System-Files">E.1.1 Encrypted System Files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Encrypted-Syntax-Files">E.1.2 Encrypted Syntax Files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Encrypted-System-Files"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Common-Wrapper-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-Syntax-Files" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Wrapper-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Encrypted-System-Files-1"></a>
<h3 class="subsection">E.1.1 Encrypted System Files</h3>

<p>An encrypted system file uses <code>SAV</code> as the identifier in its
header.
</p>
<p>Before encryption, a system file is appended with as many null bytes
as needed (possibly zero) to make it a multiple of 16 bytes in length,
so that it fits exactly in a series of AES blocks.  (This implies that
encrypted system files must always be compressed, because otherwise a
system file with only a single variable might appear to have an extra
case.)
</p>
<hr size="6">
<a name="Encrypted-Syntax-Files"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Encrypted-System-Files" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Password-Encoding" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Wrapper-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Encrypted-Syntax-Files-1"></a>
<h3 class="subsection">E.1.2 Encrypted Syntax Files</h3>

<p>An encrypted syntax file uses <code>SPS</code> as the identifier in its
header.
</p>
<p>Before encryption, a syntax file is prefixed with a line at the
beginning of the form <code>* Encoding: <var>encoding</var>.</code>, where
<var>encoding</var> is the encoding used for the rest of the file,
e.g. <code>windows-1252</code>.  The syntax file is then appended with as
many bytes with value 04 as needed (possibly zero) to make it a
multiple of 16 bytes in length.
</p>
<hr size="6">
<a name="Password-Encoding"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Encrypted-Syntax-Files" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Password-Encoding-1"></a>
<h2 class="section">E.2 Password Encoding</h2>

<p>SPSS also supports what it calls &ldquo;encrypted passwords.&rdquo;  These are
not encrypted.  They are encoded with a simple, fixed scheme.  An
encoded password is always a multiple of 2 characters long, and never
longer than 20 characters.  The characters in an encoded password are
always in the graphic ASCII range 33 through 126.  Each successive
pair of characters in the password encodes a single byte in the
plaintext password.
</p>
<p>Use the following algorithm to decode a pair of characters:
</p>
<ol>
<li>
Let <var>a</var> be the ASCII code of the first character, and <var>b</var> be
the ASCII code of the second character.

</li><li>
Let <var>ah</var> be the most significant 4 bits of <var>a</var>.  Find the line
in the table below that has <var>ah</var> on the left side.  The right side
of the line is a set of possible values for the most significant 4
bits of the decoded byte.

<table><tr><td>&nbsp;</td><td><pre class="display"><tt>2 </tt> &rArr; <tt>2367</tt>
<tt>3 </tt> &rArr; <tt>0145</tt>
<tt>47</tt> &rArr; <tt>89cd</tt>
<tt>56</tt> &rArr; <tt>abef</tt>
</pre></td></tr></table>

</li><li>
Let <var>bh</var> be the most significant 4 bits of <var>b</var>.  Find the line
in the second table below that has <var>bh</var> on the left side.  The
right side of the line is a set of possible values for the most
significant 4 bits of the decoded byte.  Together with the results of
the previous step, only a single possibility is left.

<table><tr><td>&nbsp;</td><td><pre class="display"><tt>2 </tt> &rArr; <tt>139b</tt>
<tt>3 </tt> &rArr; <tt>028a</tt>
<tt>47</tt> &rArr; <tt>46ce</tt>
<tt>56</tt> &rArr; <tt>57df</tt>
</pre></td></tr></table>

</li><li>
Let <var>al</var> be the least significant 4 bits of <var>a</var>.  Find the
line in the table below that has <var>al</var> on the left side.  The right
side of the line is a set of possible values for the least significant
4 bits of the decoded byte.

<table><tr><td>&nbsp;</td><td><pre class="display"><tt>03cf</tt> &rArr; <tt>0145</tt>
<tt>12de</tt> &rArr; <tt>2367</tt>
<tt>478b</tt> &rArr; <tt>89cd</tt>
<tt>569a</tt> &rArr; <tt>abef</tt>
</pre></td></tr></table>

</li><li>
Let <var>bl</var> be the least significant 4 bits of <var>b</var>.  Find the
line in the table below that has <var>bl</var> on the left side.  The right
side of the line is a set of possible values for the least significant
4 bits of the decoded byte.  Together with the results of the previous
step, only a single possibility is left.

<table><tr><td>&nbsp;</td><td><pre class="display"><tt>03cf</tt> &rArr; <tt>028a</tt>
<tt>12de</tt> &rArr; <tt>139b</tt>
<tt>478b</tt> &rArr; <tt>46ce</tt>
<tt>569a</tt> &rArr; <tt>57df</tt>
</pre></td></tr></table>
</li></ol>

<a name="Example-2"></a>
<h3 class="subheading">Example</h3>

<p>Consider the encoded character pair &lsquo;<samp>-|</samp>&rsquo;.  <var>a</var> is
0x2d and <var>b</var> is 0x7c, so <var>ah</var> is 2, <var>bh</var> is 7, <var>al</var> is
0xd, and <var>bl</var> is 0xc.  <var>ah</var> means that the most significant
four bits of the decoded character is 2, 3, 6, or 7, and <var>bh</var>
means that they are 4, 6, 0xc, or 0xe.  The single possibility in
common is 6, so the most significant four bits are 6.  Similarly,
<var>al</var> means that the least significant four bits are 2, 3, 6, or 7,
and <var>bl</var> means they are 0, 2, 8, or 0xa, so the least significant
four bits are 2.  The decoded character is therefore 0x62, the letter
&lsquo;<samp>b</samp>&rsquo;.
</p><hr size="6">
<a name="q2c-Input-Format"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Password-Encoding" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Invoking-q2c" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Encrypted-File-Wrappers" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="q2c-Input-Format-1"></a>
<h1 class="appendix">F. <code>q2c</code> Input Format</h1>

<p>PSPP statistical procedures have a bizarre and somewhat irregular
syntax.  Despite this, a parser generator has been written that
adequately addresses many of the possibilities and tries to provide
hooks for the exceptional cases.  This parser generator is named
<code>q2c</code>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Invoking-q2c">F.1 Invoking q2c</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                q2c command-line syntax.
</td></tr>
<tr><td align="left" valign="top"><a href="#q2c-Input-Structure">F.2 <code>q2c</code> Input Structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         High-level layout of the input file.
</td></tr>
<tr><td align="left" valign="top"><a href="#Grammar-Rules">F.3 Grammar Rules</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Syntax of the grammar rules.
</td></tr>
</table>

<hr size="6">
<a name="Invoking-q2c"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#q2c-Input-Structure" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Invoking-q2c-1"></a>
<h2 class="section">F.1 Invoking q2c</h2>

<table><tr><td>&nbsp;</td><td><pre class="example">q2c <var>input.q</var> <var>output.c</var>
</pre></td></tr></table>

<p><code>q2c</code> translates a &lsquo;<samp>.q</samp>&rsquo; file into a &lsquo;<samp>.c</samp>&rsquo; file.  It takes
exactly two command-line arguments, which are the input file name and
output file name, respectively.  <code>q2c</code> does not accept any
command-line options.
</p>
<hr size="6">
<a name="q2c-Input-Structure"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Invoking-q2c" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Grammar-Rules" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="#GNU-Free-Documentation-License" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="q2c-Input-Structure-1"></a>
<h2 class="section">F.2 <code>q2c</code> Input Structure</h2>

<p><code>q2c</code> input files are divided into two sections: the grammar rules
and the supporting code.  The <em>grammar rules</em>, which make up the
first part of the input, are used to define the syntax of the
statistical procedure to be parsed.  The <em>supporting code</em>,
following the grammar rules, are copied largely unchanged to the output
file, except for certain escapes.
</p>
<p>The most important lines in the grammar rules are used for defining
procedure syntax.  These lines can be prefixed with a dollar sign
(&lsquo;<samp>$</samp>&rsquo;), which prevents Emacs&rsquo; CC-mode from munging them.  Besides
this, a bang (&lsquo;<samp>!</samp>&rsquo;) at the beginning of a line causes the line,
minus the bang, to be written verbatim to the output file (useful for
comments).  As a third special case, any line that begins with the exact
characters <code>/* *INDENT</code> is ignored and not written to the output.
This allows <code>.q</code> files to be processed through <code>indent</code>
without being munged.
</p>
<p>The syntax of the grammar rules themselves is given in the following
sections.
</p>
<p>The supporting code is passed into the output file largely unchanged.
However, the following escapes are supported.  Each escape must appear
on a line by itself.
</p>
<dl compact="compact">
<dt> <code>/* (header) */</code></dt>
<dd>
<p>Expands to a series of C <code>#include</code> directives which include the
headers that are required for the parser generated by <code>q2c</code>.
</p>
</dd>
<dt> <code>/* (decls <var>scope</var>) */</code></dt>
<dd>
<p>Expands to C variable and data type declarations for the variables and
<code>enum</code>s input and output by the <code>q2c</code> parser.  <var>scope</var>
must be either <code>local</code> or <code>global</code>.  <code>local</code> causes the
declarations to be output as function locals.  <code>global</code> causes them
to be declared as <code>static</code> module variables; thus, <code>global</code> is
a bit of a misnomer.
</p>
</dd>
<dt> <code>/* (parser) */</code></dt>
<dd>
<p>Expands to the entire parser.  Must be enclosed within a C function.
</p>
</dd>
<dt> <code>/* (free) */</code></dt>
<dd>
<p>Expands to a set of calls to the <code>free</code> function for variables
declared by the parser.  Only needs to be invoked if subcommands of type
<code>string</code> are used in the grammar rules.
</p></dd>
</dl>

<hr size="6">

<hr size="6">
<a name="GNU-Free-Documentation-License"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Grammar-Rules" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[ &gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#q2c-Input-Format" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="GNU-Free-Documentation-License-1"></a>
<h1 class="appendix">G. GNU Free Documentation License</h1>

<p align="center"> Version 1.3, 3 November 2008
</p>

<table><tr><td>&nbsp;</td><td><pre class="display">Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
<a href="http://fsf.org/">http://fsf.org/</a>

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></td></tr></table>

<ol>
<li>
PREAMBLE

<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em>free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.
</p>
<p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.
</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.
</p>
</li><li>
APPLICABILITY AND DEFINITIONS

<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.
</p>
<p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
</p>
<p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document&rsquo;s overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.
</p>
<p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.
</p>
<p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.
</p>
<p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.
</p>
<p>Examples of suitable formats for Transparent copies include plain
<small>ASCII</small> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.
</p>
<p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work&rsquo;s title,
preceding the beginning of the body of the text.
</p>
<p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.
</p>
<p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.
</p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.
</p>
</li><li>
VERBATIM COPYING

<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.
</p>
</li><li>
COPYING IN QUANTITY

<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document&rsquo;s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.
</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.
</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.
</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.
</p>
</li><li>
MODIFICATIONS

<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:
</p>
<ol>
<li>
Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

</li><li>
List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

</li><li>
State on the Title page the name of the publisher of the
Modified Version, as the publisher.

</li><li>
Preserve all the copyright notices of the Document.

</li><li>
Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

</li><li>
Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

</li><li>
Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document&rsquo;s license notice.

</li><li>
Include an unaltered copy of this License.

</li><li>
Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

</li><li>
Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

</li><li>
For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

</li><li>
Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

</li><li>
Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

</li><li>
Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

</li><li>
Preserve any Warranty Disclaimers.
</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version&rsquo;s license notice.
These titles must be distinct from any other section titles.
</p>
<p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.
</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.
</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.
</p>
</li><li>
COMBINING DOCUMENTS

<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.
</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
</p>
<p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;
</p>
</li><li>
COLLECTIONS OF DOCUMENTS

<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.
</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.
</p>
</li><li>
AGGREGATION WITH INDEPENDENT WORKS

<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation&rsquo;s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.
</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document&rsquo;s Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.
</p>
</li><li>
TRANSLATION

<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.
</p>
<p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.
</p>
</li><li>
TERMINATION

<p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.
</p>
<p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.
</p>
<p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.
</p>
<p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.
</p>
</li><li>
FUTURE REVISIONS OF THIS LICENSE

<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.
</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy&rsquo;s public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.
</p>
</li><li>
RELICENSING

<p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.
</p>
<p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.
</p>
<p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.
</p>
<p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.
</p>
<p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.
</p>
</li></ol>


<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h2 class="heading">ADDENDUM: How to use this License for your documents</h2>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></td></tr></table>

<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with&hellip;Texts.&rdquo; line with this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></td></tr></table>

<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.
</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</p>


<hr size="6">
<a name="SEC_Foot"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>Footnotes</h1>
<h3><a name="FOOT1" href="#DOCF1">(1)</a></h3>
<p>It might also be desirable for the LC_COLLATE category to be used for the purposes of sorting data.
</p><h3><a name="FOOT2" href="#DOCF2">(2)</a></h3>
<p>This part of the format may
not be fully understood, because only a single example of each
possibility has been examined.
</p><hr size="1">
<a name="SEC_Contents"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>Table of Contents</h1>
<div class="contents">

<ul class="toc">
  <li><a name="toc-Introduction-1" href="#Introduction">1. Introduction</a></li>
  <li><a name="toc-Basic-Concepts-1" href="#Basic-Concepts">2. Basic Concepts</a>
  <ul class="toc">
    <li><a name="toc-Values-1" href="#Values">2.1 Values</a>
    <ul class="toc">
      <li><a name="toc-Numeric-Values-1" href="#Numeric-Values">2.1.1 Numeric Values</a></li>
      <li><a name="toc-String-Values-1" href="#String-Values">2.1.2 String Values</a></li>
      <li><a name="toc-Runtime-Typed-Values-1" href="#Runtime-Typed-Values">2.1.3 Runtime Typed Values</a></li>
    </ul></li>
    <li><a name="toc-Input-and-Output-Formats-1" href="#Input-and-Output-Formats">2.2 Input and Output Formats</a>
    <ul class="toc">
      <li><a name="toc-Constructing-and-Verifying-Formats-1" href="#Constructing-and-Verifying-Formats">2.2.1 Constructing and Verifying Formats</a></li>
      <li><a name="toc-Format-Utility-Functions-1" href="#Format-Utility-Functions">2.2.2 Format Utility Functions</a></li>
      <li><a name="toc-Obtaining-Properties-of-Format-Types-1" href="#Obtaining-Properties-of-Format-Types">2.2.3 Obtaining Properties of Format Types</a></li>
      <li><a name="toc-Numeric-Formatting-Styles-1" href="#Numeric-Formatting-Styles">2.2.4 Numeric Formatting Styles</a></li>
      <li><a name="toc-Formatted-Data-Input-and-Output-1" href="#Formatted-Data-Input-and-Output">2.2.5 Formatted Data Input and Output</a></li>
    </ul></li>
    <li><a name="toc-User_002dMissing-Values-1" href="#User_002dMissing-Values">2.3 User-Missing Values</a>
    <ul class="toc">
      <li><a name="toc-Testing-for-Missing-Values-1" href="#Testing-for-Missing-Values">2.3.1 Testing for Missing Values</a></li>
      <li><a name="toc-Creation-and-Destruction-1" href="#Creating-and-Destroying-User_002dMissing-Values">2.3.2 Creation and Destruction</a></li>
      <li><a name="toc-Changing-User_002dMissing-Value-Set-Width-1" href="#Changing-User_002dMissing-Value-Set-Width">2.3.3 Changing User-Missing Value Set Width</a></li>
      <li><a name="toc-Inspecting-User_002dMissing-Value-Sets-1" href="#Inspecting-User_002dMissing-Value-Sets">2.3.4 Inspecting User-Missing Value Sets</a></li>
      <li><a name="toc-Modifying-User_002dMissing-Value-Sets-1" href="#Modifying-User_002dMissing-Value-Sets">2.3.5 Modifying User-Missing Value Sets</a></li>
    </ul></li>
    <li><a name="toc-Value-Labels-1" href="#Value-Labels">2.4 Value Labels</a>
    <ul class="toc">
      <li><a name="toc-Creation-and-Destruction" href="#Value-Labels-Creation-and-Destruction">2.4.1 Creation and Destruction</a></li>
      <li><a name="toc-Value-Labels-Properties-1" href="#Value-Labels-Properties">2.4.2 Value Labels Properties</a></li>
      <li><a name="toc-Adding-and-Removing-Labels" href="#Value-Labels-Adding-and-Removing-Labels">2.4.3 Adding and Removing Labels</a></li>
      <li><a name="toc-Iterating-through-Value-Labels" href="#Value-Labels-Iteration">2.4.4 Iterating through Value Labels</a></li>
    </ul></li>
    <li><a name="toc-Variables-1" href="#Variables">2.5 Variables</a>
    <ul class="toc">
      <li><a name="toc-Variable-Name-1" href="#Variable-Name">2.5.1 Variable Name</a></li>
      <li><a name="toc-Variable-Type-and-Width-1" href="#Variable-Type-and-Width">2.5.2 Variable Type and Width</a></li>
      <li><a name="toc-Variable-Missing-Values-1" href="#Variable-Missing-Values">2.5.3 Variable Missing Values</a></li>
      <li><a name="toc-Variable-Value-Labels-1" href="#Variable-Value-Labels">2.5.4 Variable Value Labels</a></li>
      <li><a name="toc-Variable-Print-and-Write-Formats-1" href="#Variable-Print-and-Write-Formats">2.5.5 Variable Print and Write Formats</a></li>
      <li><a name="toc-Variable-Labels-1" href="#Variable-Labels">2.5.6 Variable Labels</a></li>
      <li><a name="toc-GUI-Attributes" href="#Variable-GUI-Attributes">2.5.7 GUI Attributes</a></li>
      <li><a name="toc-Variable-Leave-Status-1" href="#Variable-Leave-Status">2.5.8 Variable Leave Status</a></li>
      <li><a name="toc-Dictionary-Class-1" href="#Dictionary-Class">2.5.9 Dictionary Class</a></li>
      <li><a name="toc-Variable-Creation-and-Destruction-1" href="#Variable-Creation-and-Destruction">2.5.10 Variable Creation and Destruction</a></li>
      <li><a name="toc-Variable-Short-Names-1" href="#Variable-Short-Names">2.5.11 Variable Short Names</a></li>
      <li><a name="toc-Variable-Relationships-1" href="#Variable-Relationships">2.5.12 Variable Relationships</a></li>
      <li><a name="toc-Variable-Auxiliary-Data-1" href="#Variable-Auxiliary-Data">2.5.13 Variable Auxiliary Data</a></li>
      <li><a name="toc-Variable-Categorical-Values-1" href="#Variable-Categorical-Values">2.5.14 Variable Categorical Values</a></li>
    </ul></li>
    <li><a name="toc-Dictionaries-1" href="#Dictionaries">2.6 Dictionaries</a>
    <ul class="toc">
      <li><a name="toc-Accessing-Variables" href="#Dictionary-Variable-Access">2.6.1 Accessing Variables</a></li>
      <li><a name="toc-Creating-Variables" href="#Dictionary-Creating-Variables">2.6.2 Creating Variables</a></li>
      <li><a name="toc-Deleting-Variables" href="#Dictionary-Deleting-Variables">2.6.3 Deleting Variables</a></li>
      <li><a name="toc-Changing-Variable-Order" href="#Dictionary-Reordering-Variables">2.6.4 Changing Variable Order</a></li>
      <li><a name="toc-Renaming-Variables" href="#Dictionary-Renaming-Variables">2.6.5 Renaming Variables</a></li>
      <li><a name="toc-Weight-Variable" href="#Dictionary-Weight-Variable">2.6.6 Weight Variable</a></li>
      <li><a name="toc-Filter-Variable" href="#Dictionary-Filter-Variable">2.6.7 Filter Variable</a></li>
      <li><a name="toc-Case-Limit" href="#Dictionary-Case-Limit">2.6.8 Case Limit</a></li>
      <li><a name="toc-Split-Variables" href="#Dictionary-Split-Variables">2.6.9 Split Variables</a></li>
      <li><a name="toc-File-Label" href="#Dictionary-File-Label">2.6.10 File Label</a></li>
      <li><a name="toc-Documents" href="#Dictionary-Documents">2.6.11 Documents</a></li>
    </ul></li>
    <li><a name="toc-Coding-Conventions-1" href="#Coding-Conventions">2.7 Coding Conventions</a></li>
    <li><a name="toc-Cases-1" href="#Cases">2.8 Cases</a></li>
    <li><a name="toc-Data-Sets-1" href="#Data-Sets">2.9 Data Sets</a></li>
    <li><a name="toc-Pools-1" href="#Pools">2.10 Pools</a></li>
  </ul></li>
  <li><a name="toc-Parsing-Command-Syntax-1" href="#Parsing-Command-Syntax">3. Parsing Command Syntax</a></li>
  <li><a name="toc-Processing-Data-1" href="#Processing-Data">4. Processing Data</a></li>
  <li><a name="toc-Presenting-Output-1" href="#Presenting-Output">5. Presenting Output</a></li>
  <li><a name="toc-Internationalisation-1" href="#Internationalisation">6. Internationalisation</a>
  <ul class="toc">
    <li><a name="toc-The-working-locales" href="#The-working-locales">6.1 The working locales</a>
    <ul class="toc">
      <li><a name="toc-The-user-interface-locale" href="#The-user-interface-locale">6.1.1 The user interface locale</a></li>
      <li><a name="toc-The-output-locale" href="#The-output-locale">6.1.2 The output locale</a></li>
      <li><a name="toc-The-data-locale" href="#The-data-locale">6.1.3 The data locale</a></li>
    </ul></li>
    <li><a name="toc-System-files" href="#System-files">6.2 System files</a></li>
    <li><a name="toc-GUI" href="#GUI">6.3 GUI</a>
    <ul class="toc">
      <li><a name="toc-Filenames" href="#Filenames">6.3.1 Filenames</a></li>
    </ul></li>
    <li><a name="toc-Existing-locale-handling-functions" href="#Existing-locale-handling-functions">6.4 Existing locale handling functions</a></li>
    <li><a name="toc-Quirks" href="#Quirks">6.5 Quirks</a></li>
  </ul></li>
  <li><a name="toc-Function-Index-1" href="#Function-Index">7. Function Index</a></li>
  <li><a name="toc-Concept-Index-1" href="#Concept-Index">8. Concept Index</a></li>
  <li><a name="toc-Portable-File-Format-1" href="#Portable-File-Format">A. Portable File Format</a>
  <ul class="toc">
    <li><a name="toc-Portable-File-Characters-1" href="#Portable-File-Characters">A.1 Portable File Characters</a></li>
    <li><a name="toc-Portable-File-Structure-1" href="#Portable-File-Structure">A.2 Portable File Structure</a></li>
    <li><a name="toc-Portable-File-Header-1" href="#Portable-File-Header">A.3 Portable File Header</a></li>
    <li><a name="toc-Version-and-Date-Info-Record-1" href="#Version-and-Date-Info-Record">A.4 Version and Date Info Record</a></li>
    <li><a name="toc-Identification-Records-1" href="#Identification-Records">A.5 Identification Records</a></li>
    <li><a name="toc-Variable-Count-Record-1" href="#Variable-Count-Record">A.6 Variable Count Record</a></li>
    <li><a name="toc-Precision-Record-1" href="#Precision-Record">A.7 Precision Record</a></li>
    <li><a name="toc-Case-Weight-Variable-Record-1" href="#Case-Weight-Variable-Record">A.8 Case Weight Variable Record</a></li>
    <li><a name="toc-Variable-Records-1" href="#Variable-Records">A.9 Variable Records</a></li>
    <li><a name="toc-Value-Label-Records-1" href="#Value-Label-Records">A.10 Value Label Records</a></li>
    <li><a name="toc-Document-Record-1" href="#Portable-File-Document-Record">A.11 Document Record</a></li>
    <li><a name="toc-Portable-File-Data-1" href="#Portable-File-Data">A.12 Portable File Data</a></li>
  </ul></li>
  <li><a name="toc-System-File-Format-1" href="#System-File-Format">B. System File Format</a>
  <ul class="toc">
    <li><a name="toc-System-File-Record-Structure-1" href="#System-File-Record-Structure">B.1 System File Record Structure</a></li>
    <li><a name="toc-File-Header-Record-1" href="#File-Header-Record">B.2 File Header Record</a></li>
    <li><a name="toc-Variable-Record-1" href="#Variable-Record">B.3 Variable Record</a></li>
    <li><a name="toc-Value-Labels-Records-1" href="#Value-Labels-Records">B.4 Value Labels Records</a></li>
    <li><a name="toc-Document-Record-2" href="#Document-Record">B.5 Document Record</a></li>
    <li><a name="toc-Machine-Integer-Info-Record-1" href="#Machine-Integer-Info-Record">B.6 Machine Integer Info Record</a></li>
    <li><a name="toc-Machine-Floating_002dPoint-Info-Record-1" href="#Machine-Floating_002dPoint-Info-Record">B.7 Machine Floating-Point Info Record</a></li>
    <li><a name="toc-Multiple-Response-Sets-Records-1" href="#Multiple-Response-Sets-Records">B.8 Multiple Response Sets Records</a></li>
    <li><a name="toc-Extra-Product-Info-Record-1" href="#Extra-Product-Info-Record">B.9 Extra Product Info Record</a></li>
    <li><a name="toc-Variable-Display-Parameter-Record-1" href="#Variable-Display-Parameter-Record">B.10 Variable Display Parameter Record</a></li>
    <li><a name="toc-Long-Variable-Names-Record-1" href="#Long-Variable-Names-Record">B.11 Long Variable Names Record</a></li>
    <li><a name="toc-Very-Long-String-Record-1" href="#Very-Long-String-Record">B.12 Very Long String Record</a></li>
    <li><a name="toc-Character-Encoding-Record-1" href="#Character-Encoding-Record">B.13 Character Encoding Record</a></li>
    <li><a name="toc-Long-String-Value-Labels-Record-1" href="#Long-String-Value-Labels-Record">B.14 Long String Value Labels Record</a></li>
    <li><a name="toc-Long-String-Missing-Values-Record-1" href="#Long-String-Missing-Values-Record">B.15 Long String Missing Values Record</a></li>
    <li><a name="toc-Data-File-and-Variable-Attributes-Records-1" href="#Data-File-and-Variable-Attributes-Records">B.16 Data File and Variable Attributes Records</a>
    <ul class="toc">
      <li><a name="toc-Variable-Roles-1" href="#Variable-Roles">B.16.1 Variable Roles</a></li>
    </ul></li>
    <li><a name="toc-Extended-Number-of-Cases-Record-1" href="#Extended-Number-of-Cases-Record">B.17 Extended Number of Cases Record</a></li>
    <li><a name="toc-Other-Informational-Records-1" href="#Other-Informational-Records">B.18 Other Informational Records</a></li>
    <li><a name="toc-Dictionary-Termination-Record-1" href="#Dictionary-Termination-Record">B.19 Dictionary Termination Record</a></li>
    <li><a name="toc-Data-Record-1" href="#Data-Record">B.20 Data Record</a></li>
  </ul></li>
  <li><a name="toc-SPSS_002fPC_002b-System-File-Format-1" href="#SPSS_002fPC_002b-System-File-Format">C. SPSS/PC+ System File Format</a>
  <ul class="toc">
    <li><a name="toc-Record-0_003a-Main-Header-Record" href="#Record-0-Main-Header-Record">C.1 Record 0: Main Header Record</a></li>
    <li><a name="toc-Record-1_003a-Variables-Record" href="#Record-1-Variables-Record">C.2 Record 1: Variables Record</a></li>
    <li><a name="toc-Record-2_003a-Labels-Record" href="#Record-2-Labels-Record">C.3 Record 2: Labels Record</a></li>
    <li><a name="toc-Record-3_003a-Data-Record" href="#Record-3-Data-Record">C.4 Record 3: Data Record</a></li>
    <li><a name="toc-Records-4-and-5_003a-Data-Entry" href="#Records-4-and-5-Data-Entry">C.5 Records 4 and 5: Data Entry</a></li>
  </ul></li>
  <li><a name="toc-SPSS-Viewer-File-Format-1" href="#SPSS-Viewer-File-Format">D. SPSS Viewer File Format</a>
  <ul class="toc">
    <li><a name="toc-Structure-Member-Format" href="#SPV-Structure-Member-Format">D.1 Structure Member Format</a>
    <ul class="toc">
      <li><a name="toc-The-heading-Element" href="#SPV-heading-Element">D.1.1 The <code>heading</code> Element</a></li>
      <li><a name="toc-The-label-Element" href="#SPV-label-Element">D.1.2 The <code>label</code> Element</a></li>
      <li><a name="toc-The-container-Element" href="#SPV-container-Element">D.1.3 The <code>container</code> Element</a></li>
      <li><a name="toc-The-text-Element-_0028Inside-container_0029" href="#SPV-text-Element-_0028Inside-container_0029">D.1.4 The <code>text</code> Element (Inside <code>container</code>)</a></li>
      <li><a name="toc-The-html-Element" href="#SPV-html-Element">D.1.5 The <code>html</code> Element</a></li>
      <li><a name="toc-The-table-Element" href="#SPV-table-Element">D.1.6 The <code>table</code> Element</a></li>
      <li><a name="toc-The-tableStructure-Element" href="#SPV-tableStructure-Element">D.1.7 The <code>tableStructure</code> Element</a></li>
      <li><a name="toc-The-dataPath-Element" href="#SPV-dataPath-Element">D.1.8 The <code>dataPath</code> Element</a></li>
      <li><a name="toc-The-pageSetup-Element" href="#SPV-pageSetup-Element">D.1.9 The <code>pageSetup</code> Element</a></li>
      <li><a name="toc-The-pageHeader-and-pageFooter-Elements" href="#SPV-pageHeader-and-pageFooter-Elements">D.1.10 The <code>pageHeader</code> and <code>pageFooter</code> Elements</a></li>
      <li><a name="toc-The-pageParagraph-Element" href="#SPV-pageParagraph-Element">D.1.11 The <code>pageParagraph</code> Element</a></li>
      <li><a name="toc-The-text-Element-_0028Inside-pageParagraph_0029" href="#SPV-text-Element-_0028Inside-pageParagraph_0029">D.1.12 The <code>text</code> Element (Inside <code>pageParagraph</code>)</a></li>
    </ul></li>
    <li><a name="toc-Light-Detail-Member-Format" href="#SPV-Light-Detail-Member-Format">D.2 Light Detail Member Format</a>
    <ul class="toc">
      <li><a name="toc-Header" href="#SPV-Light-Member-Header">D.2.1 Header</a></li>
      <li><a name="toc-Title" href="#SPV-Light-Member-Title">D.2.2 Title</a></li>
      <li><a name="toc-Caption" href="#PSV-Light-Member-Caption">D.2.3 Caption</a></li>
      <li><a name="toc-Footnotes" href="#SPV-Light-Member-Footnotes">D.2.4 Footnotes</a></li>
      <li><a name="toc-Fonts" href="#SPV-Light-Member-Fonts">D.2.5 Fonts</a></li>
      <li><a name="toc-Formats" href="#SPV-Light-Member-Formats">D.2.6 Formats</a></li>
      <li><a name="toc-Dimensions" href="#SPV-Light-Member-Dimensions">D.2.7 Dimensions</a></li>
      <li><a name="toc-Categories" href="#SPV-Light-Member-Categories">D.2.8 Categories</a></li>
      <li><a name="toc-Data" href="#SPV-Light-Member-Data">D.2.9 Data</a></li>
      <li><a name="toc-Value" href="#SPV-Light-Member-Value">D.2.10 Value</a></li>
      <li><a name="toc-ValueMod" href="#SPV-Light-Member-ValueMod">D.2.11 ValueMod</a></li>
    </ul></li>
    <li><a name="toc-Legacy-Detail-Member-Binary-Format" href="#SPV-Legacy-Detail-Member-Binary-Format">D.3 Legacy Detail Member Binary Format</a>
    <ul class="toc">
      <li><a name="toc-Metadata" href="#SPV-Legacy-Member-Metadata">D.3.1 Metadata</a></li>
      <li><a name="toc-Data-1" href="#SPV-Legacy-Member-Data">D.3.2 Data</a></li>
    </ul></li>
    <li><a name="toc-Legacy-Detail-Member-XML-Format" href="#SPV-Legacy-Detail-Member-XML-Format">D.4 Legacy Detail Member XML Format</a></li>
  </ul></li>
  <li><a name="toc-Encrypted-File-Wrappers-1" href="#Encrypted-File-Wrappers">E. Encrypted File Wrappers</a>
  <ul class="toc">
    <li><a name="toc-Common-Wrapper-Format-1" href="#Common-Wrapper-Format">E.1 Common Wrapper Format</a>
    <ul class="toc">
      <li><a name="toc-Encrypted-System-Files-1" href="#Encrypted-System-Files">E.1.1 Encrypted System Files</a></li>
      <li><a name="toc-Encrypted-Syntax-Files-1" href="#Encrypted-Syntax-Files">E.1.2 Encrypted Syntax Files</a></li>
    </ul></li>
    <li><a name="toc-Password-Encoding-1" href="#Password-Encoding">E.2 Password Encoding</a></li>
  </ul></li>
  <li><a name="toc-q2c-Input-Format-1" href="#q2c-Input-Format">F. <code>q2c</code> Input Format</a>
  <ul class="toc">
    <li><a name="toc-Invoking-q2c-1" href="#Invoking-q2c">F.1 Invoking q2c</a></li>
    <li><a name="toc-q2c-Input-Structure-1" href="#q2c-Input-Structure">F.2 <code>q2c</code> Input Structure</a></li>
    <li><a name="toc-Grammar-Rules-1" href="#Grammar-Rules">F.3 Grammar Rules</a></li>
  </ul></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">G. GNU Free Documentation License</a></li>
</ul>
</div>
<hr size="1">
<a name="SEC_About"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1>About This Document</h1>
<p>
  This document was generated by <em>StatSoft</em> on <em>February 22, 2017</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
</p>
<p>
  The buttons in the navigation panels have the following meaning:
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Go to </th>
    <th> From 1.2.3 go to</th>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Back</td>
    <td>Previous section in reading order</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Forward</td>
    <td>Next section in reading order</td>
    <td>1.2.4</td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>Beginning of this chapter or previous chapter</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [ Up ] </td>
    <td align="center">Up</td>
    <td>Up section</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>Next chapter</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [Top] </td>
    <td align="center">Top</td>
    <td>Cover (top) of document</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Contents] </td>
    <td align="center">Contents</td>
    <td>Table of contents</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>Index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">About</td>
    <td>About (help)</td>
    <td> &nbsp; </td>
  </tr>
</table>

<p>
  where the <strong> Example </strong> assumes that the current position is at <strong> Subsubsection One-Two-Three </strong> of a document of the following structure:
</p>

<ul>
  <li> 1. Section One
    <ul>
      <li>1.1 Subsection One-One
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Subsection One-Two
        <ul>
          <li>1.2.1 Subsubsection One-Two-One</li>
          <li>1.2.2 Subsubsection One-Two-Two</li>
          <li>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp;
            <strong>&lt;== Current Position </strong></li>
          <li>1.2.4 Subsubsection One-Two-Four</li>
        </ul>
      </li>
      <li>1.3 Subsection One-Three
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Subsection One-Four</li>
    </ul>
  </li>
</ul>

<hr size="1">
<p>
 <font size="-1">
  This document was generated by <em>StatSoft</em> on <em>February 22, 2017</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
 </font>
 <br>

</p>
</body>
</html>
